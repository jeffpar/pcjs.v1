(function(){/*
 https://www.pcjs.org/modules/shared/lib/diskapi.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/shared/lib/dumpapi.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/shared/lib/reportapi.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/shared/lib/userapi.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/shared/lib/keys.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/shared/lib/strlib.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/shared/lib/weblib.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/messages.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/device.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/cpu.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/rom.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/ram.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/keyboard.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/pc11.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/rk11.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/rl11.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/rx11.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/computer.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/shared/lib/state.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/shared/lib/embed.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/shared/lib/defines.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/shared/lib/usrlib.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/shared/lib/component.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/defines.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/panel.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/bus.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/memory.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/cpustate.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/cpuops.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/serial.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/disk.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/drive.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/shared/lib/debugger.js (C) Jeff Parsons 2012-2019
 https://www.pcjs.org/modules/pdp11/lib/debugger.js (C) Jeff Parsons 2012-2019
*/
var k;function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function ba(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:aa(a)}}function ca(a){for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c}var da="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},ea;
if("function"==typeof Object.setPrototypeOf)ea=Object.setPrototypeOf;else{var fa;a:{var ha={be:!0},ia={};try{ia.__proto__=ha;fa=ia.be;break a}catch(a){}fa=!1}ea=fa?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var ja=ea;
function t(a,b){a.prototype=da(b.prototype);a.prototype.constructor=a;if(ja)ja(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.Hk=b.prototype}var ka="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},la="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;
function ma(a,b){if(b){var c=la;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ka(c,a,{configurable:!0,writable:!0,value:b})}}ma("Math.trunc",function(a){return a?a:function(b){b=Number(b);if(isNaN(b)||Infinity===b||-Infinity===b||0===b)return b;var c=Math.floor(Math.abs(b));return 0>b?-c:c}});ma("Number.parseInt",function(a){return a||parseInt});ma("Math.log2",function(a){return a?a:function(b){return Math.log(b)/Math.LN2}});
ma("Array.prototype.fill",function(a){return a?a:function(b,c,d){var e=this.length||0;0>c&&(c=Math.max(0,e+c));if(null==d||d>e)d=e;d=Number(d);0>d&&(d=Math.max(0,e+d));for(c=Number(c||0);c<d;c++)this[c]=b;return this}});
var na={163840:[40,1,8,,254],184320:[40,1,9,,252],327680:[40,2,8,,255],368640:[40,2,9,,253],737280:[80,2,9,,249],1228800:[80,2,15,,249],1474560:[80,2,18,,240],2949120:[80,2,36,,240],10653696:[306,4,17],21411840:[615,4,17],256256:[77,1,26,128],2494464:[203,2,12,512],5242880:[256,2,40,256],10485760:[512,2,40,256]},oa={wi:0,ze:1,Di:2,Ei:3,Fi:4,Gi:5,Hi:6,Ii:7,Id:8,Ji:9,Ae:10,Ki:11,Li:12,Be:13,Mi:14,Ni:15,Oi:16,Pi:17,Qi:18,Ri:19,Si:20,Ti:21,Ui:22,Vi:23,Wi:24,Xi:25,Yi:26,dj:27," ":32,"!":33,'"':34,"#":35,
$:36,"%":37,"&":38,"'":39,"(":40,")":41,"*":42,"+":43,",":44,"-":45,".":46,"/":47,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,":":58,";":59,"<":60,"=":61,">":62,"?":63,"@":64,Ed:65,si:66,yi:67,Zi:68,E:69,fj:70,ij:71,uj:72,wj:73,xj:74,yj:75,zj:76,Cj:77,Ej:78,Kj:79,Nj:80,Q:81,Pj:82,Sj:83,ak:84,ck:85,ek:86,fk:87,jk:88,kk:89,sf:90,"[":91,"\\":92,"]":93,"^":94,_:95,"`":96,be:97,mk:98,qk:99,d:100,e:101,sk:102,tk:103,uk:104,vk:105,Ak:106,k:107,Bk:108,Ck:109,n:110,Dk:111,p:112,q:113,r:114,Ek:115,t:116,
Ik:117,Jk:118,Kk:119,x:120,y:121,z:122,"{":123,"|":124,"}":125,"~":126,Wb:127};function pa(){}
function qa(a,b){if(a){b||(b=10);var c,d=0<a.indexOf(",");d&&(a=a.replace(/,/g,""));var e=c=a.charAt(0);"#"==c?(b=8,c=""):"$"==c&&(b=16,c="");e!=c?a=a.substr(1):(e=c=a.substr(0,2),"0b"==c&&d||"^B"==c?(b=2,c=""):"0o"==c||"^O"==c?(b=8,c=""):"^D"==c?(b=10,c=""):"0x"==c&&(b=16,c=""),e!=c&&(a=a.substr(2)));e=c=a.slice(-1);"Y"==c||"y"==c?(b=2,c=""):"."==c?(b=10,c=""):"H"==c||"h"==c?(b=16,c=""):"K"==c?c="000":"M"==c?c="000000":"G"==c&&(c="000000000");e!=c&&(a=a.slice(0,-1)+c);var f;e=0;10>=b&&(c=a.match(/(-?[0-9]+)B([0-9]*)/))&&
(a=c[1],e=35-((c[2]||35)&255));c=a;if(((d=b)&&10!=d?16==d?null!==c.match(/^-?[0-9a-f]+$/i):8==d?null!==c.match(/^-?[0-7]+$/):2==d&&null!==c.match(/^-?[01]+$/):null!==c.match(/^-?[0-9]+$/))&&!isNaN(f=parseInt(a,b))){e&&(0>f&&(f+=Math.pow(2,36)),f=0<e?f*Math.pow(2,e):Math.trunc(f/Math.pow(2,-e)));var g=f}}return g}
function ra(a,b,c,d,e){e=void 0===e?0:e;var f="";isNaN(a)||"number"!=typeof a?a=null:(0>a&&-1<a&&(a=-1),0>a&&(a+=Math.pow(b,c)),a>=Math.pow(b,c)&&(c=Math.ceil(Math.log(a)/Math.log(b))));for(var g=e||-1;0<c--;){g||(f=","+f,g=e);if(null==a)f="?"+f;else{var h=a%b;h+=0<=h&&9>=h?48:55;f=String.fromCharCode(h)+f;a=Math.trunc(a/b)}g--}return(void 0===d?"":d)+f}function ta(a,b,c){b?36<b&&(b=36):(b=Math.abs(a),b=255>=b?8:262143>=b?18:36);return ra(a,2,b,"",c)}
function v(a,b,c){b?12<b&&(b=12):(b=Math.abs(a),b=262143>=b?6:16777215>=b?8:12);return ra(a,8,b,c?"0o":"")}function ua(a,b){b?11<b&&(b=11):b=99999>=Math.abs(a)?5:11;return ra(a,10,b)}function w(a,b,c){b?9<b&&(b=9):(b=Math.abs(a),b=65535>=b?4:4294967295>=b?8:9);return ra(a,16,b,c?"0x":"")}function va(a){return w(a,4,!0)}function wa(a,b){var c=a,d=a.lastIndexOf("/");0<=d&&(c=a.substr(d+1));d=c.indexOf("&");0<d&&(c=c.substr(0,d));b&&(d=c.lastIndexOf("."),0<d&&(c=c.substring(0,d)));return c}
function xa(a){var b="",c=a.lastIndexOf(".");0<=c&&(b=a.substr(c+1).toLowerCase());return b}function ya(a,b){return-1!==a.indexOf(b,a.length-b.length)}function za(a){return a.replace(/[&<>"'$]/g,function(b){return Aa[b]})}function Ba(a,b){return(a+"                                        ").slice(0,b)}
function Ca(a){for(var b=[],c=0;c<arguments.length;++c)b[c]=arguments[c];return void 0===b[0]?new Date(Date.now()):"string"===typeof b[0]?new Date(b[0]+" "+(b[1]||"00:00:00 GMT")):void 0===b[1]?new Date(b[0]):new Date(Date.UTC.apply(Date,b instanceof Array?b:ca(ba(b))))}
function Da(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];d="";var e=a.split(/%([-+ 0#]*)([0-9]*|\*)(\.[0-9]+|)([hlL]?)([A-Za-z%])/),f=0,g;for(g=0;g<e.length-6;g+=6){d+=e[g];var h=e[g+5],m="ACDFHIMNSTWYbdfjcsoXx%".indexOf(h);if(0>m)d+="%"+e[g+1]+e[g+2]+e[g+3]+e[g+4]+h;else{if(f<c.length){var l=c[f];"%"!=h&&f++}else l=c[c.length-1];var n=e[g+1],p=e[g+2];"*"==p?(p=l,l=f<c.length?c[f++]:c[c.length-1]):p=+p||0;var r=e[g+3];r=r?+r.substr(1):-1;var q=0<=n.indexOf("#"),u=0<=n.indexOf("0"),
y=null,x=0,C="";m=12>m&&"object"!=typeof l?Ca(l):l;switch(h){case "C":l=q?"#":"";d+=isNaN(m.getTime())?void 0:Da(Da("%%%sW, %%%sF %%%sD, %%%sY",l),m);continue;case "D":l=q?m.getUTCDate():m.getDate();h="d";break;case "A":case "H":case "I":l=q?m.getUTCHours():m.getHours();"A"==h?(l=12>l?"am":"pm",h="s"):("I"==h&&(l=l?12<l?l-12:l:12),h="d");break;case "F":case "M":l=q?m.getUTCMonth():m.getMonth();"F"==h?(l=Ea[l],h="s"):(l++,h="d");break;case "N":l=q?m.getUTCMinutes():m.getMinutes();h="d";break;case "S":l=
q?m.getUTCSeconds():m.getSeconds();h="d";break;case "T":l=q?"#":"";d+=isNaN(m.getTime())?void 0:Da(Da("%%%sY-%%%s02M-%%%s02D %%%s02H:%%%s02N:%%%s02S",l),m);continue;case "W":l=Fa[q?m.getUTCDay():m.getDay()];h="s";break;case "Y":l=q?m.getUTCFullYear():m.getFullYear(),0<r&&(l%=Math.pow(10,r),r=-1),h="d"}switch(h){case "b":d+=l?"true":"false";break;case "d":l=Math.trunc(l);case "f":h=l+"";0<=r&&(h=l.toFixed(r));h.length<p&&(u?(0>l&&(p--,h=h.substr(1)),h=("0000000000"+h).slice(-p),0>l&&(h="-"+h)):h=("          "+
h).slice(-p));d+=h;break;case "j":d+=JSON.stringify(l,null,p||void 0);break;case "c":l="string"==typeof l?l[0]:String.fromCharCode(l);case "s":if(void 0!==l)for("string"!=typeof l&&(l=l.toString()),0<=r&&(l=l.substr(0,r));l.length<p;)l=0<=n.indexOf("-")?l+" ":" "+l;d+=l;break;case "o":x=8,q&&(C="0");case "X":y=Ha;case "x":h="";x||(x=16);!C&&q&&(C="0x");y||(y=Ia);"string"==typeof l&&(l=Number.parseInt(l,l.match(/(^0x|[a-f])/i)?16:10));u&&!p&&(p=Math.abs(l),p=65535>=p?4:4294967295>=p?8:9);p-=C.length;
do r=l&x-1,l>>>=16==x?4:3,u||!h||r||l?h=y[r]+h:(C&&(h=C+h,C=""),0<p&&(h=" "+h));while(0<--p||l);d+=C+h;break;case "%":d+="%";break;default:d+="(unimplemented printf type %"+h+")"}}}return d+=e[g]}function Ja(a){return String.prototype.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}
var Aa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;",$:"&dollar;"},Ka={0:"NUL",1:"SOH",2:"STX",3:"ETX",4:"EOT",5:"ENQ",6:"ACK",7:"BEL",8:"BS",9:"TAB",10:"LF",11:"VT",12:"FF",13:"CR",14:"SO",15:"SI",16:"DLE",17:"XON",18:"DC2",19:"XOFF",20:"DC4",21:"NAK",22:"SYN",23:"ETB",24:"CAN",25:"EM",26:"SUB",27:"ESC",28:"FS",29:"GS",30:"RS",31:"US",127:"DEL"},Ia="0123456789abcdef",Ha="0123456789ABCDEF",Fa="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Ea="January February March April May June July August September October November December".split(" ");
function Ma(a,b,c){var d=0,e=a.length,f=0;for(void 0===c&&(c=function(m,l){return m>l?1:m<l?-1:0});d<e;){var g=d+e>>1,h=void 0;h=c(b,a[g]);0<h?d=g+1:(e=g,f=!h)}return f?d:~d}
function Na(a,b,c,d){function e(){if(4!==l.readyState)return null;try{g=n?l.response:l.responseText}catch(u){}if(null==g||200!=l.status&&(l.status||!g.length||"file:"!=(window?window.location.protocol:"file:")))if(f=l.status||-1,!l.status&&!Oa){var q=m.match(/(^https?:\/\/[^/]+)(.*)/);q&&(Oa=!0,z("PCjs was unable to perform a cross-origin resource request to '"+q[1]+"'.\n\nIf you're running an ad blocker, try adding '"+Pa()+"' to your whitelist (or find a smarter ad blocker)."))}d&&d(a,g,f);return[g,
f]}b=void 0===b?"text":b;c=void 0===c?!1:c;var f=0,g=null,h=null;if("object"==typeof resources&&(g=resources[a]))return d&&d(a,g,f),[g,f];if(c&&"function"==typeof resources)return resources(a,function(q,u){d&&d(a,q,u)}),h;var m=a;"pcjs:8088"==(window?window.location.host:"localhost")||"undefined"!==typeof module?(m=a.replace(/^(http:\/\/archive\.pcjs\.org\/|https:\/\/[a-z0-9-]+\.amazonaws\.com\/archive\.pcjs\.org\/)([^/]*)\/(.*?)\/([^/]*)$/,"/$2-demo/$3/archive/$4"),m=m.replace(/^https:\/\/([a-z0-9]+)-disks\.pcjs\.org\/(.*)$/,
"/disks-$1/$2").replace(/^https:\/\/(cds[0-9]+)\.pcjs\.org\/(.*)$/,"/disks-cds/$1/$2")):m=a.replace(/^\/disks-cds\/([^/]*)\//,"https://$1.pcjs.org/").replace(/^\/disks-([a-z0-9]+)\//,"https://$1-disks.pcjs.org/");var l=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP"),n=!1,p="string"===typeof l.responseType;c&&(l.onreadystatechange=e);if(b&&"object"==typeof b){p="";for(var r in b)b.hasOwnProperty(r)&&(p&&(p+="&"),p+=r+"="+encodeURIComponent(b[r]));p=p.replace(/%20/g,
"+");l.open("POST",m,c);l.setRequestHeader("Content-type","application/x-www-form-urlencoded");l.send(p)}else l.open("GET",m,c),"arraybuffer"==b&&(p?(n=!0,l.responseType=b):l.overrideMimeType("text/plain; charset=x-user-defined")),l.send();c||(l.readyState=4,h=e());return h}
function Qa(a,b){var c,d={Z:null,fa:null,xa:null,wa:null};if("["==b.charAt(0)||"{"==b.charAt(0))try{var e,f;if("<"==b.charAt(0))throw Error(b);var g=0>b.indexOf("0x")&&0>b.indexOf("0o")&&'["'!=b.substr(0,2)?JSON.parse(b.replace(/([a-z]+):/gm,'"$1":').replace(/\/\/[^\n]*/gm,"")):eval("("+b+")");d.xa=g.load;d.wa=g.exec;if(e=g.bytes)d.Z=e;else if(e=g.words)for(d.Z=Array(2*e.length),f=c=0;c<e.length;c++)d.Z[f++]=e[c]&255,d.Z[f++]=e[c]>>8&255;else if(e=g.longs)for(d.Z=Array(4*e.length),f=c=0;c<e.length;c++)d.Z[f++]=
e[c]&255,d.Z[f++]=e[c]>>8&255,d.Z[f++]=e[c]>>16&255,d.Z[f++]=e[c]>>24&255;else(e=g.data)?d.lk=e:d.Z=g;d.Z&&(d.Z.length?1==d.Z.length&&(z(d.Z[0]),d=null):(z("Empty resource: "+a),d=null));d.fa=g.symbols}catch(h){z("Resource data error ("+a+"): "+h.message),d=null}else{e=[];b=b.replace(/\n/gm," ").replace(/ +$/,"").split(" ");for(c=0;c<b.length;c++){f=parseInt(b[c],16);if(isNaN(f)){z("Resource data error ("+a+"): invalid hex byte ("+b[c]+")");break}e.push(f&255)}c==b.length&&(d.Z=e)}return d}
function Pa(){return window?window.location.protocol+"//"+window.location.host:"https://www.pcjs.org"}function Ra(){if(null==Sa){var a=!1;if(window)try{window.localStorage.setItem("PCjs.localStorage","PCjs.localStorage"),a="PCjs.localStorage"==window.localStorage.getItem("PCjs.localStorage"),window.localStorage.removeItem("PCjs.localStorage")}catch(b){a=!1}Sa=a}return Sa}function Ta(a){if(window)try{var b=window.localStorage.getItem(a)}catch(c){}return b}
function Ua(a,b){try{return window.localStorage.setItem(a,b),!0}catch(c){}return!1}function Va(a){if(window){var b=window?window.navigator.userAgent:"";return"iOS"==a&&!!b.match(/(iPod|iPhone|iPad)/)&&!!b.match(/AppleWebKit/)||"MSIE"==a&&!!b.match(/(MSIE|Trident)/)||0<=b.indexOf(a)}return!1}function Wa(){var a,b=Za("mobile");if(b)return"true"==b;if(Va("Mobi")){if(!a)return!0;(b="!"==a[0])&&(a=a.substr(1));return Va(a)!=b}return!1}
function Za(a){if(!db){var b,c={};if(window){b||(b=window.location.search.substr(1));for(var d,e=/\+/g,f=/([^&=]+)=?([^&]*)/g;d=f.exec(b);)c[decodeURIComponent(d[1].replace(e," "))]=decodeURIComponent(d[2].replace(e," "))}db=c}return db[a]||db[a.toLowerCase()]}function eb(a,b,c){function d(){--a;0<=a&&(b()||(a=0));0<a?setTimeout(d,0):c()}d()}
function fb(a,b){function c(){b(100===d)&&(e=setTimeout(c,d),d=100)}var d=0,e=null,f=!1;a.onmousedown=function(){f||e||(d=500,c())};a.ontouchstart=function(){e||(d=500,c())};a.onmouseup=a.onmouseout=function(){e&&(clearTimeout(e),e=null)};a.ontouchend=a.ontouchcancel=function(){e&&(clearTimeout(e),e=null);f=!0}}function gb(a,b){if(window){var c=window[a];window[a]="function"!==typeof c?b:function(){c&&c();b()}}}function hb(a){ib.init.push(a)}
function jb(a){z(a+"\n\nIf it happens again, please send the URL to support@pcjs.org. Thanks.")}function kb(a){if(lb)try{for(var b=0;b<a.length;b++)a[b]()}catch(c){jb("An unexpected error occurred: "+c.message)}}function mb(a){!lb&&a?(lb=!0,nb&&ob("init"),pb&&ob("show")):lb=a}function ob(a){ib[a]&&kb(ib[a])}var db=null,ib={init:[],show:[],exit:[]},nb=!1,pb=!1,lb=!0,Oa=!1,Sa=null;gb("onload",function(){nb=!0;kb(ib.init)});gb("onpageshow",function(){pb=!0;kb(ib.show)});
gb(Va("iOS")?"onpagehide":Va("Opera")?"onunload":"onbeforeunload",function(){kb(ib.exit)});
function A(a,b,c){this.type=a;b||(b={id:"",name:""});this.id=b.id||"";this.name=b.name;this.Pd=b.comment;this.qf=b;this.exports={};this.G=this.bindings={};a=this.id.indexOf(".");0>a?(this.eb="PCjs",this.Rc=this.id):(this.eb=this.id.substr(0,a),this.Rc=this.id.substr(a+1));this.flags={ready:!1,$a:!1,qd:!1,zk:!1,aa:!1,Cd:!1,error:!1};this.Gc=null;this.flags.error=!1;this.ga=c||0;this.D=this.f=this.C=this.I=null;qb.push(this)}function ub(a,b,c){vb[a]&&b&&(vb[a][b]=c)}
function wb(){return Date.now()||+new Date}function z(a){window&&window.alert(a)}function xb(a){var b=!1;window&&(b=window.confirm(a));return b}function yb(a,b){a.value+=b;b=a.value;8192<b.length&&(a.value=b.substr(b.length-4096));a.scrollTop=a.scrollHeight}
function zb(a,b){var c=B;b=D(b.parentNode,c+"-control");for(var d=0;d<b.length;d++)for(var e=b[d].childNodes,f=0;f<e.length;f++){var g=e[f];if(1===g.nodeType){var h=g.getAttribute("class");if(h)for(var m=h.split(" "),l=0;l<m.length;l++)switch(h=m[l],h){case c+"-binding":(h=Ab(g))&&void 0!==h.binding&&a.ta(h.type,h.binding,g,h.value),l=m.length}}}}function Bb(a){var b,c=[];a&&(a=0<(b=a.indexOf("."))?a.substr(0,b+1):"");for(b=0;b<qb.length;b++){var d=qb[b];a&&d.id.indexOf(a)||c.push(d)}return c}
function Hb(a){if(void 0!==a){var b;for(b=0;b<qb.length;b++)if(qb[b].id===a)return qb[b]}return null}function Ib(a,b){var c;if(void 0!==a){var d;b&&(b=0<(d=b.indexOf("."))?b.substr(0,d+1):"");for(d=0;d<qb.length;d++)if(c)c==qb[d]&&(c=null);else if(!(a!=qb[d].type||b&&qb[d].id.indexOf(b)))return qb[d]}return null}function Ab(a){var b=null;if(a=a.getAttribute("data-value"))try{b=eval("("+a+")")}catch(c){z(c.message+" ("+a+")")}return b}
function D(a,b,c){c&&(b+="-"+c+"-object");if(a.getElementsByClassName)return a.getElementsByClassName(b);var d;c=[];a=a.getElementsByTagName("*");var e=new RegExp("(^| )"+b+"( |$)");b=0;for(d=a.length;b<d;b++)e.test(a[b].className)&&c.push(a[b]);return c}
function Jb(a){for(var b=!0,c=Kb[a];c&&c.length;){var d=c.splice(0,1)[0],e=d[0],f=null;0<=Lb.indexOf(e)&&(f=function(){return function(){Jb(a)}}());var g=Mb[e];if(g)if(!f)b=g(d[1],d[2],d[3]);else{if(!g(f,d[1],d[2],d[3]))break}else{b=!1;var h=Ib(d[1],a);if(h)if(g=Nb[e])b=g(h,d[2],d[3]);else{var m=h.exports;if(m&&(g=m[e]))if(b=!0,!f)b=g.call(h,d[2],d[3]);else if(!g.call(h,f,d[2],d[3]))break}}if(!b){z("Script error: '"+e+"' command "+(g?" failed":" not recognized"));break}}c&&!c.length&&delete Kb[a];
return b}k=A.prototype;k.toString=function(){return this.name?this.name:this.id||this.type};
k.ta=function(a,b,c){switch(b){case "clear":return this.G[b]||(this.G[b]=c,c.onclick=function(d){return function(){d.G.print&&(d.G.print.value="")}}(this)),!0;case "print":return this.G[b]||(this.G[b]=c,this.S=function(d){this.v(d,this.type);return!0},c.value="",this.print=function(d){return function(e){yb(d,e)}}(c),this.v=function(d,e){return function(f,g){f||(f="");if(g!=Ob||"..."!=f.slice(-3))g&&(f=g+": "+f),yb(e,f+"\n");else{g=e.value;var h=g.lastIndexOf(f);g=0>h?g+(f+"\n"):g.substr(0,h)+(f+".")+
g.substr(h+f.length);8192<g.length&&(g=g.substr(g.length-4096));e.value=g;e.scrollTop=e.scrollHeight}}}(this,c)),!0;default:return!1}};k.log=function(){};k.print=function(){};k.v=function(){};k.status=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];this.v(this.type+": "+Da.apply(pa,[a].concat(c instanceof Array?c:ca(ba(c)))))};
k.S=function(a,b,c){if(!b){var d=Ib("Computer",this.id);if(d&&d.flags.Cd)return console.log("ignoring notice during unload: "+a),!1}c=c||this.type;b||z((c?c+": ":"")+a);return!0};function Pb(a,b){a.flags.error=!0;a.S(b)}function Qb(a){return a.flags.error?(a.v(a.toString()+" error"),!0):!1}function Rb(a,b){b&&(a.flags.ready?b():a.Gc=b);return a.flags.ready}function E(a,b){a.flags.error||(a.flags.ready=!1!==b,a.flags.ready&&(b=a.Gc,a.Gc=null,b&&b()))}
function Sb(a,b){a.flags.$a&&(b?a.flags.qd=!0:void 0===b&&a.v(a.toString()+" busy"));return a.flags.$a}function Tb(a,b){if(a.flags.qd)return a.flags.$a=!1,a.flags.qd=!1;if(a.flags.error)return a.v(a.toString()+" error"),!1;a.flags.$a=b;return a.flags.$a}k.Aa=function(){return this.flags.aa=!0};k.za=function(a,b){b&&(this.flags.aa=!1);return!0};
function F(a,b){b=void 0===b?0:b;if(a.D){b%2&&b--;b=b||a.ga;var c;if(!(c=-1==(b|1))){a=a.D.ga;c=Math.pow(2,32);var d=b/c|0;c=(a&b)==(b|0)&&((a/c|0)&d)==d}if(c)return!0}return!1}function G(a,b,c,d){a.D&&("boolean"==typeof c&&(c=c?-1:0),F(a,c)&&a.D.message(b,d))}var Ob="progress";window&&(window.PCjs||(window.PCjs={}),window.PCjs.Machines||(window.PCjs.Machines={}),window.PCjs.Components||(window.PCjs.Components=[]),window.PCjs.Commands||(window.PCjs.Commands={}));
var vb=window?window.PCjs.Machines:{},qb=window?window.PCjs.Components:[],Kb=window?window.PCjs.Commands:{},Lb=["hold","sleep","wait"],Mb={alert:function(a){z(a);return!0},sleep:function(a,b){setTimeout(a,+b);return!1}},Nb={select:function(a,b,c){var d=!1;if(a=a.bindings[b])for(b=0;b<a.options.length;b++)if(a.options[b].textContent==c){a.selectedIndex!=b&&(a.selectedIndex=b);d=!0;break}return d}};
Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){b=b||0;for(var c=this.length;b<c;b++)if(this[b]===a)return b;return-1});Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return e.apply(this instanceof c&&a?this:a,d.concat(Array.prototype.slice.call(arguments)))}function c(){}if("function"!=typeof this)throw new TypeError("Function.prototype.bind: non-callable object");var d=Array.prototype.slice.call(arguments,1),e=this;c.prototype=this.prototype;b.prototype=new c;return b});
var Ub="undefined"!==typeof ArrayBuffer,B="pdp11",Vb="PDPjs",Wb=!1,Xb=Ub,Yb=!0,Zb=!0,$b="UNKNOWN PANIC ABORT ILLEGAL RED YELLOW FAULT TRACE HALT OPCODE INTERRUPT".split(" "),ac={kd:5,od:144,Tc:8,Ac:{jf:15,Tj:16,ik:32,Ud:64,Ca:128,Yd:256,Xj:512,cj:1024,zc:2048,bj:4096,cd:57344,ja:{cd:13}},Xe:{ae:1,Ci:2,kf:3,Eb:28,yc:32,xc:64,Od:128,bk:256,Ce:512,Yb:1024,Oj:2048,Xd:4096,gk:8192,Mj:16384,De:32768,Yc:32736},Ve:{Xb:1,ua:14,Db:48,Cb:64,Wa:128,$j:256,ej:512,gj:1024,Le:2048,md:8192,Yc:16384,cb:32768,Eb:4608,
Zb:61438,Qa:3967,ja:{ua:1,Db:4}},We:{ld:15,ad:16,Vb:8160,nb:57344,ja:{ad:4,Vb:5,nb:13}},ua:{ye:0,ac:2,ob:4,pd:6,Dc:8,Pe:10,Ee:12,hk:14}},bc={kd:5,od:112,Tc:4,Oe:"DY",bf:{Ca:1,ua:14,Va:48,Cb:64,Wa:128,nb:768,Ld:15360,aj:16384,cb:32768,zi:16254,Wj:128,Zb:65535,Qa:1022,ja:{ua:1,Va:4,nb:8}},$e:{Qa:65534},cf:{lf:1,mf:4,nf:16,Uj:65408,Vd:63,Cc:64,$b:65408,He:3,nj:8,ja:{Cc:6,$b:7}},Bc:{Ke:{Aj:0,Zj:1,xi:2,Bj:3,Dc:4,Me:5,dk:6,Yj:7},Md:8,Je:16,kj:32,mj:64,Ie:128,lj:256,qj:512,sj:1024,pj:2048,oj:4096,tj:8192,
jj:16384,rj:32768},af:{Ya:63},Ld:{Lj:1024,$i:2048,ae:2048,vj:3072,Ce:4096,Xa:5120,Yb:8192,Dj:9216},ua:{Fj:0,pd:2,pf:4,Dc:6,Te:8,rf:10,Qe:12,Qj:14}},cc={kd:5,od:180,Tc:2,Oe:"DX",ef:{Xb:1,ua:14,nd:16,DONE:32,Cb:64,Za:128,INIT:16384,cb:32768,Eb:16128,Zb:32992,Qa:16479},Rj:{},hf:{Ya:127},gf:{Ya:31},ff:{Hd:1,Rd:2,cd:4,Wb:64,Ca:128},ua:{Vc:0,EMPTY:2,ac:4,ob:6,Eb:8,Se:10,Ec:12,Re:14},Ge:{Zc:8,$c:16,ti:24,Ne:32,hj:40,Vj:48,jd:56,Jj:72,Ij:80,Hj:88,Bi:96,vi:104,Gj:112,hd:120,Ai:128,ui:136}},ic={48:"DL11R",
52:"DL11X",56:"PC11R",60:"PC11X",64:"KW11",112:"RL11",144:"RK11",180:"RX11"};cc.df=["DX",77,1,26,128,1,0,0,128,0];ac.zc=["RK",203,2,12,512,0,0,0,512,ac.Ac.zc|ac.Ac.Yd|ac.Ac.Ud];bc.Ye=["RL",512,2,40,256,0,0,0,256,bc.Bc.Ke.Me|bc.Bc.Md|bc.Bc.Je];B="pdp11";Vb="PDPjs";Wb=!1;Xb=Ub;Zb=Yb=!0;
var jc={cpu:2,trap:4,fault:8,"int":16,bus:32,memory:64,mmu:128,rom:256,device:512,panel:1024,keyboard:2048,key:4096,pc11:8192,paper:16384,disk:32768,read:65536,write:131072,rk11:262144,rl11:524288,rx11:1048576,dl11:2097152,serial:4194304,kw11:8388608,timer:16777216,speaker:33554432,computer:67108864,warn:268435456,halt:536870912,buffer:1073741824};
function kc(a,b){A.call(this,"Panel",a,1024);this.u=this.w=0;this.K=b;this.da=this.i=this.Ta=this.yb=0;this.B=this.F=-1;this.g=this.A=!1;this.H=lc;this.j={};this.b={START:[1,1,!0,!1,this.Of],STEP:[1,1,!1,!1,this.Pf],ENABLE:[1,1,!1,!1,this.Jf],CONT:[1,1,!0,!1,this.Hf],DEP:[0,0,!0,!1,this.If],EXAM:[1,1,!0,!1,this.Kf],LOAD:[1,1,!0,!1,this.Mf],TEST:[0,0,!0,!1,this.Lf]};for(a=0;22>a;a++)this.b["S"+a]=[0,0,!1,!1,this.Nf,a];this.D=this.f=this.C=this.I=null;this.exports={hold:this.Cf,toggle:this.hh,reset:this.ah,
set:this.gh};E(this)}t(kc,A);function mc(a,b){return nc(a,a.yb=b)}k=kc.prototype;k.reset=function(a){this.stop();a&&mc(this,0)};
k.ta=function(a,b,c,d){if(this.I&&this.I.ta(a,b,c,d)||this.f&&this.f.ta(a,b,c,d)||this.D&&this.D.ta(a,b,c,d))return!0;switch(b){case "R0":case "R1":case "R2":case "R3":case "R4":case "R5":case "R6":case "R7":case "NF":case "ZF":case "VF":case "CF":case "PS":return this.G[b]=c,this.w++,!0;default:return"led"==a||"rled"==a?(this.G[b]=c,this.j[b]=d?1:0,this.w++,!0):"switch"==a?(void 0===this.b[b]&&(this.b[b]=[d?1:0,d?1:0]),this.G[b]=c,a=c.parentElement||c,a=a.parentElement||a,a.onmousedown=function(e,
f){return function(){oc(e,f)}}(this,b),a.onmouseup=a.onmouseout=function(e,f){return function(){pc(e,f)}}(this,b),a.ontouchstart=function(e,f){return function(g){oc(e,f);g.preventDefault()}}(this,b),a.ontouchend=function(e,f){return function(){pc(e,f)}}(this,b),!0):A.prototype.ta.call(this,a,b,c,d)}};k.ya=function(a,b,c,d){this.I=a;this.C=b;this.f=c;this.D=d;qc(b,this,rc);sc(b,this.reset.bind(this));tc(this);uc(this)};
k.Aa=function(a,b){if(!b)if(this.K&&vc(),!a)this.reset(!0);else if(!this.restore(a))return!1;return!0};k.za=function(a){return a?this.save():!0};k.save=function(){var a=new wc(this);a.set(0,[this.da,this.yb,this.Ta]);return a.data()};k.restore=function(a){if(a=a[0])xc(this,this.da=a[0]),mc(this,a[1]),yc(this,a[2]);return!0};k.ah=function(){for(var a in this.b){var b=this.b[a];b[1]=b[0]}uc(this);return!0};function zc(a,b,c){if(a=a.G[b])a.style.backgroundColor=c?"#ff0000":"#000000"}
function tc(a,b){for(var c in a.j)zc(a,c,null!=b?b:a.j[c])}function Ac(a,b,c){if(a=a.G[b])a.style.marginTop=c?"0px":"20px",a.style.backgroundColor=c?"#00ff00":"#228B22"}function uc(a){for(var b in a.b)Ac(a,b,a.b[b][1])}function Bc(a,b,c,d){if(a.G[b]){var e=a.D&&a.D.V||8;c=c||0;c=8==e?v(c,d):w(c,d);a.G[b].textContent!=c&&(a.G[b].textContent=c)}}k.Cf=function(a,b,c){if(oc(this,b)){if(c){var d=this;setTimeout(function(){pc(d,b);a&&a()},+c);return!1}pc(this,b)}return!0};
k.gh=function(a,b){if("SR"==a)return yc(this,qa(b,8));var c=this.b[a];return c?(c[1]=+b?1:0,Ac(this,a,c[1]),!0):!1};k.hh=function(a){return oc(this,a)?(pc(this,a),!0):!1};function oc(a,b){var c=a.b[b];return c?(Ac(a,b,c[1]=1-c[1]),c[3]=!0,c[4]&&c[4].call(a,c[1],c[5]),b==Cc&&(a.g=!1),!0):!1}function pc(a,b){var c=a.b[b];c&&(c[2]&&c[3]&&(Ac(a,b,c[1]=c[0]),c[4]&&c[4].call(a,c[1],c[5])),c[3]=!1)}
k.Of=function(a){a||this.f.flags.U||(Dc(this.f,this.da),a=this.f,a.C.reset(),Ec(a),this.b[Fc]&&this.b[Fc][1]&&Gc(this.f))};k.Pf=function(){};k.Jf=function(a){a||Hc(this.f)};k.Hf=function(a){if(!a&&!this.f.flags.U)if(this.b[Fc]&&this.b[Fc][1])Gc(this.f);else{if((a=this.D)&&!Sb(a,!0))Tb(a,!0),Ic(a,0,null),Tb(a,!1);else try{var b=this.f.uc(1);0<b&&(Jc(this.f,b),Kc(this.f,b,!0),Lc(this.f,b))}catch(c){"number"!=typeof c&&(b=c,Pb(this.f,b.stack||b.message))}this.stop();this.I&&Mc(this.I)}};
k.If=function(a){if(a&&!this.f.flags.U)if(this.g&&Nc(this),this.g=!0,a=mc(this,this.Ta),this.H==lc)Oc(this.C,this.da,a);else{var b=this.f,c=this.da;b.oa++;b.C.Ub(Pc(b,c,4),a);b.oa--}};k.Kf=function(a){a||this.f.flags.U||(this.g&&Nc(this),this.g=!0,a=this.H==lc?Qc(this.C,this.da):ad(this.f,this.da),mc(this,a))};k.Mf=function(a){a||this.f.flags.U||xc(this,this.Ta)};k.Lf=function(a){a?(this.A=!0,tc(this,!0)):(this.A=!1,tc(this),yc(this,0))};k.Nf=function(a,b){this.Ta=a?this.Ta|1<<b:this.Ta&~(1<<b)};
function Nc(a){var b=1140>=a.f.ha?8:16,c=65472<=a.da&&a.da<65472+b;b=c?1:2;c=c?15:a.C.H;a.b[bd]&&a.b[bd][1]||(b=-b);xc(a,a.da&~c|a.da+b&c)}function xc(a,b){a.da=b&a.C.H;if(a.B!==a.da){a.B=a.da;b=a.B;for(var c=0;22>c;c++)cd(a,"A"+c,b&1<<c)}}function nc(a,b){a.i=b&65535;if(a.F!==a.i){a.F=a.i;b=a.F;for(var c=0;16>c;c++)cd(a,"D"+c,b&1<<c)}return a.i}function cd(a,b,c){a.j[b]=c;a.A||zc(a,b,c)}function yc(a,b){a.Ta=b|0;for(b=0;22>b;b++)a.b["S"+b][1]=a.Ta&1<<b?1:0;uc(a);return!0}
k.stop=function(){xc(this,this.f.g[7])};k.Ad=function(a){this.da=a};k.setData=function(a,b){b?this.yb=a:this.i=a};k.Uf=function(a,b){return(b?this.yb:this.Ta)&65535};k.nh=function(a){this.yb=a};function vc(){for(var a=D(document,B,"panel"),b=0;b<a.length;b++){var c=a[b],d=Ab(c),e=Hb(d.id);e||(e=new kc(d,!0));zb(e,c)}}var lc=7,Fc="ENABLE",Cc="LOAD",bd="STEP",dd={},rc=(dd[65400]=[null,null,kc.prototype.Uf,kc.prototype.nh,"CNSW"],dd);hb(vc);
function ed(a,b,c){A.call(this,"Bus",a,32);this.f=b;this.D=c;this.T=+a.busWidth||16;this.L=1<<this.T;this.H=this.L-1;this.j=fd;this.g=Math.log2(this.j);this.P=this.j>>2;this.i=this.j-1;this.F=this.L/this.j|0;this.R=this.F-1;this.Ma=[];this.ka=0;this.B=!1;this.M=[];this.tf=[gd,hd,id,jd];this.b=this.u=[];this.A=this.K=this.w=this.N=this.O=0;a=new H(this);kd(a,this.D);this.b=Array(this.F);this.u=Array(this.F);for(b=0;b<this.F;b++)this.b[b]=this.u[b]=a;this.A=this.L-fd;ld(this,this.A,fd,md,this);this.O=
this.N=(this.A&this.H)>>>this.g;this.K=0;this.w=this.H;E(this)}t(ed,A);function nd(a,b){if(b!=a.K){for(var c=0;c<a.F;c++)a.u[c]=a.b[c];a.K=0;a.w=a.H;b&&(a.K=b,b=1<<b,a.w=b-1,b-=fd,a.O=(b&a.w)>>>a.g,a.u[a.O]=a.b[a.N])}}k=ed.prototype;k.reset=function(){for(var a=0;a<this.M.length;a++)this.M[a]();nd(this,16)};k.Aa=function(a,b){if(!b)if(!a)this.reset();else if(!this.restore(a))return!1;return!0};k.za=function(a){return a?this.save():!0};k.save=function(){var a=new wc(this);a.set(0,od(this));return a.data()};
k.restore=function(a){a:{a=a[0];var b;for(b=0;b<a.length-1;b+=2){var c=a[b],d=a[b+1];if(d&&d.length<this.P){var e=this.P,f=0;e=e?Array(e):[];for(var g=0;g<d.length-1;)for(var h=d[g++],m=d[g++];h--;)e[f++]=m;d=e}f=this.b[c];if(!f||!f.restore(d)){z("Unable to restore memory block "+c);a=!1;break a}}a=!0}return a};
function ld(a,b,c,d,e){for(var f=b,g=c,h=f>>>a.g;0<g&&h<a.b.length;){var m=a.b[h],l=h*a.j,n=a.j-(f-l);n>g&&(n=g);if(!e&&m&&m.size){if(m.type==d){if(f+g<=m.J)return m.Qb+=m.J-f,m.J=f,!0;if(f>=m.J+m.Qb){n=m.size-(f-l);n>g&&(n=g);m.Qb=f-m.J+n;f=l+a.j;g-=n;h++;continue}}return pd(qd,f,g)}f=new H(a,f,n,a.j,d,e);kd(f,a.D,m);a.b[h++]=f;f=l+a.j;g-=n}return 0>=g?(a.status("Added %dKb %s at %o",c>>10,rd[d],b),!0):pd(sd,b,c)}k.Fd=function(a){return this.u[(a&this.w)>>>this.g].xb(a&this.i,a)};
k.tc=function(a){var b=a&this.i,c=(a&this.w)>>>this.g;return Zb||b!=this.i?this.u[c].na(b,a):this.u[c++].xb(b,a)|this.u[c&this.R].xb(0,a+1)<<8};k.Gd=function(a,b){this.u[(a&this.w)>>>this.g].Ab(a&this.i,b,a)};k.Ub=function(a,b){var c=a&this.i,d=(a&this.w)>>>this.g;Zb||c!=this.i?this.u[d].Bb(c,b,a):(this.u[d++].Ab(c,b&255,a),this.u[d&this.R].Ab(0,b>>8&255,a+1))};function td(a,b){return a.b[(b&a.H)>>>a.g]}
function Qc(a,b){var c;a.B=!1;a.ka++;var d=b&a.i,e=td(a,b);Zb||d!=a.i?c=e.A(d,b):c=e.j(d,b)|td(a,b+1).j(0,b+1)<<8;a.ka--;return c}function ud(a,b,c){a.B=!1;a.ka++;td(a,b).D(b&a.i,c&255,b);a.ka--}function Oc(a,b,c){a.B=!1;a.ka++;var d=b&a.i,e=td(a,b);Zb||d!=a.i?e.B(d,c&65535,b):(e.D(d,c&255,b),td(a,b+1).D(0,c>>8&255,b+1));a.ka--}
function od(a){for(var b=0,c=[],d=0;d<a.F;d++){var e=a.b[d];if(e.ab||e.Af){c[b++]=d;var f=b++;if(e=e.save()){for(var g=0,h=0,m=[];g<e.length;){for(var l=e[g],n=g+1;n<e.length&&e[n]===l;)n++;m[h++]=n-g;m[h++]=l;g=n}m.length<e.length&&(e=m)}c[f]=e}}return c}function vd(a){for(var b=wd,c=0,d=0;d<a.b.length;d++){var e=a.b[d];e.type==b&&(c=e.J+e.Qb)}return c}
function xd(a,b,c,d,e,f,g,h,m){for(var l=b==c?-1:0;b<=c;b+=2){var n=b&yd;if(void 0!==a.Ma[n])return z("I/O address already registered: "+w(b,8,!0)),!1;var p=m||"unknown";p&&0<=l&&(p+=l++);a.Ma[n]=[d,e,f,g,p,h||32,!1]}return!0}
function qc(a,b,c,d){for(var e in c){var f=+e+(d||0),g=c[e];if(!(g[6]&&g[6]>a.f.ha)){var h=g[0]?g[0].bind(b):null,m=g[1]?g[1].bind(b):null,l=g[2]?g[2].bind(b):null,n=g[3]?g[3].bind(b):null;65472<=f&&65487>=f&&(!h&&l&&(h=function(u){return function(y){return u(y)&255}.bind(b)}(l)),!m&&n&&(m=function(u){return function(y,x){return u(y,x)}.bind(b)}(n)));for(var p=g[4],r=g[5]||1,q=0;q<r;q++,f+=2)if(p&&1<r&&(p=g[4]+q),!xd(a,f,f,h,m,l,n,g[7]||b.ga,p||b.Rc))return!1}}return!0}
function sc(a,b){a.M.push(b)}function zd(a,b,c,d){a.B=!0;a.ka||(a.D&&F(a.D,8)&&G(a.D,"memory fault ("+d+") on "+I(a.D,b),!0,!0),c&&(a.f.O|=c),J(a.f,4,0,b))}function Ad(a){var b=a.B;a.B=!1;return b}function pd(a,b,c){z("Memory block error ("+a+": "+w(b)+","+w(c)+")");return!1}var fd=8192,yd=fd-1,qd=1,sd=2;
function gd(a,b){var c=-1,d=this.controller,e=d.Ma[a],f=b&65535;e?e[0]?c=e[0](f):e[2]&&(c=f&1?e[2](f&-2)>>8:e[2](f)&255):f&1&&(e=d.Ma[a&-2])&&(e[2]?c=e[2](f&-2)>>8:e[0]&&(c=e[0](f)));if(0<=c)return this.f&&F(this.f,32|e[5])&&G(this.f,e[4]+".readByte("+I(this.f,b)+"): "+I(this.f,c),!0,!d.ka),c;zd(d,b,16,3);c=255;this.f&&F(this.f,32)&&G(this.f,"warning: unconverted read access to byte @"+I(this.f,b)+": "+I(this.f,c),!0,!d.ka);return c}
function hd(a,b,c){var d=!1,e=this.controller,f=e.Ma[a],g=c&65535;if(f)if(f[1])f[1](b,g),d=!0;else{if(f[3]){a=f[2]?f[2](g,!0):0;if(g&1)f[3](a&255|b<<8,g&-2);else f[3](a&-256|b,g);d=!0}}else g&1&&(f=e.Ma[a&-2])&&(f[3]?(g&=-2,a=f[2]?f[2](g,!0):0,f[3](a&255|b<<8,g),d=!0):f[1]&&(f[1](b,g),d=!0));d?this.f&&F(this.f,32|f[5])&&G(this.f,f[4]+".writeByte("+I(this.f,c)+","+I(this.f,b)+")",!0,!e.ka):(zd(e,c,16,5),this.f&&F(this.f,32)&&G(this.f,"warning: unconverted write access to byte @"+I(this.f,c)+": "+I(this.f,
b),!0,!e.ka))}function id(a,b){var c=-1,d=this.controller;a=d.Ma[a];var e=b&65535;a&&(a[2]?c=a[2](e):a[0]&&(c=a[0](e)|a[0](e+1)<<8));if(0<=c)return this.f&&F(this.f,32|a[5])&&G(this.f,a[4]+".readWord("+I(this.f,b)+"): "+I(this.f,c),!0,!d.ka),c;zd(d,b,16,2);c=65535;this.f&&F(this.f,32)&&G(this.f,"warning: unconverted read access to word @"+I(this.f,b)+": "+I(this.f,c),!0,!d.ka);return c}
function jd(a,b,c){var d=!1,e=this.controller;a=e.Ma[a];var f=c&65535;a&&(a[3]?(a[3](b,f),d=!0):a[1]&&(a[1](b&255,f),a[1](b>>8,f+1),d=!0));d?this.f&&F(this.f,32|a[5])&&G(this.f,a[4]+".writeWord("+I(this.f,c)+","+I(this.f,b)+")",!0,!e.ka):(zd(e,c,16,4),this.f&&F(this.f,32)&&G(this.f,"warning: unconverted write access to word @"+I(this.f,c)+": "+I(this.f,b),!0,!e.ka))}function K(a){A.call(this,"Device",a,512);this.b={bb:128,Bd:-1}}t(K,A);k=K.prototype;
k.ya=function(a,b,c,d){this.C=b;this.I=a;this.f=c;this.D=d;var e=this;this.b.Bd=Bd(c,function(){e.b.bb|=128;e.b.bb&64&&Cd(e.f,e.b.Na);e.I&&Mc(e.I,1);Dd(e.f,e.b.Bd,1E3/60)});this.b.Na=Ed(c,64,6,8388608);qc(b,this,Fd);sc(b,this.reset.bind(this));d&&Gd(d,128,function(f){var g=e.f;Hd(e,"KIPDR",g.A[0],0,f[0]);Hd(e,"KDPDR",g.A[0],8,f[0]);Hd(e,"KIPAR",g.L[0],0,f[0]);Hd(e,"KDPAR",g.L[0],8,f[0],!0);Hd(e,"SIPDR",g.A[1],0,f[0]);Hd(e,"SDPDR",g.A[1],8,f[0]);Hd(e,"SIPAR",g.L[1],0,f[0]);Hd(e,"SDPAR",g.L[1],8,f[0],
!0);Hd(e,"UIPDR",g.A[3],0,f[0]);Hd(e,"UDPDR",g.A[3],8,f[0]);Hd(e,"UIPAR",g.L[3],0,f[0]);Hd(e,"UDPAR",g.L[3],8,f[0],!0);g.W&32&&Hd(e,"UNIMAP",g.Ea,-1,f[0])});E(this)};function Hd(a,b,c,d,e,f){a=a.D;if(!(e&&0>b.indexOf(e.toUpperCase()))){e=0;var g=8,h="",m=!1,l=8;0>d&&(e=22,g=c.length,d=0,m=!0,l=4);for(var n=0;n<g;n++)0==n%l&&(h&&(h+="\n"),h+=b+(m?"["+ua(n,2)+"]":"")+":"),h+=" "+I(a,c[d+n],e);a.v(h+(f?"\n":""))}}k.Aa=function(a,b){if(!b)if(!a)this.reset();else if(!this.restore(a))return!1;return!0};
k.za=function(a){return a?this.save():!0};k.reset=function(){this.b.bb=128;Dd(this.f,this.b.Bd,1E3/60,!0)};k.save=function(){var a=new wc(this);a.set(0,[this.b.bb]);return a.data()};k.restore=function(a){a=ba(a[0]);this.b.bb=a.next().value;return!0};k.ag=function(){return this.b.bb};k.uh=function(a){this.b.bb=a&192;this.b.bb&64||Id(this.f,this.b.Na)};k.cg=function(){return Jd(this.f)};k.wh=function(a){Kd(this.f,a&-129|this.f.R&128)};k.dg=function(){return Ld(this.f)};k.eg=function(){return Md(this.f)};
k.fg=function(){return this.f.W};k.xh=function(a){Nd(this.f,a)};k.Rg=function(a){a=a>>1&63;var b=this.f.Ea[a>>1];return a&1?b>>16:b&65535};k.ii=function(a,b){b=b>>1&63;var c=b>>1;this.f.Ea[c]=b&1?this.f.Ea[c]&65535|(a&63)<<16:this.f.Ea[c]&-65536|a&65534};k.Kg=function(a){return this.f.A[1][a>>1&7]};k.bi=function(a,b){this.f.A[1][b>>1&7]=a&65295};k.Ig=function(a){return this.f.A[1][(a>>1&7)+8]};k.$h=function(a,b){this.f.A[1][(b>>1&7)+8]=a&65295};k.Jg=function(a){return this.f.L[1][a>>1&7]};
k.ai=function(a,b){b=b>>1&7;this.f.L[1][b]=a;this.f.A[1][b]&=65295};k.Hg=function(a){return this.f.L[1][(a>>1&7)+8]};k.Zh=function(a,b){b=(b>>1&7)+8;this.f.L[1][b]=a;this.f.A[1][b]&=65295};k.$f=function(a){return this.f.A[0][a>>1&7]};k.th=function(a,b){this.f.A[0][b>>1&7]=a&65295};k.Yf=function(a){return this.f.A[0][(a>>1&7)+8]};k.rh=function(a,b){this.f.A[0][(b>>1&7)+8]=a&65295};k.Zf=function(a){return this.f.L[0][a>>1&7]};k.sh=function(a,b){b=b>>1&7;this.f.L[0][b]=a;this.f.A[0][b]&=65295};
k.Xf=function(a){return this.f.L[0][(a>>1&7)+8]};k.qh=function(a,b){b=(b>>1&7)+8;this.f.L[0][b]=a;this.f.A[0][b]&=65295};k.Qg=function(a){return this.f.A[3][a>>1&7]};k.hi=function(a,b){this.f.A[3][b>>1&7]=a&65295};k.Og=function(a){return this.f.A[3][(a>>1&7)+8]};k.fi=function(a,b){this.f.A[3][(b>>1&7)+8]=a&65295};k.Pg=function(a){return this.f.L[3][a>>1&7]};k.gi=function(a,b){b=b>>1&7;this.f.L[3][b]=a;this.f.A[3][b]&=65295};k.Ng=function(a){return this.f.L[3][(a>>1&7)+8]};
k.ei=function(a,b){b=(b>>1&7)+8;this.f.L[3][b]=a;this.f.A[3][b]&=65295};k.Ob=function(a){a&=7;return this.f.w&2048?this.f.ra[a]:this.f.g[a]};k.Sb=function(a,b){b&=7;this.f.w&2048?this.f.ra[b]=a:this.f.g[b]=a};k.mg=function(){return this.f.w&49152?this.f.X[0]:this.f.g[6]};k.Eh=function(a){this.f.w&49152?this.f.X[0]=a:this.f.g[6]=a};k.pg=function(){return this.f.g[7]};k.Hh=function(a){this.f.g[7]=a};k.Pb=function(a){a&=7;return this.f.w&2048?this.f.g[a]:this.f.ra[a]};
k.Tb=function(a,b){b&=7;this.f.w&2048?this.f.g[b]=a:this.f.ra[b]=a};k.ng=function(){return 1==(this.f.w&49152)>>14?this.f.g[6]:this.f.X[1]};k.Fh=function(a){1==(this.f.w&49152)>>14?this.f.g[6]=a:this.f.X[1]=a};k.og=function(){return 3==(this.f.w&49152)>>14?this.f.g[6]:this.f.X[3]};k.Gh=function(a){3==(this.f.w&49152)>>14?this.f.g[6]=a:this.f.X[3]=a};k.Wf=function(a){return this.f.qc[a-65504>>1]};k.ph=function(a,b){this.f.qc[b-65504>>1]=a};k.re=function(a){return 65520==a?(vd(this.C)>>6)-1:0};
k.we=function(){};k.Mg=function(){return 1};k.di=function(){};k.Vf=function(){return this.f.O};k.oh=function(){this.f.O=0};k.bg=function(){return this.f.nc};k.vh=function(a,b){b&1||(a&=255);this.f.nc=a};k.gg=function(a,b){return b?0:this.f.kb};k.yh=function(a){Od(this.f,a)};k.Lg=function(a,b){return b?0:this.f.Da&65280};k.ci=function(a){this.f.Da=a|255};k.lg=function(){return Pd(this.f)};k.Dh=function(a){Zd(this.f,a)};k.ve=function(a,b){F(this)&&G(this,"writeIgnored("+v(b)+"): "+v(a),!0,!0)};
var L={},Fd=(L[61568]=[null,null,K.prototype.Rg,K.prototype.ii,"UNIMAP",64,1170],L[62592]=[null,null,K.prototype.Kg,K.prototype.bi,"SIPDR",8,1145,128],L[62608]=[null,null,K.prototype.Ig,K.prototype.$h,"SDPDR",8,1145,128],L[62624]=[null,null,K.prototype.Jg,K.prototype.ai,"SIPAR",8,1145,128],L[62640]=[null,null,K.prototype.Hg,K.prototype.Zh,"SDPAR",8,1145,128],L[62656]=[null,null,K.prototype.$f,K.prototype.th,"KIPDR",8,1140,128],L[62672]=[null,null,K.prototype.Yf,K.prototype.rh,"KDPDR",8,1145,128],
L[62688]=[null,null,K.prototype.Zf,K.prototype.sh,"KIPAR",8,1140,128],L[62704]=[null,null,K.prototype.Xf,K.prototype.qh,"KDPAR",8,1145,128],L[62798]=[null,null,K.prototype.fg,K.prototype.xh,"MMR3",1,1145,128],L[65382]=[null,null,K.prototype.ag,K.prototype.uh,"LKS"],L[65402]=[null,null,K.prototype.cg,K.prototype.wh,"MMR0",1,1140,128],L[65404]=[null,null,K.prototype.dg,K.prototype.ve,"MMR1",1,1145,128],L[65406]=[null,null,K.prototype.eg,K.prototype.ve,"MMR2",1,1140,128],L[65408]=[null,null,K.prototype.Qg,
K.prototype.hi,"UIPDR",8,1140,128],L[65424]=[null,null,K.prototype.Og,K.prototype.fi,"UDPDR",8,1145,128],L[65440]=[null,null,K.prototype.Pg,K.prototype.gi,"UIPAR",8,1140,128],L[65456]=[null,null,K.prototype.Ng,K.prototype.ei,"UDPAR",8,1145,128],L[65472]=[null,null,K.prototype.Ob,K.prototype.Sb,"R0SET0"],L[65473]=[null,null,K.prototype.Ob,K.prototype.Sb,"R1SET0"],L[65474]=[null,null,K.prototype.Ob,K.prototype.Sb,"R2SET0"],L[65475]=[null,null,K.prototype.Ob,K.prototype.Sb,"R3SET0"],L[65476]=[null,null,
K.prototype.Ob,K.prototype.Sb,"R4SET0"],L[65477]=[null,null,K.prototype.Ob,K.prototype.Sb,"R5SET0"],L[65478]=[null,null,K.prototype.mg,K.prototype.Eh,"R6KERNEL"],L[65479]=[null,null,K.prototype.pg,K.prototype.Hh,"R7KERNEL"],L[65480]=[null,null,K.prototype.Pb,K.prototype.Tb,"R0SET1",1,1145],L[65481]=[null,null,K.prototype.Pb,K.prototype.Tb,"R1SET1",1,1145],L[65482]=[null,null,K.prototype.Pb,K.prototype.Tb,"R2SET1",1,1145],L[65483]=[null,null,K.prototype.Pb,K.prototype.Tb,"R3SET1",1,1145],L[65484]=
[null,null,K.prototype.Pb,K.prototype.Tb,"R4SET1",1,1145],L[65485]=[null,null,K.prototype.Pb,K.prototype.Tb,"R5SET1",1,1145],L[65486]=[null,null,K.prototype.ng,K.prototype.Fh,"R6SUPER",1,1145],L[65487]=[null,null,K.prototype.og,K.prototype.Gh,"R6USER",1,1145],L[65504]=[null,null,K.prototype.Wf,K.prototype.ph,"CTRL",8,1170],L[65520]=[null,null,K.prototype.re,K.prototype.we,"LSIZE",1,1170],L[65522]=[null,null,K.prototype.re,K.prototype.we,"HSIZE",1,1170],L[65524]=[null,null,K.prototype.Mg,K.prototype.di,
"SYSID",1,1170],L[65526]=[null,null,K.prototype.Vf,K.prototype.oh,"ERR",1,1170],L[65528]=[null,null,K.prototype.bg,K.prototype.vh,"MBR",1,1170],L[65530]=[null,null,K.prototype.gg,K.prototype.yh,"PIR"],L[65532]=[null,null,K.prototype.Lg,K.prototype.ci,"SLR"],L[65534]=[null,null,K.prototype.lg,K.prototype.Dh,"PSW"],L);
hb(function(){for(var a=D(document,B,"device"),b=0;b<a.length;b++){var c=a[b];var d=Ab(c);switch(d.type){case "default":d=new K(d);zb(d,c);break;case "pc11":d=new $d(d);zb(d,c);break;case "rl11":d=new ae(d);zb(d,c);break;case "rk11":d=new M(d);zb(d,c);break;case "rx11":d=new be(d),zb(d,c)}}});
function H(a,b,c,d,e,f){this.C=a;this.id=ce+=2;this.b=null;this.J=b;this.Qb=c;this.size=d||0;this.type=e||de;this.I=e==ee;this.f=this.controller=null;this.xb=this.j=this.wd;this.na=this.A=this.xd;this.Ab=this.D=this.Rb;this.Bb=this.B=this.Pc;this.G=this.i=0;kd(this);this.ab=this.Af=!1;if(this.size)if(f)this.controller=f,a=[null,0],this.b=a[0],fe(this,f.tf);else if(Ub)this.u=new ArrayBuffer(this.size),this.w=new DataView(this.u,0,this.size),this.g=new Uint8Array(this.u,0,this.size),this.F=new Uint16Array(this.u,
0,this.size>>1),this.b=new Int32Array(this.u,0,this.size>>2),fe(this,ge?he:ie);else{a=this.b=Array(this.size>>2);for(f=0;f<a.length;f++)a[f]=0;fe(this,je)}else fe(this)}k=H.prototype;k.save=function(){var a;if(this.controller)var b=null;else if(Ub)for(b=Array(this.size>>2),a=0;a<b.length;a++)b[a]=this.w.getInt32(a<<2,!0);else b=this.b;return b};
k.restore=function(a){if(this.controller)return null==a;if(a&&this.size==a.length<<2){var b;if(Ub)for(b=0;b<a.length;b++)this.w.setInt32(b<<2,a[b],!0);else this.b=a;return this.ab=!0}return!1};function fe(a,b){b||(b=ke);le(a,b,void 0);me(a,b,void 0)}function le(a,b,c){c&&a.G||(a.xb=b[0]||a.wd,a.na=b[2]||a.xd);if(c||void 0===c)a.j=b[0]||a.wd,a.A=b[2]||a.xd}function me(a,b,c){c&&a.i||(a.Ab=!a.I&&b[1]||a.Rb,a.Bb=!a.I&&b[3]||a.Pc);if(c||void 0===c)a.D=b[1]||a.Rb,a.B=b[3]||a.Pc}
k.vb=function(a,b){b?0===this.i++&&me(this,ne,!1):0===this.G++&&le(this,ne,!1)};function oe(a,b){b?0===--a.i&&(a.Ab=a.I?a.Rb:a.D,a.Bb=a.I?a.Pc:a.B):0===--a.G&&(a.xb=a.j,a.na=a.A)}function kd(a,b,c){a.f=b;a.G=a.i=0;c&&((a.G=c.G)&&le(a,ne,!1),(a.i=c.i)&&me(a,ne,!1))}k.wd=function(a,b){this.f&&F(this.f,64)&&G(this.f,"attempt to read invalid address "+I(this.f,b),!0);zd(this.C,b,32,2);return 255};
k.Rb=function(a,b,c){this.f&&F(this.f,64)&&G(this.f,"attempt to write "+I(this.f,b)+" to invalid addresses "+I(this.f,c),!0);zd(this.C,c,32,4)};k.xd=function(a,b){return this.xb(a++,b++)|this.xb(a,b)<<8};k.Pc=function(a,b,c){this.Ab(a++,b&255,c++);this.Ab(a,b>>8,c)};k.Tf=function(a){return this.b[a>>2]>>>((a&3)<<3)&255};k.Xg=function(a,b){Yb&&a&1&&zd(this.C,b,64,2);b=a>>2;a=(a&3)<<3;var c=this.b[b]>>a;return 24>a?c&65535:c&255|(this.b[b+1]&255)<<8};
k.mh=function(a,b){var c=a>>2;a=(a&3)<<3;this.b[c]=this.b[c]&~(255<<a)|b<<a;this.ab=!0};k.mi=function(a,b,c){Yb&&a&1&&zd(this.C,c,64,4);c=a>>2;a=(a&3)<<3;24>a?this.b[c]=this.b[c]&~(65535<<a)|b<<a:(this.b[c]=this.b[c]&16777215|b<<24,c++,this.b[c]=this.b[c]&-256|b>>8);this.ab=!0};k.Rf=function(a,b){this.f&&null!=this.J&&pe(this.f,this.J+a);return this.j(a,b)};k.Tg=function(a,b){this.f&&null!=this.J&&pe(this.f,this.J+a,2);return this.A(a,b)};
k.kh=function(a,b,c){this.f&&null!=this.J&&qe(this.f,this.J+a);this.I?this.Rb(a,b,c):this.D(a,b,c)};k.ki=function(a,b,c){this.f&&null!=this.J&&qe(this.f,this.J+a,2);this.I?this.Rb(a,b,c):this.B(a,b,c)};k.Qf=function(a){return this.g[a]};k.Sf=function(a,b){a=this.g[a];this.f&&F(this.f,64)&&G(this.f,"Memory.readByte("+I(this.f,b)+"): "+I(this.f,a),!0);return a};k.Sg=function(a,b){Yb&&a&1&&zd(this.C,b,64,2);return this.w.getUint16(a,!0)};
k.Wg=function(a,b){Yb&&a&1&&zd(this.C,b,64,2);a=!Zb&&a&1?this.g[a]|this.g[a+1]<<8:this.F[a>>1];this.f&&F(this.f,64)&&G(this.f,"Memory.readWord("+I(this.f,b)+"): "+I(this.f,a),!0);return a};k.jh=function(a,b){this.g[a]=b;this.ab=!0};k.lh=function(a,b,c){this.g[a]=b;this.ab=!0;this.f&&F(this.f,64)&&G(this.f,"Memory.writeByte("+I(this.f,c)+","+I(this.f,b)+")",!0)};k.ji=function(a,b,c){Yb&&a&1&&zd(this.C,c,64,4);this.w.setUint16(a,b,!0);this.ab=!0};
k.li=function(a,b,c){Yb&&a&1&&zd(this.C,c,64,4);!Zb&&a&1?(this.g[a]=b,this.g[a+1]=b>>8):this.F[a>>1]=b;this.ab=!0;this.f&&F(this.f,64)&&G(this.f,"Memory.writeWord("+I(this.f,c)+","+I(this.f,b)+")",!0)};var de=0,wd=1,ee=2,md=4,rd=["NONE","RAM","ROM","VID","H/W"],ce=0,ke=[],je=[H.prototype.Tf,H.prototype.mh,H.prototype.Xg,H.prototype.mi],ne=[H.prototype.Rf,H.prototype.kh,H.prototype.Tg,H.prototype.ki];
if(Ub)var ie=[H.prototype.Qf,H.prototype.jh,H.prototype.Sg,H.prototype.ji],he=[H.prototype.Sf,H.prototype.lh,H.prototype.Wg,H.prototype.li];var re;if(Ub){var se=new ArrayBuffer(2);(new DataView(se)).setUint16(0,256,!0);re=256===(new Uint16Array(se))[0]}else re=!1;var ge=re;
function te(a,b){A.call(this,"CPU",a,2);b=+a.cycles||b;var c=+a.multiplier||1;this.Uc=0;this.Sc=b;this.ib=c;this.ed=Math.round(this.Sc/1E4)/100;this.rb=this.ed*this.ib;this.fd=this.jc=this.ub=this.rc=0;this.flags.U=this.flags.Lc=!1;this.flags.pa=a.autoStart;"string"==typeof this.flags.pa&&(this.flags.pa="true"==this.flags.pa);this.flags.Hb=!1;this.hc=this.Ib=0;this.ic=+a.csStart;this.Gb=+a.csInterval;this.Kb=+a.csStop;this.ea=[];this.Td=this.bh.bind(this);this.jb=this.Ha=this.hb=this.b=this.ia=this.Ga=
this.gc=this.gb=this.Lb=this.gd=this.qb=0;this.qa=null;E(this)}t(te,A);k=te.prototype;k.ya=function(a,b,c,d){this.I=a;this.C=b;this.D=d;this.qa=a.i;for(a=0;a<ue.length;a++)(b=this.G[ue[a]])&&this.I.ta("",ue[a],b);E(this)};k.reset=function(){};k.save=function(){return null};k.restore=function(){return!1};
k.Aa=function(a,b){var c=ve(this.I,"autoStart");null!=c?this.flags.pa="true"==c?!0:"false"==c?!1:!!c:null==this.flags.pa&&(this.flags.pa=!this.D&&void 0===this.G.run);if(!b){if(a){we(this);if(!this.restore(a))return!1;xe(this)}else this.reset();this.D?(a=this.D,b=this.flags.pa,a.Ea=!0,a.v("Type ? for help with PDPjs Debugger commands"),ye(a),b||ze(a),a.va&&(b=a.va,a.va=null,Ae(a,b))):this.status("No debugger detected");this.flags.pa||this.v("CPU will not be auto-started "+(this.qa?"(click Run to start)":
"(type 'go' to start)"))}return!0};k.za=function(a){return a?this.save():!0};k.pa=function(){return this.flags.U?!0:this.flags.pa?Gc(this):!1};k.ke=function(){return 0};function xe(a){void 0===a.ic&&(a.ic=0);void 0===a.Gb&&(a.Gb=-1);void 0===a.Kb&&(a.Kb=-1);a.flags.Hb=0<=a.ic&&0<a.Gb;a.flags.Hb&&(a.hc=0,a.Ib=a.ic-a.jb)}
function Lc(a,b){if(a.flags.Hb){var c=!1;a.hc=a.hc+a.ke()|0;a.Ib-=b;0>=a.Ib&&(a.Ib+=a.Gb,c=!0);0<=a.Kb&&a.Kb<=Be(a)&&(a.Gb=a.Kb=-1,xe(a),Hc(a),c=!0);c&&a.v(Be(a)+" cycles: checksum="+w(a.hc))}}
k.ta=function(a,b,c){var d=this;switch(b){case "power":case "reset":return this.G[b]=c,!0;case "run":return this.G[b]=c,c.onclick=function(){var e;if(e=d.I)if(e=d.I,e.flags.aa)e=!0;else{var f=null,g,h=Bb(e.id);for(g=0;g<h.length&&(f=h[g],f===e||f.flags.ready);g++);if(g==h.length)for(g=0;g<h.length&&(f=h[g],f===e||f.flags.aa);g++);g==h.length&&(f=e);z("The "+f.type+" component ("+f.id+") is not "+(f.flags.ready?"powered yet":"ready yet"+(f.Gc?" (waiting for notification)":""))+".");e=!1}e&&(d.flags.U?
Hc(d):Gc(d))},!0;case "speed":return this.G[b]=c,!0;case "setSpeed":return this.G[b]=c,c.onclick=function(){Ce(d,d.ib<<1,!0)},c.textContent=this.rb.toFixed(2)+"Mhz",!0}return!1};function Kc(a,b,c){a.jb+=b;c&&(a.hb=a.b=a.ia=0)}function De(a,b){var c=1;b&&1<a.ib&&a.qb&&(c=a.qb/a.ed);a.fd=Math.round(1E3/Ee);a.jc=Math.floor(a.Sc/Ee*c);b||(a.ub=a.jc);a.rc=0}function Be(a){return a.jb+a.Ha+a.hb-a.b}function we(a){a.qb=0;a.gd=0;a.jb=a.Ha=a.hb=a.b=a.ia=0;xe(a);Ce(a,1)}
function Ce(a,b,c){var d=!1;if(void 0!==b){.8>a.qb/a.rb?b=1:d=!0;a.ib=b;b=a.ed*a.ib;if(a.rb!=b){a.rb=b;b=a.rb.toFixed(2)+"Mhz";var e=a.G.setSpeed;e&&(e.textContent=b);a.v("target speed: "+b)}c&&a.I&&Fe(a.I)}Kc(a,a.Ha);a.Ha=0;a.Ga=wb();a.gb=0;De(a);return d}function Bd(a,b){var c=a.ea.length;a.ea.push([-1,b]);return c}function Dd(a,b,c,d){0<=b&&b<a.ea.length&&(d||0>a.ea[b][0])&&(c=a.Sc*a.ib/1E3*c|0,a.flags.U&&(c+=Ge(a)),a.ea[b][0]=c)}
function He(a,b){for(var c=a.ea.length-1;0<=c;c--){var d=a.ea[c];0>d[0]||b>d[0]&&(b=d[0])}return b}function Ie(a){for(var b=[],c=0;c<a.ea.length;c++)b.push(a.ea[c][0]);return b}function Jc(a,b){for(var c=a.ea.length-1;0<=c;c--){var d=a.ea[c];0>d[0]||(d[0]-=b,0>=d[0]&&(d[0]=-1,d[1]()))}}function Ge(a,b){var c=a.hb-=a.b;a.b=a.ia=0;b&&(a.hb=0);return c}
k.bh=function(){if(this.flags.U){this.rc>=this.Sc&&De(this,!0);this.Lb=0;this.gc=wb();if(this.gb){var a=this.gc-this.gb;a>this.fd&&(this.Ga+=a,this.Ga>this.gc&&(this.Ga=this.gc))}try{do{var b=He(this,this.flags.Hb?1:this.jc);try{this.uc(b)}catch(e){if("number"!=typeof e)throw e;}b=Ge(this,!0);this.Lb+=b;this.Ha+=b;Lc(this,b);Jc(this,b);this.ub-=b;if(0>=this.ub){this.ub+=this.jc;++this.gd>=Je&&(this.I&&Mc(this.I,void 0),this.gd=0);break}}while(this.flags.U)}catch(e){Hc(this);this.I&&this.I.stop(wb(),
Be(this));Pb(this,e.stack||e.message);return}if(this.flags.U){a=setTimeout;b=this.Td;this.gb=wb();var c=this.fd;this.Lb&&(c=Math.round(c*this.Lb/this.jc));c-=this.gb-this.gc;var d=this.gb-this.Ga;d&&(this.qb=Math.round(this.Ha/(10*d))/100,864E5<=d&&(this.jb=0,Ce(this)));if(0>c||this.qb<this.rb)-1E3>c&&(this.Ga-=c),c=0;this.rc+=this.Lb;this.gb+=c;a(b,c)}}};
function Gc(a,b){if(Qb(a))return!1;if(a.flags.U)return a.v(a.toString()+" busy"),!1;Ce(a);a.flags.U=!0;a.flags.Lc=!0;var c=a.G.run;c&&(c.textContent="Halt");a.I&&(b&&Fe(a.I,!0),a.I.start(a.Ga,Be(a)));a.D||a.status("Started");setTimeout(a.Td,0);return!0}k.uc=function(){return 0};function Hc(a,b){var c=!1;if(a.flags.U){Ge(a);Kc(a,a.Ha);a.Ha=0;a.flags.U=!1;if(c=a.G.run)c.textContent="Run";a.I&&a.I.stop(wb(),Be(a));c=!0;a.D||a.status("Stopped")}a.flags.complete=b;return c}
var Ee=30,Je=15,ue=["power","reset"];
function Ke(a){var b=+a.model||1170;te.call(this,a,6666667);this.ha=b;this.Nc=+a.addrReset||0;this.Ia=this.w=this.M=this.B=this.F=this.K=this.H=0;this.g=this.ra=this.X=[];this.L=this.A=this.Ea=this.qc=[];this.Pa=this.N=this.Nd=this.sb=this.tb=this.mb=this.fb=this.O=this.nc=this.kb=this.Da=this.R=this.oc=this.pc=this.W=this.i=0;this.Qd=[4,2,0,1];this.sc=0;this.Sd=255;1120>=this.ha?(this.Wd=Le.bind(this),this.Fb=this.xf,this.sc=8,this.Sd=-1,this.$d=255,this.Zd=0):(this.Wd=Me.bind(this),this.Fb=this.yf,
this.$d=~(1792|(1140>=this.ha?2048:0))&65535,this.Zd=1140<this.ha?2048:0);this.wc=this.vc=this.oa=0;this.P=null;this.fc=[];this.cc=this.Wc=this.je;this.dc=this.Xc=this.ne;this.Mc=this.bd=this.te;this.ec=this.dd=this.ue;this.Fa=this.pb=this.kc=this.mc=0;this.va=this.me;this.na=this.yd;this.Bb=this.Dd;this.u=this.j=this.Qc=this.T=this.Y=0;this.flags.complete=!1}t(Ke,te);k=Ke.prototype;
k.ya=function(a,b,c,d){te.prototype.ya.call(this,a,b,c,d);this.Wc=b.Fd.bind(b);this.Xc=b.tc.bind(b);this.bd=b.Gd.bind(b);this.dd=b.Ub.bind(b)};k.Aa=function(a,b){for(var c=192,d=0;d<this.fc.length;d++){var e=this.fc[d];0>e.zb&&(e.zb=c,c+=4)}return te.prototype.Aa.call(this,a,b)};
k.reset=function(){this.status("Model %d",this.ha);this.flags.U&&Hc(this);this.B=65536;this.F=32768;this.K=65535;this.H=32768;this.w=15;this.g=[0,0,0,0,0,0,0,this.Nc,-1,-2,-3,-4,-5,-6,-7,-8];this.ra=[0,0,0,0,0,0];this.X=[0,0,0,0];this.L=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];this.A=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[65535,65535,65535,65535,65535,65535,65535,65535,65535,
65535,65535,65535,65535,65535,65535,65535],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]];this.Ea=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.qc=[0,0,0,0,0,0,0,0];this.M=0;this.Ia=-1;this.u=this.j=this.Qc=this.T=this.Y=this.i=this.nc=0;Ec(this);we(this);this.flags.error=!1;te.prototype.reset.call(this)};function Ec(a){a.R=0;a.oc=0;a.pc=0;a.W=0;a.O=0;a.kb=0;a.Da=255;a.sb=0;a.tb=0;a.mb=0;a.fb=262143;a.Pa=a.g[7];a.N=0;a.P=null;a.C&&(Ne(a),a.Nd=vd(a.C))}
function Ne(a){a.cc=a.Wc;a.dc=a.Xc;a.Mc=a.bd;a.ec=a.dd;a.kc&&(a.cc=a.je,a.dc=a.ne);a.mc&&(a.Mc=a.te,a.ec=a.ue);a.sb?(a.Fa=65536,a.pb=a.W&16?4186112:253952,a.va=a.me,a.na=a.kc?a.Vg:a.yd,a.Bb=a.mc?a.oi:a.Dd,nd(a.C,a.W&16?22:18)):(a.Fa=0,a.pb=57344,a.va=a.Bf,a.na=a.kc?a.Ug:a.se,a.Bb=a.mc?a.ni:a.xe,nd(a.C,16))}function Jd(a){var b=a.R;b&57344||(b=b&-3199|a.tb<<5|a.mb<<1);return b}
function Kd(a,b){b&=-3073;if(a.R!=b){b&57344&&!(a.R&57344)&&(a.oc=a.N>>16&65535,a.pc=a.N&65535);a.R=b;a.tb=(b&96)>>5;a.mb=(b&30)>>1;var c=0;b&257&&(c=4,b&1&&(c|=2));a.sb!=c&&(a.sb=c,Ne(a))}}function Ld(a){a.R&57344||(a.oc=a.N>>16&65535);a=a.oc;a&65280&&(a=(a<<8|a>>8)&65535);return a}function Md(a){a.R&57344||(a.pc=a.N&65535);return a.pc}function Nd(a,b){1170>a.ha&&(b&=-49);a.W!=b&&(a.W=b,a.fb=b&16?4194303:262143,Ne(a))}
function Oe(a,b,c,d){a.Nc=b;Dc(a,b);Zd(a,0);a.C.reset();Ec(a);if(c){a.g[0]=d||0;for(b=1;5>=b;b++)a.g[b]=0;a.g[6]=1024;a.flags.aa?a.flags.U||Gc(a):a.flags.pa=!0}else a.D&&a.flags.aa?Hc(a)||a.I.flags.reset||(ye(a.D),Mc(a.I,-1)):!1===c&&Hc(a);!a.flags.U&&a.qa&&a.qa.stop()}k.ke=function(){return 0};
k.save=function(){var a=new wc(this);a.set(0,[this.g,this.ra,this.X,this.L,this.A,this.Ea,this.qc,this.O,this.nc,this.kb,this.Da,this.tb,this.mb,this.Pa,this.i,this.N,this.Ia,this.vc,this.wc,this.Nc]);a.set(1,[Pd(this),Jd(this),Ld(this),Md(this),this.W]);a.set(2,[this.jb,this.ib,this.flags.pa]);a.set(3,Pe(this));a.set(4,Ie(this));return a.data()};
k.restore=function(a){var b=ba(a[0]);this.g=b.next().value;this.ra=b.next().value;this.X=b.next().value;this.L=b.next().value;this.A=b.next().value;this.Ea=b.next().value;this.qc=b.next().value;this.O=b.next().value;this.nc=b.next().value;this.kb=b.next().value;this.Da=b.next().value;this.tb=b.next().value;this.mb=b.next().value;this.Pa=b.next().value;this.i=b.next().value;this.N=b.next().value;this.Ia=b.next().value;this.vc=b.next().value;this.wc=b.next().value;this.Nc=b.next().value;b=a[1];Zd(this,
b[0]);Kd(this,b[1]);this.oc=b[2];this.pc=b[3];Nd(this,b[4]);b=a[2];this.jb=b[0];Ce(this,b[1]);this.flags.pa=b[2];b=a[3];for(var c=b.length-1;0<=c;c--){var d;a:{for(d=0;d<this.fc.length;d++){var e=this.fc[d];if(e.zb===b[c]){d=e;break a}}d=null}d&&(d.next=this.P,this.P=d)}a=a[4];for(b=0;b<this.ea.length&&b<a.length;b++)this.ea[b][0]=a[b];return!0};function Qe(a){return a.B&65536?1:0}function Re(a){return a.F&32768?2:0}function Se(a){return a.K&65535?0:4}function Te(a){return a.H&32768?8:0}
function Ue(a,b){var c=a.g[7];a.g[7]=c+b&65535;return c}function Ve(a,b,c){c&&(Dc(a,a.g[7]+(b<<24>>23)),a.b-=2);a.b-=3}function Dc(a,b){a.g[7]=b&65535}function Ed(a,b,c,d){b={zb:b,priority:c,message:d||0,name:ic[b],next:null};a.fc.push(b);return b}function We(a,b){var c=a.P;if(c==b)a.P=b.next;else for(;c;){var d=c.next;if(d==b){c.next=d.next;break}c=d}a.P&&(a.i|=1)}
function Cd(a,b){if(b){if(b!=a.P){var c=a.P;if(!c||c.priority<=b.priority)b.next=c,a.P=b;else{do{var d=c.next;if(!d||d.priority<=b.priority){b.next=d;c.next=b;break}c=d}while(c)}}a.i|=1;b.message&&F(a,b.message|16)&&G(a,"setIRQ(vector="+v(b.zb)+",priority="+b.priority+")",!0,!0)}}function Id(a,b){b&&(We(a,b),b.message&&F(a,b.message|16)&&G(a,"clearIRQ(vector="+v(b.zb)+",priority="+b.priority+")",!0,!0))}function Pe(a){var b=[];for(a=a.P;a;)b.push(a.zb),a=a.next;return b}
function Xe(a){return a.i&64?(J(a,168,64,-6),!0):a.i&32?(J(a,4,32,-5),!0):a.i&16?(J(a,12,16,-7),!0):!1}function Pd(a){return a.w=a.w&63728|Te(a)|Se(a)|Re(a)|Qe(a)}function Zd(a,b){b&=a.$d;a.H=b<<12;a.K=~b&4;a.F=b<<14;a.B=b<<16;if((b^a.w)&a.Zd)for(var c=a.ra.length;0<=--c;){var d=a.g[c];a.g[c]=a.ra[c];a.ra[c]=d}a.M=b>>14&3;c=a.w>>14&3;a.M!=c&&(a.X[c]=a.g[6],a.g[6]=a.X[a.M]);a.w=b;a.i&=-3;a.i|=a.P?2:1}function Od(a,b){if(b&=65024){var c=b>>9;do b+=34;while(c>>=1);a.i|=1}a.kb=b}
k.Ba=function(a){this.H=this.K=a;this.F=0};k.lb=function(a,b){this.H=this.K=this.B=a;this.F=b||0};function Ye(a,b){a.H=a.K=a.B=b;a.F=a.H^a.B>>1}function Ze(a,b,c,d){a.H=a.K=a.B=b;a.F=(c^d)&(d^b)}
function J(a,b,c,d){if(!a.oa){0>a.Ia?a.Ia=Pd(a):a.M||(d=-4);-4==d&&(a.i&256&&(d=-1),a.i|=256,a.O|=4,a.g[6]=b=4);if(-1!=d){a.N=b|4143316992;a.M=0;var e=a.na(b|a.Fa),f=a.na(b+2&65535|a.Fa);Zd(a,f&-12289|a.Ia>>2&12288);$e(a,a.Ia);$e(a,a.g[7]);Dc(a,e)}a.b-=5;a.i&=~(c|19);a.i|=129;a.Ia=-1;a.vc=d;a.wc=b;-1==d&&Hc(a);if(-4<=d)throw b;}}function af(a){var b=bf(a),c=bf(a);a.w&49152&&(c=c&-225|a.w&63712);Dc(a,b);Zd(a,c);a.i&=-17}
function cf(a,b){var c=b>>13&31;31>c&&(b=a.W&32?a.Ea[c]+(b&8191)&4194303:b&-3932161);return b}function df(a,b,c){var d=[];if(c){c=cf(a,b);var e=b>>13&31;d.push(c);d.push(e);a.W&32&&(d.push(a.Ea[e]),d.push(b&8191))}else if(a.sb){e=a.M<<1;var f=b>>13;7<f&&(e|=1);a.W&a.Qd[a.M]||(f&=7);b&=8191;var g=a.L[a.M][f]<<6;c=g+b&a.fb;3932160<=c&&(c=cf(a,c));d.push(c);d.push(b);d.push(e);d.push(f&7);d.push(g);d.push(a.fb)}else c=b&65535,57344<=c&&(c|=a.pb),d.push(c);return d}
function Pc(a,b,c){if(!(c&a.sb)){var d=b&65535;57344<=d&&(d|=a.pb);return d}var e=b>>13;a.W&a.Qd[a.M]||(e&=7);var f=a.A[a.M][e];d=(a.L[a.M][e]<<6)+(b&8191)&a.fb;3932160<=d&&(d=cf(a,d));if(a.oa)return d;d>=a.Nd&&d<a.pb?(a.O|=32,J(a,4,0,d)):d&1&&!(c&1)&&(a.O|=64,J(a,4,0,d));var g=0;switch(f&7){case 1:g=4096;case 2:f|=128;c&4&&(g=8192);break;case 4:g=4096;case 5:c&4&&(g=4096);case 6:f|=c&4?192:128;break;default:g=32768}32512!=(f&32520)&&(f&8?f&32512&&(b&8128)<(f>>2&8128)&&(g|=16384):(b&8128)>(f>>2&8128)&&
(g|=16384));a.A[a.M][e]=f;if(d!=(4194170&a.fb)||a.M)a.tb=a.M,a.mb=e;g&&(g&57344&&(0<=a.Ia&&(g|=128),a.R&57344||(g|=a.R&4096|a.tb<<5|a.mb<<1,Kd(a,a.R&-61695|g&61694)),J(a,168,64,-2)),a.R&61440||!(d<(4191360&a.fb)||d>(4194239&a.fb))||(a.R|=4096,a.R&512&&(a.i|=64)));return d}function bf(a){var b=a.na(a.g[6]|a.Fa);a.g[6]=a.g[6]+2&65535;return b}function $e(a,b){var c=a.g[6]-2&65535;a.g[6]=c;a.N=a.N&65535|(a.N&-65536)<<8|16121856;a.i&256||a.Fb(4,-2,c);a.Bb(c,b)}
function ef(a,b,c,d){var e=d&8?0:a.Fa;switch(b){case 0:return J(a,4,0,-3),0;case 1:return 6==c&&a.Fb(d,0,a.g[6]),a.b-=3,7==c?a.g[c]:a.g[c]|e;case 2:var f=2;var g=a.g[c];6==c&&a.Fb(d,f,g);7!=c&&(g|=e,6>c&&d&1&&(f=1));a.b-=3;break;case 3:f=2;g=a.g[c];7!=c&&(g|=e);g=a.na(g);g|=e;a.b-=7;break;case 4:f=-2;6>c&&d&1&&(f=-1);g=a.g[c]+f&65535;6==c&&a.Fb(d,f,g);7!=c&&(g|=e);a.b-=4;break;case 5:f=-2;g=a.g[c]-2&65535;7!=c&&(g|=e);g=a.na(g)|e;a.b-=8;break;case 6:return g=a.na(Ue(a,2)),g=g+a.g[c]&65535,6==c&&a.Fb(d,
0,g),a.b-=6,g|e;case 7:return g=a.na(Ue(a,2)),g=g+a.g[c]&65535,g=a.na(g|a.Fa),a.b-=10,g|e}a.g[c]=a.g[c]+f&65535;a.N=a.N&65535|(a.N&-65536)<<8|(f<<3&248|c)<<16;return g}k.xf=function(a,b,c){!this.M&&0>=b&&c<=this.Da&&(this.i|=32)};k.yf=function(a,b,c){this.M||(65534<=c&&(c|=-65536),a&4&&c<=this.Da&&(c<=this.Da-32?J(this,4,0,-4):(this.O|=8,this.i|=32)))};k.je=function(a){this.D&&pe(this.D,a,1);return this.Wc(a)};k.ne=function(a){this.D&&pe(this.D,a,2);return this.Xc(a)};
k.te=function(a,b){this.D&&qe(this.D,a,1);this.bd(a,b)};k.ue=function(a,b){this.D&&qe(this.D,a,2);this.dd(a,b)};function ad(a,b){a.oa++;b=a.C.tc(Pc(a,b,2));a.oa--;return b}function ff(a,b){(b?--a.mc:--a.kc)||Ne(a)}k.Bf=function(a,b,c){return ef(this,a,b,c)};k.me=function(a,b,c){return Pc(this,ef(this,a,b,c),c)};k.se=function(a){return this.C.tc(this.Pa=a)};k.Ug=function(a){this.D&&pe(this.D,a,2);return this.se(a)};k.yd=function(a){return this.C.tc(this.Pa=Pc(this,a,2))};
k.Vg=function(a){this.D&&pe(this.D,a,2);return this.yd(a)};k.xe=function(a,b){this.C.Ub(this.Pa=a,b)};k.ni=function(a,b){this.D&&qe(this.D,a,2);this.xe(a,b)};k.Dd=function(a,b){this.C.Ub(this.Pa=Pc(this,a,4),b)};k.oi=function(a,b){this.D&&qe(this.D,a,2);this.Dd(a,b)};function gf(a,b,c){var d=a.j=b&7;(b=a.u=(b&56)>>3)?(d=ef(a,b,d,2),c&65536||61440!==(a.w&61440)&&(d&=65535),a.M=a.w>>12&3,c=a.na(d|c&a.Fa),a.M=a.w>>14&3):c=6!=d||(a.w>>2&12288)===(a.w&12288)?a.g[d]:a.X[a.w>>12&3];return c}
function hf(a,b,c,d){a.N=a.N&65535|1441792;var e=a.j=b&7;(b=a.u=(b&56)>>3)?(e=ef(a,b,e,4),c&65536||(e&=65535),a.M=a.w>>12&3,e=Pc(a,e|c&65536,4),a.M=a.w>>14&3,a.ec(e,d)):6!=e||(a.w>>2&12288)===(a.w&12288)?a.g[e]=d:a.X[a.w>>12&3]=d}function Af(a,b){b>>=6;var c=a.Y=b&7;return(b=a.T=(b&56)>>3)?a.cc(a.va(b,c,3)):a.g[c+a.sc]&a.Sd}function Bf(a,b){var c;b>>=6;var d=a.Y=b&7;(b=a.T=(b&56)>>3)?c=a.dc(a.va(b,d,2)):c=a.g[d+a.sc];return c}function Cf(a,b){var c=a.j=b&7;b=a.u=(b&56)>>3;return ef(a,b,c,8)}
function Df(a,b){var c=a.j=b&7;return(b=a.u=(b&56)>>3)?a.cc(a.va(b,c,3)):a.g[c]&255}function Ef(a,b){var c,d=a.j=b&7;(b=a.u=(b&56)>>3)?c=a.dc(a.va(b,d,2)):c=a.g[d];return c}function Ff(a,b,c,d){var e=a.j=b&7;(b=a.u=(b&56)>>3)?(e=a.Qc=a.va(b,e,7),c=0>c?a.g[-c-1]&255:c,a.Mc(e,d.call(a,c,a.cc(e))),e&1&&a.b--):(b=a.g[e],c=0>c?a.g[-c-1]&255:c,a.g[e]=b&65280|d.call(a,c,b&255))}
function N(a,b,c,d){var e=a.j=b&7;(b=a.u=(b&56)>>3)?(e=a.va(b,e,6),a.ec(e,d.call(a,0>c?a.g[-c-1]:c,a.dc(e)))):a.g[e]=d.call(a,0>c?a.g[-c-1]:c,a.g[e])}function Gf(a,b,c,d,e){var f=a.j=b&7;(b=a.u=(b&56)>>3)?(d=a.va(b,f,5),e.call(a,(c=0>c?a.g[-c-1]&255:c)<<8),a.Mc(d,c),d&1&&a.b--):(c?(c=0>c?a.g[-c-1]&255:c,a.g[f]=a.g[f]&~d|c<<24>>24&d):a.g[f]&=~d,e.call(a,c<<8))}
function Hf(a,b,c,d){var e=a.j=b&7;(b=a.u=(b&56)>>3)?(e=a.va(b,e,4),d.call(a,c=0>c?a.g[-c-1]:c),a.ec(e,c)):(a.g[e]=c=0>c?a.g[-c-1]:c,d.call(a,c))}
k.uc=function(a){this.flags.complete=!0;var b=this.D?If(this.D)?1:this.flags.Lc?-1:0:0,c=a?this.flags.Lc?0:1:-1;this.flags.Lc=!1;this.hb=this.b=a;this.i=this.i&-5|(b?4:0);do{if(this.i){if(this.i&4){if(Jf(this.D,this.g[7],c)){Hc(this);break}++b||(this.i&=-5);c||c++}if(a=this.i&11)if(a=!1,this.i&2){var d=160,e=(this.kb&224)>>5,f=this.P&&this.P.priority>e?this.P:null;f&&(d=f.zb,e=f.priority);e>(this.w&224)>>5?(this.i&8&&(Ue(this,2),this.i&=-9),J(this,d,0,-10),e=!0):e=!1;e&&(f&&We(this,f),a=!0);this.P||
this.kb||(this.i&=-3)}else this.i&1&&this.i++;if(a){if(this.i&4&&Jf(this.D,this.g[7],c)){Hc(this);break}if(0>c)break}if(this.i&112&&Xe(this)){if(this.i&4&&Jf(this.D,this.g[7],c)){Hc(this);break}if(0>c)break}}this.i=this.i&15|this.w&16;a=this.N=this.g[7];f=this.na(a);this.g[7]=a+2&65535;this.Wd(f)}while(0<this.b);return this.flags.complete?this.hb-this.b:!1===this.flags.complete?-1:0};hb(function(){for(var a=D(document,B,"cpu"),b=0;b<a.length;b++){var c=a[b],d=Ab(c);d=new Ke(d);zb(d,c)}});
function Kf(a,b){var c=b+a;this.H=this.K=this.B=c;this.F=(a^c)&(b^c);return c&65535}function Lf(a,b){var c=b+a,d=c<<8;this.H=this.K=this.B=d;this.F=(a<<8^d)&(b<<8^d);return c&255}function Mf(a,b){a=b<<1;Ye(this,a);return a&65535}function Nf(a,b){a=b<<1;Ye(this,a<<8);return a&255}function Of(a,b){a=b&32768|b>>1|b<<16;Ye(this,a);return a&65535}function Pf(a,b){a=b&128|b>>1|b<<8;Ye(this,a<<8);return a&255}function Qf(a,b){a=b&~a;this.Ba(a);return a}function Rf(a,b){a=b&~a;this.Ba(a<<8);return a}
function Sf(a,b){a|=b;this.Ba(a);return a}function Tf(a,b){a|=b;this.Ba(a<<8);return a}function Uf(a,b){a=~b|65536;this.lb(a);return a&65535}function Vf(a,b){a=~b|256;this.lb(a<<8);return a&255}function Wf(a,b){this.H=this.K=a=b-a;this.F=b&(b^a);return a&65535}function Xf(a,b){a=b-a;var c=a<<8;b<<=8;this.H=this.K=c;this.F=b&(b^c);return a&255}function Yf(a,b){this.H=this.K=a=b+a;this.F=a&(b^a);return a&65535}function Zf(a,b){a=b+a;var c=a<<8;this.H=this.K=c;this.F=c&(b<<8^c);return a&255}
function $f(a,b){a=-b;this.lb(a,a&b&32768);return a&65535}function ag(a,b){a=-b;this.lb(a<<8,(a&b&128)<<8);return a&255}function bg(a,b){a=b<<1|this.B>>16&1;Ye(this,a);return a&65535}function cg(a,b){a=b<<1|this.B>>16&1;Ye(this,a<<8);return a&255}function dg(a,b){a=(this.B&65536|b)>>1|b<<16;Ye(this,a);return a&65535}function eg(a,b){a=((this.B&65536)>>8|b)>>1|b<<8;Ye(this,a<<8);return a&255}function fg(a,b){var c=b-a;Ze(this,c,a,b);return c&65535}
function gg(a,b){var c=b-a;Ze(this,c<<8,a<<8,b<<8);return c&255}function hg(a,b){this.H=this.K=b&65280;this.F=this.B=0;return(b<<8|b>>8)&65535}function ig(a,b){a^=b;this.Ba(a);return a&65535}function jg(a){N(this,a,Bf(this,a),Kf);this.b-=this.u?9+(this.Y&&6<=this.j?1:0):(this.T?5:3)+(7==this.j?2:0)}
function kg(a){var b=Ef(this,a);a=a>>6&7;var c=this.g[a];c&32768&&(c|=4294901760);this.B=this.F=0;b&=63;if(b&32)b=64-b,16<b&&(b=16),this.B=c<<17-b,c>>=b;else if(b)if(16<b)this.F=c,c=0;else{this.B=c<<=b;var d=c>>15&65535;d&&65535!==d&&(this.F=32768)}this.g[a]=c&65535;this.H=this.K=c;this.b-=(this.u?6:7)+b}
function lg(a){var b=Ef(this,a);a=a>>6&7;var c=this.g[a]<<16|this.g[a|1];this.B=this.F=0;b&=63;if(b&32){b=64-b;32<b&&(b=32);var d=c>>b-1;this.B=d<<16;d>>=1;c&2147483648&&(d|=4294967295<<32-b)}else b?(d=c<<b-1,this.B=d>>15,d<<=1,32<b&&(b=32),(c>>=32-b)&&4294967295!==(c|4294967295<<b&4294967295)&&(this.F=32768)):d=c;this.g[a]=d>>16&65535;this.g[a|1]=d&65535;this.H=d>>16;this.K=d>>16|d;this.b-=(this.u?6:7)+b}function mg(a){Ve(this,a,!Qe(this))}function ng(a){Ve(this,a,Qe(this))}
function og(a){N(this,a,Bf(this,a),Qf);this.b-=this.u?9+(this.Y&&6<=this.j?1:0):(this.T?5:3)+(7==this.j?2:0)}function pg(a){Ff(this,a,Af(this,a),Rf);this.b-=this.u?9+(this.Y&&6<=this.j?1:0):(this.T?5:3)+(7==this.j?2:0)}function qg(a){N(this,a,Bf(this,a),Sf);this.b-=this.u?9+(this.Y&&6<=this.j?1:0):(this.T?5:3)+(7==this.j?2:0)}function rg(a){Ff(this,a,Af(this,a),Tf);this.b-=this.u?9+(this.Y&&6<=this.j?1:0):(this.T?5:3)+(7==this.j?2:0)}
function sg(a){var b=Bf(this,a);a=Ef(this,a);this.Ba((0>b?this.g[-b-1]:b)&a);this.b-=this.u?4+(this.Y&&6<=this.j?1:0):(this.T?4:3)+(7==this.j?2:0)}function tg(a){var b=Af(this,a);a=Df(this,a);this.Ba(((0>b?this.g[-b-1]&255:b)&a)<<8);this.b-=this.u?4+(this.Y&&6<=this.j?1:0):(this.T?4:3)+(7==this.j?2:0)}function ug(a){Ve(this,a,Se(this))}function vg(a){Ve(this,a,!Te(this)==!Re(this))}function wg(a){Ve(this,a,!Se(this)&&!Te(this)==!Re(this))}function xg(a){Ve(this,a,!Qe(this)&&!Se(this))}
function yg(a){Ve(this,a,Se(this)||!Te(this)!=!Re(this))}function zg(a){Ve(this,a,Qe(this)||Se(this))}function Ag(a){Ve(this,a,!Te(this)!=!Re(this))}function Bg(a){Ve(this,a,Te(this))}function Cg(a){Ve(this,a,!Se(this))}function Dg(a){Ve(this,a,!Te(this))}function Eg(){J(this,12,0,-9)}function Fg(a){Ve(this,a,!0)}function Gg(a){Ve(this,a,!Re(this))}function Hg(a){Ve(this,a,Re(this))}function Ig(a){a&1&&(this.B=0);a&2&&(this.F=0);a&4&&(this.K=1);a&8&&(this.H=0);this.b-=5}
function Jg(a){var b=Bf(this,a);a=Ef(this,a);var c=(b=0>b?this.g[-b-1]:b)-a;Ze(this,c,a,b);this.b-=this.u?4+(this.Y&&6<=this.j?1:0):(this.T?4:3)+(7==this.j?2:0)}function Kg(a){var b=Af(this,a);a=Df(this,a);var c=(b=(0>b?this.g[-b-1]&255:b)<<8)-(a<<=8);Ze(this,c,a,b);this.b-=this.u?4+(this.Y&&6<=this.j?1:0):(this.T?4:3)+(7==this.j?2:0)}
function Lg(a){var b=Ef(this,a);if(b){a=a>>6&7;var c=this.g[a]<<16|this.g[a|1];this.B=this.F=0;b&32768&&(b|=-65536);var d=~~(c/b);-32768<=d&&32767>=d?(this.g[a]=d&65535,this.g[a|1]=c-d*b&65535,this.K=d>>16|d,this.H=d>>16):(this.F=32768,this.K=d>>15|d,this.H=c>>16,-1===b&&65534===this.g[a]&&(this.g[a]=this.g[a|1]=1));this.b-=53}else this.K=this.H=0,this.F=32768,this.B=65536,this.b-=7}function Mg(){J(this,24,0,-9);this.b-=20}
function Ng(){this.w&49152?(this.O|=128,J(this,4,0,-8)):(this.qa&&1120==this.ha&&this.qa.setData(this.g[0],!0),this.D?Og(this.D):Hc(this));this.b-=7}function Pg(){J(this,16,0,-9);this.b-=20}var Qg=[0,7,7,10,7,11,9,13];function Rg(a){this.ia=this.b;Dc(this,Cf(this,a));this.b=this.ia-Qg[this.u]}var Sg=[0,14,14,17,14,18,16,20];function Tg(a){this.ia=this.b;var b=Cf(this,a);a=a>>6&7;$e(this,this.g[a]);this.g[a]=this.g[7];Dc(this,b);this.b=this.ia-Sg[this.u]}
var Ug=[3,9,9,13,10,14,12,16,4,9,9,13,10,14,13,17];function Vg(a){var b=Bf(this,a);this.ia=this.b;Hf(this,a,b,this.Ba);this.b=this.ia-Ug[(this.T?8:0)+this.u]+(7!=this.j||this.u?0:2)}function Wg(a){var b=Af(this,a);Gf(this,a,b,65535,this.Ba);this.b-=this.u?9+(this.Y&&6<=this.j?1:0):(this.T?5:3)+(7==this.j?2:0)}var Xg=[7,13,13,17,14,18,17,21];
function Yg(a){var b=Ef(this,a);a=a>>6&7;b=(b<<16>>16)*(this.g[a]<<16>>16);this.g[a]=b>>16&65535;this.g[a|1]=b&65535;b|=0;this.H=b>>16;this.K=this.H|b;this.F=0;this.B=-32768>b||32767<b?65536:0;this.b-=23}function Zg(){this.b-=5}function $g(){this.w&49152||(this.C.reset(),Ec(this),this.qa&&this.qa.setData(this.g[0],!0));this.b-=667}function ah(a){if(a&8)P.call(this,a);else{var b=bf(this);a&=7;7==a?Dc(this,b):(Dc(this,this.g[a]),this.g[a]=b);this.b-=9}}function bh(){af(this);this.b-=13}
function ch(a){a&1&&(this.B=65536);a&2&&(this.F=32768);a&4&&(this.K=0);a&8&&(this.H=32768);this.b-=5}function dh(a){var b=(a&448)>>6;if(this.g[b]=this.g[b]-1&65535)Dc(this,this.g[7]-((a&63)<<1)),this.b+=1;this.b-=6}function eh(a){N(this,a,Bf(this,a),fg);this.b-=this.u?9+(this.Y&&6<=this.j?1:0):(this.T?5:3)+(7==this.j?2:0)}function fh(a){N(this,a,0,hg);this.b-=this.u?9:3+(7==this.j?2:0)}function gh(){J(this,28,0,-9)}
function hh(){this.qa&&(this.qa.Ad(this.g[7],!0),this.qa.setData(this.g[0],!0));this.i|=8;Ue(this,-2);this.b-=3}function ih(a){N(this,a,this.g[(a>>6&7)+this.sc],ig);this.b-=this.u?9:3+(7==this.j?2:0)}function P(a){var b;if(b=this.D)b=this.D,F(b,2)?(G(b,"undefined opcode "+I(b,a),!0,!0),b=Og(b)):b=!1;b||J(this,8,0,-9)}function Le(a){jh[a>>12].call(this,a)}function kh(a){lh[a>>6&3].call(this,a)}function mh(a){nh[a>>6&3].call(this,a)}function oh(a){ph[a>>6&3].call(this,a)}
function qh(a){rh[a&15].call(this,a)}function sh(a){th[a&15].call(this,a)}function uh(a){vh[a>>6&3].call(this,a)}function wh(a){xh[a>>6&3].call(this,a)}function yh(a){zh[a>>6&3].call(this,a)}
var jh=[function(a){Ah[a>>8&15].call(this,a)},Vg,Jg,sg,og,qg,jg,P,function(a){Bh[a>>8&15].call(this,a)},Wg,Kg,tg,pg,rg,eh,P],Ah=[function(a){Ch[a>>4&15].call(this,a)},Fg,Cg,ug,vg,Ag,wg,yg,Tg,Tg,kh,mh,oh,P,P,P],lh=[function(a){Hf(this,a,0,this.lb);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){N(this,a,0,Uf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){N(this,a,1,Yf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){N(this,a,1,Wf);this.b-=this.u?9:3+(7==this.j?2:0)}],nh=[function(a){N(this,a,0,$f);
this.b-=this.u?11:6},function(a){N(this,a,Qe(this)?1:0,Kf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){N(this,a,Qe(this)?1:0,fg);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){a=Ef(this,a);this.lb(a);this.b-=this.u?4:3+(7==this.j?2:0)}],ph=[function(a){N(this,a,0,dg);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){N(this,a,0,bg);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){N(this,a,0,Of);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){N(this,a,0,Mf);this.b-=this.u?9:3+(7==this.j?2:0)}],Ch=
[function(a){Dh[a&15].call(this,a)},P,P,P,Rg,Rg,Rg,Rg,ah,P,qh,sh,fh,fh,fh,fh],Dh=[Ng,hh,bh,Eg,Pg,$g,P,P,P,P,P,P,P,P,P,P],rh=[Zg,function(){this.B=0;this.b-=5},function(){this.F=0;this.b-=5},Ig,function(){this.K=1;this.b-=5},Ig,Ig,Ig,function(){this.H=0;this.b-=5},Ig,Ig,Ig,Ig,Ig,Ig,Ig],th=[Zg,function(){this.B=65536;this.b-=5},function(){this.F=32768;this.b-=5},ch,function(){this.K=0;this.b-=5},ch,ch,ch,function(){this.H=32768;this.b-=5},ch,ch,ch,ch,ch,ch,ch],Bh=[Dg,Bg,xg,zg,Gg,Hg,mg,ng,Mg,gh,uh,wh,
yh,P,P,P],vh=[function(a){Gf(this,a,0,255,this.lb);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){Ff(this,a,0,Vf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){Ff(this,a,1,Zf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){Ff(this,a,1,Xf);this.b-=this.u?9:3+(7==this.j?2:0)}],xh=[function(a){Ff(this,a,0,ag);this.b-=this.u?11:6},function(a){Ff(this,a,Qe(this)?1:0,Lf);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){Ff(this,a,Qe(this)?1:0,gg);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){a=Df(this,
a);this.lb(a<<8);this.b-=this.u?4:3+(7==this.j?2:0)}],zh=[function(a){Ff(this,a,0,eg);this.b-=this.u?9+(this.Qc&1):3+(7==this.j?2:0)},function(a){Ff(this,a,0,cg);this.b-=this.u?9:3+(7==this.j?2:0)},function(a){Ff(this,a,0,Pf);this.b-=this.u?9+(this.Qc&1):3+(7==this.j?2:0)},function(a){Ff(this,a,0,Nf);this.b-=this.u?9:3+(7==this.j?2:0)}];function Me(a){Eh[a>>12].call(this,a)}
var Eh=[function(a){Fh[a>>8&15].call(this,a)},Vg,Jg,sg,og,qg,jg,function(a){Gh[a>>8&15].call(this,a)},function(a){Hh[a>>8&15].call(this,a)},Wg,Kg,tg,pg,rg,eh,P],Fh=[function(a){Ih[a>>4&15].call(this,a)},Fg,Cg,ug,vg,Ag,wg,yg,Tg,Tg,kh,mh,oh,function(a){Jh[a>>6&3].call(this,a)},P,P],Jh=[function(a){a=this.g[7]+((a&63)<<1)&65535;var b=this.na(a|this.Fa);Dc(this,this.g[5]);this.g[6]=a+2&65535;this.g[5]=b;this.b-=8},function(a){a=gf(this,a,0);this.Ba(a);$e(this,a);this.b-=11},function(a){var b=bf(this);
this.ia=this.b;this.Ba(b);hf(this,a,0,b);this.b=this.ia-Xg[this.u]},function(a){Hf(this,a,Te(this)?65535:0,this.Ba);this.b-=this.u?9:3+(7==this.j?2:0)}],Ih=[function(a){Kh[a&15].call(this,a)},P,P,P,Rg,Rg,Rg,Rg,ah,function(a){!(a&8)||1145>this.ha?P.call(this,a):(this.w&49152||(this.w=this.w&-225|(a&7)<<5,this.i|=1,this.i&=-3),this.b-=5)},qh,sh,fh,fh,fh,fh],Kh=[Ng,hh,function(){af(this);this.i|=this.w&16;this.b-=13},Eg,Pg,$g,bh,function(a){P.call(this,a)},P,P,P,P,P,P,P,P],Gh=[Yg,Yg,Lg,Lg,kg,kg,lg,lg,
ih,ih,P,P,P,P,dh,dh],Hh=[Dg,Bg,xg,zg,Gg,Hg,mg,ng,Mg,gh,uh,wh,yh,function(a){1145>this.ha?P.call(this,a):Lh[a>>6&3].call(this,a)},P,P],Lh=[function(a){P.call(this,a)},function(a){a=gf(this,a,65536);this.Ba(a);$e(this,a);this.b-=11},function(a){var b=bf(this);this.ia=this.b;this.Ba(b);hf(this,a,65536,b);this.b=this.ia-Xg[this.u]},function(a){P.call(this,a)}];
function Mh(a){A.call(this,"ROM",a,256);this.fa=this.g=null;this.u=+a.addr;this.b=+a.size;this.w=!1;this.i=a.alias;"string"==typeof this.i&&(this.i=eval(this.i));this.j=a.file;this.A=wa(this.j);if(this.j){a=this.j;var b=xa(this.A);"json"!=b&&"hex"!=b&&(a=Pa()+"/api/v1/dump?file="+this.j+"&format=bytes&decimal=true");var c=this;Na(a,null,!0,function(d,e,f){f?(c.S("Unable to load ROM resource (error "+f+": "+d+")"),c.j=null):(ub(c.eb,d,e),(d=Qa(d,e))?(c.g=d.Z,c.fa=d.fa):c.j=null);Nh(c)})}}t(Mh,A);
k=Mh.prototype;k.ya=function(a,b,c,d){this.C=b;this.f=c;this.D=d;Nh(this)};k.Aa=function(){this.fa&&(this.D&&Oh(this.D,this.id,this.u,this.b,this.fa),delete this.fa);return!0};k.za=function(){return!0};
function Nh(a){if(!Rb(a)){if(a.j){if(!a.g||!a.C)return;a.b||(a.b=a.g.length);if(a.g.length!=a.b)Pb(a,"ROM size ("+w(a.g.length,8,!0)+") does not match specified size ("+w(a.b,8,!0)+")");else{a:{var b=a.u;if(57344<=b&&b<57344+fd){var c={};c=(c[b]=[Mh.prototype.Eg,Mh.prototype.Wh,null,null,null,a.b>>1],c);if(qc(a.C,a,c)){a.status("Added %d-byte ROM at %o",a.b,b);b=a.w=!0;break a}}else if(ld(a.C,b,a.b,ee)){for(c=0;c<a.g.length;c++)ud(a.C,b+c,a.g[c]);b=!0;break a}b=!1}if(b){b=[];"number"==typeof a.i?
b.push(a.i):null!=a.i&&a.i.length&&(b=a.i);for(c=0;c<b.length;c++){for(var d=a,e=b[c],f=d.C,g=d.b,h=[],m=d.u>>>f.g;0<g&&m<f.b.length;)h.push(f.b[m++]),g-=f.j;f=d.C;d=d.b;g=0;for(e>>>=f.g;0<d&&e<f.b.length;){m=h[g++];if(!m)break;f.b[e++]=m;d-=f.j}}a.w||delete a.g}}}E(a)}}k.Eg=function(a){return this.g[a-this.u]};k.Wh=function(){};hb(function(){for(var a=D(document,B,"rom"),b=0;b<a.length;b++){var c=a[b],d=Ab(c);d=new Mh(d);zb(d,c)}});
function Ph(a){A.call(this,"RAM",a);this.fa=this.g=null;this.i=+a.addr;this.j=+a.size;this.xa=a.load;this.wa=a.exec;null!=this.xa&&(this.xa=+this.xa);null!=this.wa&&(this.wa=+this.wa);this.u=this.A=!1;this.b=a.file;this.w=wa(this.b);if(this.b){a=this.b;var b=xa(this.w);"json"!=b&&"hex"!=b&&(a=Pa()+"/api/v1/dump?file="+this.b+"&format=bytes&decimal=true");var c=this;Na(a,null,!0,function(d,e,f){f?(c.S("Unable to load RAM resource (error "+f+": "+d+")"),c.b=null):(ub(c.eb,d,e),(d=Qa(d,e))?(c.g=d.Z,
c.fa=d.fa,null==c.xa&&(c.xa=d.xa),null==c.wa&&(c.wa=d.wa)):c.b=null);Qh(c)})}}t(Ph,A);Ph.prototype.ya=function(a,b,c,d){this.C=b;this.f=c;this.D=d;Qh(this)};Ph.prototype.Aa=function(a,b){this.fa&&(this.D&&Oh(this.D,this.id,this.i,this.j,this.fa),delete this.fa);b||this.reset();return!0};Ph.prototype.za=function(){return!0};
function Qh(a){if(a.C&&(!a.u&&a.j&&(ld(a.C,a.i,a.j,wd)?a.u=!0:a.j=0),!Rb(a))){if(!a.u)z("No RAM allocated");else if(a.b){if(!a.g)return;Rh(a,a.g,a.xa,a.wa,a.i)?a.status('Loaded image "%s"',a.w):a.S('Error loading image "'+a.w+'"')}a.A=!0;E(a)}}
Ph.prototype.reset=function(){if(this.u&&!this.A){var a=this.C,b=this.i,c=this.j,d=b&a.i;for(b>>>=a.g;0<c&&b<a.b.length;){var e=a.b[b],f=d,g=c,h=0;f=f||0;h=(h||0)&255;void 0===g&&(g=e.size);if(Ub&&e.g)for(d=f;g--&&d<e.g.length;d++)e.g[d]=h;else for(d=f;g--&&d<e.size;d++)e.D(f,h,e.J+f);c-=a.j;b++;d=0}this.g&&Rh(this,this.g,this.xa,this.wa,this.i,!this.D)}this.A=!1};
function Rh(a,b,c,d,e,f){var g=!1,h=!1;if(null==c)for(var m=0;m<b.length-1;){var l=b[m]&255|(b[m+1]&255)<<8;if(l)if(l&255){var n=m;if(1!=l){G(a,"invalid signature ("+va(l)+") at offset "+va(n),16384);break}if(m+6>=b.length){G(a,"invalid block at offset "+va(n),16384);break}m+=2;var p=b[m++]&255|(b[m++]&255)<<8,r=b[m++]&255|(b[m++]&255)<<8;l+=(p&255)+(p>>8)+(r&255)+(r>>8);for(var q=m,u=p-=6;0<p&&m<b.length;)l+=b[m++]&255,p--;if(0!=p||m>=b.length){G(a,"insufficient data for block at offset "+va(n),
16384);break}l+=b[m++]&255;if(l&255){G(a,"invalid checksum ("+w(l,2,!0)+") for block at offset "+va(n),16384);break}if(u)for(G(a,"loading "+va(u)+" bytes at "+va(r)+"-"+va(r+u),16384);u--;)ud(a.C,r++,b[q++]&255);else r&1?g=!0:null==d&&(d=r),null!=d&&G(a,"starting address: "+va(d),16384);h=!0}else m++;else m+=2}if(!h&&(null==c&&(c=e),null!=c)){for(e=0;e<b.length;e++)ud(a.C,c+e,b[e]);h=!0}if(h){if(null==d||g)Hc(a.f),f=!1;null!=d&&Oe(a.f,d,f)}return h}
hb(function(){for(var a=D(document,B,"ram"),b=0;b<a.length;b++){var c=a[b],d=Ab(c);d=new Ph(d);zb(d,c)}});function Sh(a){A.call(this,"Keyboard",a,2048);E(this)}t(Sh,A);Sh.prototype.ta=function(){return!1};Sh.prototype.ya=function(a,b,c,d){this.I=a;this.f=c;this.D=d};hb(function(){for(var a=D(document,B,"keyboard"),b=0;b<a.length;b++){var c=a[b],d=Ab(c);d=new Sh(d);zb(d,c)}});
function Th(a){A.call(this,"SerialPort",a,4194304);this.L=+a.adapter;this.R=+a.baudReceive||9600;this.Y=+a.baudTransmit||9600;this.K=a.upperCase;"string"==typeof this.K&&(this.K="true"==this.K);this.u=this.w=null;this.W=+a.tabSize;this.T=+a.charBOL;this.A=0;this.H=!0;this.O=this.M=null;this.P=this.X=-1;this.B=this.b=this.g=0;this.j=[];a=a.binding;if("console"==a)this.w="";else if(a){var b=Ib("Panel",this.id);b&&(b=b.G[a])&&this.ta("",a,b)}this.i=this.F=this.N=null;this.exports={connect:this.oe,receiveData:this.Hc,
receiveStatus:this.$g,setConnection:this.fh}}t(Th,A);k=Th.prototype;
k.ta=function(a,b,c){if(!a||"textarea"==a){var d=this;this.G[b]=this.u=c;c.onkeydown=function(e){e=e||window.event;var f=0,g=e.keyCode;8==g?f=e.altKey?oa.Id:oa.Wb:46==g?f=oa.Id:e.ctrlKey&&g>=oa.Ed&&g<=oa.sf&&(f=g-(oa.Ed-oa.ze));f&&(e.preventDefault&&e.preventDefault(),d.Hc(f));return!0};c.onkeypress=function(e){e=e||window.event;if(!e.metaKey){var f=e.which||e.keyCode;e.altKey&&f==oa.Be&&(f=oa.Ae);d.Hc(f);e.preventDefault&&e.preventDefault()}return!0};c.onpaste=function(e){e.stopPropagation&&e.stopPropagation();
e.preventDefault&&e.preventDefault();(e=e.clipboardData||window.clipboardData)&&d.Hc(e.getData("Text"))};c.removeAttribute("readonly");return!0}return!1};
k.ya=function(a,b,c,d){this.I=a;this.C=b;this.f=c;this.D=d;var e=this;this.O=Ed(this.f,this.L?-1:48,4,2097152);this.P=Bd(this.f,function(){var f=-1;e.j.length&&(f=e.j.shift()&255,G(e,"receiveByte("+w(f,2,!0)+")"),e.K&&97<=f&&122>f&&(f-=32),Dd(e.f,e.P,1E3/Math.round(e.R/10)));0<=f&&(e.B=f,e.b&128?e.B|=49152:e.b|=128,e.b&64&&Cd(c,e.O))});this.M=Ed(this.f,this.L?-1:52,4,2097152);this.X=Bd(this.f,function(){e.g|=128;e.g&64&&Cd(c,e.M)});qc(b,this,Uh,this.L?64832+8*(this.L-1)-65392:0);sc(b,this.reset.bind(this));
E(this)};k.oe=function(a){if(!this.i){var b=ve(this.I,"connection");if(b){var c=b.split("->");if(2==c.length){var d=Ja(c[0]);if(d!=this.Rc)return;c=Ja(c[1]);if(this.i=Hb(c)){var e=this.i.exports;if(e){var f=e.connect;f&&f.call(this.i,this.H);if(this.F=e.receiveData){this.H=a;this.N=e.receiveStatus;this.status("Connected %s.%s to %s",this.eb,d,c);return}}}}this.status("Unable to establish connection: %s",b)}}};
k.Aa=function(a,b){if(!b)if(this.oe(this.H),!a)this.reset();else if(!this.restore(a))return!1;return!0};k.za=function(a){return a?this.save():!0};k.reset=function(){Vh(this)};k.save=function(){var a=new wc(this);a.set(0,[this.B,this.b,this.g,this.j]);return a.data()};k.restore=function(a){return Vh(this,a[0])};function Vh(a,b){b||(b=[0,8192,128,a.j]);b=ba(b);a.B=b.next().value;a.b=b.next().value;a.g=b.next().value;a.j=b.next().value;return!0}
k.Hc=function(a){if("number"==typeof a)this.j.push(a);else if("string"==typeof a)for(var b=0,c,d=0;d<a.length;d++){c=b;b=a.charCodeAt(d);if(10==b){if(13==c)continue;b=13}this.j.push(b)}else this.j=this.j.concat(a);Dd(this.f,this.P,1E3/Math.round(this.R/10));return!0};k.$g=function(a){var b=this.b;this.b&=-12289;a&32&&(this.b|=8192);a&256&&(this.b|=4096);b!=this.b&&(this.b|=32768,this.b&32&&Cd(this.f,this.O))};k.fh=function(a,b){return this.i?!1:(this.i=a,this.F=b,!0)};
k.rg=function(){var a=this.b&65534;this.b&=-32769;return a};k.Jh=function(a){var b=a^this.b;this.b=this.b&-112|a&111;this.N&&b&6&&(b=0,b=this.H?b|(a&4?32:0)|(a&2?320:0):b|(a&4?16:0)|(a&2?1048576:0),this.N.call(this.i,b))};k.qg=function(){this.b&=-129;return this.B};k.Ih=function(){};k.Zg=function(){return this.g};k.ri=function(a){this.g&128&&(a&64?Cd(this.f,this.M):Id(this.f,this.M));this.g=this.g&-70|a&69};k.Yg=function(){return 0};
k.pi=function(a){a&=255;this.F&&this.F.call(this.i,a);a&=127;if(this.u)if(13==a)this.A=0;else if(8==a)this.u.value=this.u.value.slice(0,-1),0<this.A&&this.A--;else{if(a){var b;13!=a&&10!=a&&(b=Ka[a]);b=b?"<"+b+">":String.fromCharCode(a);var c=b.length;32>a&&1==c&&(c=0);9==a&&(a=this.W||8,c=a-this.A%a,this.W&&(b=Ba("",c)));this.T&&!this.A&&c&&(b=String.fromCharCode(this.T)+b);this.u.value+=b;this.u.scrollTop=this.u.scrollHeight;this.A+=c}}else if(null!=this.w){if(10==a||1024<=this.w.length)this.v(this.w),
this.w="";10!=a&&(this.w+=String.fromCharCode(a))}Dd(this.f,this.X,1E3/Math.round(this.Y/10));this.g&=-129};var Wh={},Uh=(Wh[65392]=[null,null,Th.prototype.rg,Th.prototype.Jh,"RCSR"],Wh[65394]=[null,null,Th.prototype.qg,Th.prototype.Ih,"RBUF"],Wh[65396]=[null,null,Th.prototype.Zg,Th.prototype.ri,"XCSR"],Wh[65398]=[null,null,Th.prototype.Yg,Th.prototype.pi,"XBUF"],Wh);hb(function(){for(var a=D(document,B,"serial"),b=0;b<a.length;b++){var c=a[b],d=Ab(c);d=new Th(d);zb(d,c)}});
function $d(a){A.call(this,"PC11",a,8192);this.M=Xh(this,a.autoMount);this.g=0;this.T=+a.baudReceive||3600;this.w=this.b=0;this.K=32768;this.i=this.P=0;this.B=[];this.A=Yh;this.j=Zh;this.L=this.u="";this.Z=this.xa=this.wa=null;this.O=-1;this.N=!Wa()&&window&&"FileReader"in window;this.F=null;this.R=-1;this.H=null}t($d,A);function Xh(a,b){if(b&&"string"==typeof b)try{b=eval("("+b+")")}catch(c){z(a.type+" auto-mount error: "+c.message+" ("+b+")"),b=null}return b||{}}k=$d.prototype;
k.ta=function(a,b,c){var d=this,e=Zh;switch(b){case "listTapes":return this.G[b]=c,c.onchange=function(){var f=d.G.descTape,g=c.options[c.selectedIndex];if(f&&g){var h={};if(g=g.getAttribute("data-value"))try{h=eval("("+g+")")}catch(m){z("PC11 option error: "+m.message)}g=h.desc;void 0===g&&(g="");h=h.href;void 0!==h&&(g='<a href="'+h+'" target="_blank">'+g+"</a>");f.innerHTML=g}},!0;case "descTape":return this.G[b]=c,!0;case "readTape":e=$h;case "loadTape":return e||(e=ai),this.G[b]=c,c.onclick=
function(){var f=d.G.listTapes;f&&bi(d,f.options[f.selectedIndex].text,f.value,e)},!0;case "mountTape":if(!this.N){c.parentNode.removeChild(c);break}this.G[b]=c;c.addEventListener("change",function(){var f=c.children[0];f.children[1].disabled=!f.children[0].files.length});c.onsubmit=function(f){if(f=f.currentTarget[1].files[0]){var g=f.name;bi(d,wa(g,!0),g,ai,f)}return!1};return!0;case ci:return this.G[b]=c,!0}return!1};
k.ya=function(a,b,c,d){this.I=a;this.C=b;this.f=c;this.D=d;this.H=di(a);var e=this;if(a=Xh(this,ve(this.I,"autoMount")))for(var f in a)"PTR"==f&&(this.M[f]=a[f]);this.F=Ed(this.f,56,4,8192);this.R=Bd(this.f,function(){1!=(e.b&32769)||e.b&128||(e.i<e.B.length?(e.w=e.B[e.i]&255,F(e)&&G(e,e.type+".advanceReader("+e.i+"): "+w(e.w,2,!0),!0),e.i++,ei(e,e.i/e.B.length*100)):e.b|=32768,e.b|=128,e.b&=-2049,e.b&64&&Cd(e.f,e.F))});qc(b,this,fi);sc(b,this.reset.bind(this));gi(this,"None",Yh,!0);this.N&&gi(this,
"Local Tape",hi);gi(this,"Remote Tape",ii);ji(this)||E(this)};k.Aa=function(a,b){if(!b)if(!a)this.reset();else if(!this.restore(a))return!1;return!0};k.za=function(a){return a?this.save():!0};k.reset=function(){this.b&=-2241;this.w=0};function ji(a){a.g=0;var b=a.M.PTR;if(b){var c=b.path||"";if(!(b=b.name))a:{if((b=a.G.listTapes)&&b.options)for(var d=0;d<b.options.length;d++){var e=b.options[d];if(e.value==c){b=e.text;break a}}b=wa(c,!0)}c&&b?ki(a,b,c,ai,!0):li(a)}return!!a.g}
function bi(a,b,c,d,e){if(c)if(c==hi)a.S('Use "Choose File" and "Mount" to select and load a local tape.');else{if(c==ii){c=window.prompt("Enter the URL of a remote tape image.","")||"";if(!c)return;b=wa(c);a.status('Attempting to load %s as "%s"',c,b);a.A=ii}else a.A=c;ki(a,b,c,d,!1,e)}else mi(a,!1)}
function ki(a,b,c,d,e,f){var g=-1;if(a.u.toLowerCase()!=c.toLowerCase()||a.j!=d)g++,mi(a,!0),a.flags.$a?a.S("PC11 busy"):(e&&(a.g++,F(a)&&G(a,"auto-loading tape: "+b)),a.load(b,c,d,f)?g++:a.flags.$a=!0);g&&ni(a,a.L,a.u,a.j,a.Z,a.xa,a.wa)}
k.load=function(a,b,c,d){var e=this,f=b;if(d){var g=new FileReader;g.onload=function(){var h=g.result;h&&(h=new Uint8Array(h,0,h.byteLength),ni(e,a,b,c,h),e.A=hi);e.flags.$a=!1;li(e)};g.readAsArrayBuffer(d);return!1}0>b.indexOf("/api/v1/dump")&&(d=xa(b),f="json"==d||"gz"==d?encodeURI(b):Pa()+"/api/v1/dump?path="+encodeURIComponent(b)+"&format=json");return!!Na(f,null,!0,function(h,m,l){var n=0>l&&!!e.I&&!e.I.flags.aa;l?e.S('Unable to load tape "'+a+'" (error '+l+": "+h+")",n):(ub(e.eb,h,m),(h=Qa(h,
m))&&ni(e,a,b,c,h.Z,h.xa,h.wa));e.flags.$a=!1;e.g&&(e.g--,e.g||E(e));li(e)})};function gi(a,b,c,d){if((a=a.G.listTapes)&&a.options){for(var e=0;e<a.options.length;e++)if(a.options[e].value==c)return;e=document.createElement("option");e.text=b;e.value=c;d&&a.childNodes[0]?a.insertBefore(e,a.childNodes[0]):a.appendChild(e)}}
function li(a){var b=a.G.listTapes;if(b&&b.options){a=a.A||a.u;for(var c=0;c<b.options.length;c++)if(b.options[c].value==a){b.selectedIndex!=c&&(b.selectedIndex=c);break}c==b.options.length&&(b.selectedIndex=0)}}function ei(a,b){b|=0;if(b!==a.O){var c=a.G[ci];c&&(c=(c=D(c,oi))&&c[0])&&c.style&&(c.style.width=b+"%");a.O=b}}
function ni(a,b,c,d,e,f,g){a.L=b;a.u=c;a.j=d;a.Z=e;a.xa=f;a.wa=g;d==$h?a.H&&Rh(a.H,e,f,g,null,!1)?a.status('Read tape "%s"',b):a.S('No valid memory address for tape "'+b+'"'):(a.i=0,a.B=e,a.b&=-32769,a.status('Loaded tape "%s" (%d bytes)',b,e.length),ei(a,0))}function mi(a,b){if(a.u||!1===b)a.L="",a.u="",b||(a.j&&a.status(a.j==ai?"tape detached":"tape unloaded"),a.A=Yh,a.j=Zh,li(a))}k.save=function(){return(new wc(this)).data()};k.restore=function(){return!0};k.kg=function(){return this.b&65534};
k.Ch=function(a){a&1&&(this.b&32768?(a&=-2,this.b&64&&Cd(this.f,this.F)):(this.b&=-129,this.b|=2048,this.w=0,Dd(this.f,this.R,1E3/Math.round(this.T/10))));this.b=this.b&-66|a&65};k.jg=function(){this.b&=-129;this.b|=2048;return this.w};k.Bh=function(){};k.ig=function(){return this.K};k.Ah=function(a){this.K=this.K&-65|a&64};k.hg=function(){return this.P};k.zh=function(a){this.P=a&255};
var Yh="",hi="?",ii="??",Zh=0,ai=1,$h=2,ci="readProgress",oi="pcjs-progress-bar",pi={},fi=(pi[65384]=[null,null,$d.prototype.kg,$d.prototype.Ch,"PRS"],pi[65386]=[null,null,$d.prototype.jg,$d.prototype.Bh,"PRB"],pi[65388]=[null,null,$d.prototype.ig,$d.prototype.Ah,"PPS"],pi[65390]=[null,null,$d.prototype.hg,$d.prototype.zh,"PPB"],pi);
function qi(a,b,c){A.call(this,"Disk",{id:a.eb+".disk"+w(++ri,4)},32768);this.controller=a;this.I=a.I;this.D=a.D;this.u=b;this.Ua=b.name;this.La=this.zd="";this.td=b.td;this.ca=this.la=this.ma=this.sa=this.mode=0;this.b=[];this.i=null;this.j=!1;this.create(c,b.ca,b.la,b.ma,b.sa);this.g=this.w=null;E(this)}t(qi,A);k=qi.prototype;k.ya=function(a,b,c,d){this.D=d};
k.create=function(a,b,c,d,e){this.mode=a;this.ca=b;this.la=c;this.ma=d;this.sa=e;this.b=[];if("preload"!=this.mode){a=Array(this.ca);for(b=0;b<a.length;b++){c=Array(this.la);for(d=0;d<c.length;d++){e=Array(this.ma);for(var f=1;f<=e.length;f++)e[f-1]=si(null,b,d,f,this.sa,0);c[d]=e}a[b]=c}this.b=a}this.i=null};
k.load=function(a,b,c,d,e){var f=b;if(this.g)return!0;this.Ua=a;this.La=b;this.zd=wa(b);var g=this;this.g=d;this.w=e||this.controller;if(c){var h=new FileReader;h.onload=function(){var m=h.result,l=m?m.byteLength:0,n=na[l];if(n){g.ca=n[0];g.la=n[1];g.ma=n[2];g.sa=n[3]||512;var p=g.sa>>2;var r=n=0;m=new DataView(m,0,l);g.b=Array(g.ca);for(l=0;l<g.b.length;l++)for(var q=g.b[l]=Array(g.la),u=0;u<q.length;u++)for(var y=q[u]=Array(g.ma),x=0;x<y.length;x++){for(var C=si(null,l,u,x+1,g.sa,0),Xa=C.data,Ya=
0;Ya<p;Ya++,r+=4){var R=Xa[Ya]=m.getInt32(r,!0);n=n+R&-1}C.Ja=p;y[x]=C}g.i=n;p=g}else g.S("Unrecognized disk format ("+l+" bytes)");g.g&&(g.g.call(g.controller,g.u,p,g.Ua,g.La),g.g=null)};h.readAsArrayBuffer(c);return!0}0>b.indexOf("/api/v1/dump")&&(a=xa(b),"json"==a||"gz"==a?f=encodeURI(b):(c="path",d="&mbhd=10",!b.indexOf("http:")||!b.indexOf("ftp:")||0<="dsk ima img 360 720 12 144".split(" ").indexOf(a)?(c="disk",d="&mbhd=0"):ya(b,"/")&&(c="dir"),f=Pa()+"/api/v1/dump?"+c+"="+encodeURIComponent(b)+
(this.td?"":d)+"&format=json"));return!!Na(f,null,!0,function(m,l,n){ti(g,m,l,n)})};
function ti(a,b,c,d){var e=null,f=0>d&&!!a.I&&!a.I.flags.aa;a.j=!1;if(d)a.controller.S('Unable to load disk "'+a.Ua+'" (error '+d+": "+b+")",f);else{ub(a.controller.eb,b,c);try{if(0<wa(a.zd,!0).toLowerCase().indexOf("-readonly"))a.j=!0;else{var g=c.indexOf("\n");0<g&&1024>g&&0<c.substring(0,g).indexOf("write-protected")&&(a.j=!0)}var h;"<"==c.substr(0,1)?h=["Missing disk image: "+a.Ua]:h=0>c.indexOf("0x")&&'["'!=c.substr(0,2)?JSON.parse(c.replace(/([a-z]+):/gm,'"$1":').replace(/\/\/[^\n]*/gm,"")):
eval("("+c+")");if(h.length)if(1==h.length)z(h[0]);else{a.ca=h.length;a.la=h[0].length;a.ma=h[0][0].length;var m=h[0][0][0];a.sa=m&&m.length||512;for(d=c=0;d<a.ca;d++)for(f=0;f<a.la;f++)for(g=0;g<a.ma;g++)if(m=h[d][f][g]){var l=m.length;void 0===l&&(l=m.length=512);l>>=2;var n=m.pattern;void 0===n&&(n=m.pattern=0);var p=m.data;if(void 0===p){var r=m.bytes;if(void 0!==r&&r.length){for(var q=l<<2,u=r.length;u<q;u++)r[u]=n;ui(m,r)}else p=[],n=m.pattern=n|n<<8|n<<16|n<<24,m.data=p;delete m.bytes}si(m,
d,f);for(q=0;q<p.length;q++)c=c+p[q]&-1}a.b=h;a.i=c;e=a}else z("Empty disk image: "+a.Ua)}catch(y){z("Disk image error ("+b+"): "+y.message)}}a.g&&(a.g.call(a.w,a.u,e,a.Ua,a.La),a.g=null)}function si(a,b,c,d,e,f){a||(a={sector:d,length:e,data:[],pattern:f});a.wk=b;a.xk=c;a.Sa=a.Ja=0;a.ab=!1;return a}
k.seek=function(a,b,c,d,e){d=null;var f=this.u,g=this.b[a];if(g){var h=g[b];if(!h&&f.uf&&b<f.la)for(h=g[b]=Array(f.vf),g=0;g<h.length;g++)h[g]=si(null,a,b,g+1,f.pe,0);if(h){for(g=0;g<h.length;g++)if(h[g]&&h[g].sector==c){d=h[g];break}!d&&f.uf&&9==f.ee&&(d=h[g]=si(null,a,b,f.ee,f.pe,0))}}e&&e(d,!1);return d};function ui(a,b){for(var c=0,d=a.length>>2,e=Array(d),f=0;f<d;f++)e[f]=b[c]|b[c+1]<<8|b[c+2]<<16|b[c+3]<<24,c+=4;a.data=e}
k.read=function(a,b){var c=-1;if(a&&b<a.length){c=a.data;var d=b>>2;c=(d<c.length?c[d]:a.pattern)>>((b&3)<<3)&255}return c};k.write=function(a,b,c){if(this.j)return!1;if(b<a.length){if(c!=this.read(a,b,!0)){var d=a.data,e=a.pattern,f=b>>2;b=(b&3)<<3;for(var g=d.length;g<=f;g++)d[g]=e;a.Ja?f<a.Sa?(a.Ja+=a.Sa-f,a.Sa=f):f>=a.Sa+a.Ja&&(a.Ja+=f-(a.Sa+a.Ja)+1):(a.Sa=f,a.Ja=1);d[f]=d[f]&~(255<<b)|c<<b}return!0}return null};
k.save=function(){var a=0,b=[];b[a++]=[this.La,this.i,this.ca,this.la,this.ma,this.sa];if(!this.j)for(var c=this.b,d=0;d<c.length;d++)for(var e=0;e<c[d].length;e++)for(var f=0;f<c[d][e].length;f++){var g=c[d][e][f];if(g&&g.Ja){for(var h=[],m=0,l=g.Sa,n=g.Sa+g.Ja;l<n;)h[m++]=g.data[l++];b[a++]=[d,e,f,g.Sa,h]}}return b};
k.restore=function(a){var b=0,c="unsupported restore format";if(a&&0<a.length){var d=0,e=a[d++];e&&2<=e.length&&(!this.b.length&&6<=e.length?this.create("local",e[2],e[3],e[4],e[5]):null!=e[1]&&null!=this.i&&e[1]!=this.i&&(c="original checksum ("+e[1]+") differs from current checksum ("+this.i+")",b=-2));for(this.b.length||(b=-1);d<a.length&&0<=b;){var f=0,g=a[d++],h=g[f++],m=g[f++],l=g[f++];if(h>=this.b.length||m>=this.b[h].length||l>=this.b[h][m].length){c="sector (CHS="+h+":"+m+":"+l+") out of range ("+
b+" changes applied)";b=-1;break}if(this.j){c="unable to modify write-protected disk";b=-1;break}e=g[f++];f=g[f++];g=e+f.length;if(h=this.b[h][m][l]){for(m=h.data.length;m<e;)h.data[m++]=h.pattern;m=0;h.Sa=e;for(h.Ja=f.length;e<g;)h.data[e++]=f[m++];b++}}}0>b&&-2!=b&&this.controller.S("Unable to restore disk '"+this.Ua+": "+c);return b};var ri=0;
function vi(a,b,c,d,e,f){A.call(this,a,b,c);this.M=Wi(this,b.autoMount);this.L=0;this.P=d;this.R=e;this.T=f;this.O=d.Tc;this.g=Array(this.O);this.N=!Wa()&&window&&"FileReader"in window;this.A=[];this.Na=null;this.exports={bootDisk:this.fe,loadDisk:this.vd,selectDrive:this.eh,wait:this.ih}}t(vi,A);function Wi(a,b){if(b&&"string"==typeof b)try{b=eval("("+b+")")}catch(c){z(a.type+" auto-mount error: "+c.message+" ("+b+")"),b=null}return b||{}}k=vi.prototype;
k.ta=function(a,b,c){var d=this;switch(b){case "listDisks":return this.G[b]=c,c.onchange=function(){Yi(d)},!0;case "descDisk":case "listDrives":return this.G[b]=c,c.onchange=function(){var e=qa(c.value,10);null!=e&&Zi(d,e)},!0;case "loadDisk":return this.G[b]=c,c.onclick=function(){d.vd()},!0;case "bootDisk":return this.G[b]=c,c.onclick=function(){d.fe()},!0;case "saveDisk":if(!this.N){c.parentNode.removeChild(c);break}this.G[b]=c;c.onclick=function(){var e=d.G.listDrives;if(e&&e.options&&d.g)if(e=
d.g[qa(e.value,10)||0]){var f=e.ba;if(f){e=f.rk();f=f.zd.replace(".json",".img");var g=null,h;"string"!=typeof e?"function"==typeof Blob&&"undefined"!=typeof URL&&URL&&"function"==typeof URL.createObjectURL&&(h=URL.createObjectURL(new Blob([e],{type:"application/octet-stream"}))):h="data:application/octet-stream;base64,"+e;h?(f&&(g=document.createElement("a"),"string"!=typeof g.download&&(g=null)),g?(g.href=h,g.download=f,document.body.appendChild(g),g.click(),document.body.removeChild(g),h="Check your Downloads folder for "+
f+"."):(window.open(h),h="Check your browser for a new window/tab containing the requested data"+(f?" ("+f+")":"")+".")):h="Operation unsupported by your browser.";z(h)}else d.S("No disk loaded in drive.")}else d.S("No disk drive selected.")};return!0;case "mountDisk":if(this.N)return this.G[b]=c,c.addEventListener("change",function(){var e=c.children[0];e.children[1].disabled=!e.children[0].files.length}),c.onsubmit=function(e){if(e=e.currentTarget[1].files[0]){var f=e.name;d.vd(wa(f,!0),f,e)}return!1},
!0;c.parentNode.removeChild(c)}return!1};k.ya=function(a,b,c,d){this.I=a;this.C=b;this.f=c;this.D=d;if(a=Wi(this,ve(this.I,"autoMount")))for(var e in a)e.substr(0,2)==this.type.substr(0,2)&&(this.M[e]=a[e]);this.reset();this.Na=Ed(this.f,this.P.od,this.P.kd,this.ga);qc(b,this,this.T);sc(b,this.reset.bind(this));$i(this,"None",aj,!0);this.N&&$i(this,"Local Disk",bj);$i(this,"Remote Disk",cj);dj(this)||E(this)};
k.Aa=function(a,b){if(!b){if(!a){if(this.reset(),this.I.M){this.A=[];for(a=0;a<this.g.length;a++)ej(this,a,!0);dj(this,!0)}}else if(!this.restore(a))return!1;if(a=this.G.listDrives){for(;a.firstChild;)a.removeChild(a.firstChild);a.value="";for(b=0;b<this.O;b++){var c=document.createElement("option");c.value=b;c.text=this.g[b].Jc||"---";a.appendChild(c)}0<this.O&&(a.value="0",Zi(this,0))}}return!0};k.za=function(a){return a?this.save():!0};k.reset=function(){this.wb();fj(this)};
k.save=function(){var a=new wc(this);a.set(0,this.Kc());a.set(1,gj(this));a.set(2,hj(this));return a.data()};k.restore=function(a){var b=!0;this.wb(a[0])||(b=!1);var c=a[1];c&&(this.A=c);fj(this,a[2])||(b=!1);return b};k.wb=function(){return!0};k.Kc=function(){return[]};
function fj(a,b){for(var c=0;c<a.g.length;c++){var d=a.g[c];void 0===d&&(d=a.g[c]={});var e=a,f=d;d=c;var g=a.R,h=b&&b[c],m=0;f.Mb=d;f.name=e.Rc;f.Fc=f.Jb=!1;f.bc=null;f.td=!0;f.Jc=g[m++]+d;f.ca=g[m++];f.la=g[m++];f.ma=g[m++];f.sa=g[m++];f.Df=g[m++];f.Ef=g[m++];f.Ff=g[m++];f.wf=g[m++];f.status=g[m];f.pk=0;f.nk=0;f.ee=1;f.vf=f.ma;f.pe=f.sa;f.yk=0;f.Gk=null;f.ba||(f.La="");h&&(m=h[1],g=h[2],h[0]?(f=m,h=g,g=e.g[d],ej(e,d,!0),g.Jb=!0,d=new qi(e,g,"preload"),e.he(g,d,f,h,!0)):ij(e,d,m,g,!0)?f.ba&&g&&jj(e,
m,g,f.ba):E(e,!1))}return!0}function hj(a){for(var b=[],c=0;c<a.g.length;c++){var d=a.g[c];b.push([d.Jb,d.Ua,d.La])}return b}function gj(a){for(var b=0;b<a.g.length;b++){var c=a.g[b];c.ba&&kj(a,c.La,c.ba)}return a.A}
function dj(a,b){b||(a.L=0);for(var c in a.M){var d=a.M[c],e=d.path||"",f;if(!(f=d.name))a:{if((f=a.G.listDisks)&&f.options)for(var g=0;g<f.options.length;g++){var h=f.options[g];if(h.value==e){f=h.text;break a}}f=wa(e,!0)}if(e&&f&&(g=-1,c&&(g=c.charCodeAt(c.length-1)-48,0>g||9<g)&&(g=-1),0<=g&&g<a.g.length)){!ij(a,g,f,e,!0)&&b&&E(a,!1);continue}a.S("Incorrect auto-mount settings for drive "+c+" ("+JSON.stringify(d)+")")}return!!a.L}
k.vd=function(a,b,c){if(!a&&!b){var d=this.G.listDisks;d&&d.options&&(a=d.options[d.selectedIndex].text,b=d.value)}d=(d=this.G.listDrives)&&qa(d.value,10);if(void 0===d||0>d||d>=this.g.length)return this.S("Unable to load the selected drive"),!1;if(!b)return ej(this,d),!0;if(b==bj)return this.S('Use "Choose File" and "Mount" to select and load a local disk.'),!1;if(b==cj){b=window.prompt("Enter the URL of a remote disk image.","")||"";if(!b)return!1;a=wa(b);this.status('Attempting to load %s as "%s"',
b,a)}ij(this,d,a,b,!1,c);return!0};k.fe=function(){var a,b=this.G.listDrives;b=b&&qa(b.value,10);if(null==b||0>b||b>=this.g.length||!(a=this.g[b]))return this.S("Unable to boot the selected drive"),!1;if(!a.ba)return this.S("Load a disk into the drive first"),!1;Oe(this.f,0,!0,b);return(a=this.Nb(a,a.Df,a.Ef,a.Ff,a.wf,0,2))?(this.S("Unable to read the boot sector ("+a+")"),!1):!0};
function ij(a,b,c,d,e,f){var g=-1,h=a.g[b];h.La.toLowerCase()!=d.toLowerCase()&&(g++,ej(a,b,!0),h.Fc?a.S(a.type+" busy"):(h.Fc=!0,e&&(h.sd=!0,a.L++,F(a)&&G(a,"auto-loading disk: "+c)),h.Jb=!!f,(new qi(a,h,"preload")).load(c,d,f,a.he)&&g++));return g}
k.he=function(a,b,c,d,e){a.Fc=!1;b&&(b.ca>a.ca||b.la>a.la)&&(this.S('Disk "'+c+'" too large for drive '+(this.g[a.Mb].Jc||"---")),b=null);b?(a.ba=b,a.Ua=c,a.La=d,this.qe(a.Mb),jj(this,c,d,b),this.S('Loaded disk "'+c+'" in drive '+(this.g[a.Mb].Jc||"---"),a.sd||e),this.I&&Fe(this.I)):a.Jb=!1;a.sd&&(a.sd=!1,--this.L||E(this));Zi(this,a.Mb);a.bc&&(a.bc(),a.bc=null)};
function $i(a,b,c,d){if((a=a.G.listDisks)&&a.options){for(var e=0;e<a.options.length;e++)if(a.options[e].value==c)return;e=document.createElement("option");e.text=b;e.value=c;d&&a.childNodes[0]?a.insertBefore(e,a.childNodes[0]):a.appendChild(e)}}
function Zi(a,b,c){var d=!1;if(0<=b&&b<a.g.length){var e=a.g[b],f=a.G.listDisks;a=a.G.listDrives;if(f&&a&&f.options&&a.options){if(c)for(c=0;c<a.options.length;c++)if(qa(a.options[c].value,10)==e.Mb){a.selectedIndex!=c&&(a.selectedIndex=c);d=!0;break}c=qa(a.value,10);e=e.Jb?bj:e.La;if(!isNaN(c)&&c==b){for(c=0;c<f.options.length;c++)if(f.options[c].value==e){f.selectedIndex!=c&&(f.selectedIndex=c);d=!0;break}c==f.options.length&&(f.selectedIndex=0)}}}return d}
k.eh=function(a){var b=this.G.listDrives;if(b&&b.options)for(var c=b.options.length,d=0;d<c;d++)if(b.options[d].textContent==a){var e=qa(b.options[d].value,10);if(0<=e)return Zi(this,e,!0)}return!1};
function Yi(a){var b=a.G.listDisks,c=a.G.descDisk,d=b.options&&b.options[b.selectedIndex];if(c&&d){b={};if(d=d.getAttribute("data-value"))try{b=eval("("+d+")")}catch(e){z(a.type+" option error: "+e.message)}a=b.desc;void 0===a&&(a="");b=b.href;void 0!==b&&(a='<a href="'+b+'" target="_blank">'+a+"</a>");c.innerHTML=a}}k.ih=function(a){for(var b=0;b<this.g.length;b++){var c=this.g[b];if(c&&c.Fc)return c.bc||(c.bc=a),!1}return!0};
function ej(a,b,c){var d=a.g[b];if(d.ba||!1===c)kj(a,d.La,d.ba),d.Ua="",d.La="",d.ba=null,d.Jb=!1,c||(a.S("Drive "+(a.g[b].Jc||"---")+" unloaded",c),Zi(a,b))}function jj(a,b,c,d){var e;for(e=0;e<a.A.length;e++)if(a.A[e][1]==c){d.restore(a.A[e][2]);return}a.A[e]=[b,c,[]]}function kj(a,b,c){var d;for(d=0;d<a.A.length;d++)if(a.A[d][1]==b){a.A[d][2]=c.save();break}}k.qe=function(){};k.Nb=function(){return-1};k.Oc=function(){return-1};var aj="",bj="?",cj="??";
function M(a){vi.call(this,"RK11",a,262144,ac,ac.zc,lj);this.F=this.i=this.b=this.w=this.u=this.j=this.B=0}t(M,vi);k=M.prototype;k.wb=function(a){a||(a=[mj.zc|mj.Yd|mj.Ud,0,Q.Wa,0,0,0,0]);a=ba(a);this.F=a.next().value;this.i=a.next().value;this.b=a.next().value;this.w=a.next().value;this.u=a.next().value;this.j=a.next().value;this.B=a.next().value;return!0};k.Kc=function(){return[this.F,this.i,this.b,this.w,this.u,this.j,this.B]};
k.Nb=function(a,b,c,d,e,f,g,h,m){var l=0;a=a.ba;var n=null;a||(l=S.Od,e=0);for(;e;){if(!n){if(b>=a.ca){l=S.xc;break}n=a.seek(b,c,d+1);if(!n){l=S.Xd;break}var p=0;++d>=a.ma&&(d=0,++c>=a.la&&(c=0,++b))}var r,q;if(0>(r=a.read(n,p++))||0>(q=a.read(n,p++))){l=S.yc;break}if(!h&&(Oc(this.C,cf(this.f,f),r|q<<8),Ad(this.C))){l=S.Yb;break}p>=a.sa&&(n=null);f+=g;e--}return m?m(l,b,c,d,e,f):l};
k.Oc=function(a,b,c,d,e,f,g,h,m){var l=0;a=a.ba;var n=null;a||(l=S.Od,e=0);for(;e;){var p=Qc(this.C,cf(this.f,f));if(Ad(this.C)){l=S.Yb;break}if(!n){if(b>=a.ca){l=S.xc;break}n=a.seek(b,c,d+1,!0);if(!n){l=S.Xd;break}var r=0;++d>=a.ma&&(d=0,++c>=a.la&&(c=0,++b))}if(h){var q,u;if(0>(q=a.read(n,r++))||0>(u=a.read(n,r++))){l=S.yc;break}if(p!=(q|u<<8)){l=S.ae;break}}else if(!a.write(n,r++,p&255)||!a.write(n,r++,p>>8)){l=S.yc;break}r>=a.sa&&(n=null);f+=g;e--}return m?m(l,b,c,d,e,f):l};
k.Ue=function(a,b,c,d,e,f){this.u=f&65535;this.b=this.b&~Q.Db|f>>16-Q.ja.Db&Q.Db;this.w=65536-e&65535;this.j=this.j&~nj.ld|d&nj.ld;this.i|=a;oj(this);return!0};function oj(a){a.b&=~Q.cb;a.i&&(a.i|=S.De,a.b|=Q.cb,a.i&S.Yc&&(a.b|=Q.Yc),F(a)&&G(a,a.type+": ERROR: "+v(a.i)))}k.wg=function(){return this.F};k.Oh=function(){};k.xg=function(){return this.i};k.Ph=function(){};k.tg=function(){return this.b&Q.Zb};
k.Lh=function(a){this.b=this.b&~Q.Qa|a&Q.Qa;if(this.b&Q.Xb){a=!0;var b,c="",d=(this.j&nj.nb)>>nj.ja.nb,e=this.g[d];this.b&=~(Q.Wa|Q.md);this.i&=~S.kf;switch(b=this.b&Q.ua){case pj.ye:F(this)&&G(this,this.type+": CRESET("+d+")",!0);this.i=this.j=0;this.b=Q.Wa;break;case pj.Pe:c="RCHK";case pj.ob:c||(c="READ");var f=this.Nb;case pj.pd:c||(c="WCHK");case pj.ac:c||(c="WRITE");f||(f=this.Oc);var g=(this.j&nj.Vb)>>nj.ja.Vb;var h=(this.j&nj.ad)>>nj.ja.ad;var m=this.j&nj.ld;var l=65536-this.w&65535;var n=
(this.b&Q.Db)<<16-Q.ja.Db|this.u;var p=this.b&Q.Le?0:2;F(this)&&G(this,this.type+": "+c+"("+g+":"+h+":"+m+") "+v(n)+"--"+v(n+(l<<1)),!0,!0);if(g>=e.ca){this.i|=S.xc;break}if(m>=e.ma){this.i|=S.yc;break}a=f.call(this,e,g,h,m,l,n,p,b>=pj.pd,this.Ue.bind(this));break;case pj.Dc:g=(this.j&nj.Vb)>>nj.ja.Vb;F(this)&&G(this,this.type+": SEEK("+g+")",!0);g<e.ca?this.b|=Q.md:this.i|=S.xc;break;case pj.Ee:F(this)&&G(this,this.type+": DRESET("+d+")");this.i=this.j=0;this.b=Q.Wa|Q.md;break;default:F(this)&&G(this,
this.type+": UNSUPPORTED("+b+")")}this.F=e.status|(e.ba?mj.Ca:0)|d<<mj.ja.cd|this.j&mj.jf;oj(this);a&&(this.b&=~Q.Xb,this.b|=Q.Wa,this.b&Q.Cb&&Cd(this.f,this.Na))}};k.yg=function(){return this.w};k.Qh=function(a){this.w=a};k.sg=function(){return this.u};k.Kh=function(a){this.u=a};k.ug=function(){return this.j};k.Mh=function(a){this.j=a};k.vg=function(){return this.B};k.Nh=function(a){this.B=a};
var mj=ac.Ac,S=ac.Xe,Q=ac.Ve,nj=ac.We,pj=ac.ua,qj={},lj=(qj[65280]=[null,null,M.prototype.wg,M.prototype.Oh,"RKDS"],qj[65282]=[null,null,M.prototype.xg,M.prototype.Ph,"RKER"],qj[65284]=[null,null,M.prototype.tg,M.prototype.Lh,"RKCS"],qj[65286]=[null,null,M.prototype.yg,M.prototype.Qh,"RKWC"],qj[65288]=[null,null,M.prototype.sg,M.prototype.Kh,"RKBA"],qj[65290]=[null,null,M.prototype.ug,M.prototype.Mh,"RKDA"],qj[65294]=[null,null,M.prototype.vg,M.prototype.Nh,"RKDB"],qj);
function ae(a){vi.call(this,"RL11",a,524288,bc,bc.Ye,rj);this.b=this.B=this.i=this.j=this.w=this.u=0}t(ae,vi);k=ae.prototype;k.wb=function(a){a||(a=[T.Ca|T.Wa,0,0,0,0,0]);a=ba(a);this.b=a.next().value;this.B=a.next().value;this.i=a.next().value;this.j=a.next().value;this.w=a.next().value;this.u=a.next().value;return!0};k.Kc=function(){return[this.b,this.B,this.i,this.j,this.w,this.u]};
k.Nb=function(a,b,c,d,e,f,g,h,m){g=0;a=a.ba;h=null;a||(g=sj.Xa,e=0);for(;e;){if(!h){h=a.seek(b,c,d+1);if(!h){g=sj.Xa;break}var l=0}var n,p;if(0>(n=a.read(h,l++))||0>(p=a.read(h,l++))){g=sj.Xa;break}Oc(this.C,cf(this.f,f),n|p<<8);if(Ad(this.C)){g=sj.Yb;break}f+=2;e--;if(l>=a.sa&&(h=null,++d>=a.ma&&(d=0,++c>=a.la&&(c=0,++b>=a.ca)))){g=sj.Xa;break}}return m?m(g,b,c,d,e,f):g};
k.Oc=function(a,b,c,d,e,f,g,h,m){g=0;a=a.ba;h=null;a||(g=sj.Xa,e=0);for(;e;){var l=Qc(this.C,cf(this.f,f));if(Ad(this.C)){g=sj.Yb;break}f+=2;e--;if(!h){h=a.seek(b,c,d+1,!0);if(!h){g=sj.Xa;break}var n=0}if(!a.write(h,n++,l&255)||!a.write(h,n++,l>>8)){g=sj.Xa;break}if(n>=a.sa&&(h=null,++d>=a.ma&&(d=0,++c>=a.la&&(c=0,++b>=a.ca)))){g=sj.Xa;break}}return m?m(g,b,c,d,e,f):g};
k.Ze=function(a,b,c,d,e,f){this.B=f&65535;this.b=this.b&~T.Va|f>>16-T.ja.Va&T.Va;this.u=f>>16&tj.Ya;this.j=this.i=b<<uj.ja.$b|(c?uj.Cc:0)|d&uj.Vd;this.w=65536-e&65535;a&&(this.b=this.b|a|T.cb);return!0};k.Bg=function(){return this.b&T.Zb};
k.Th=function(a){this.b=this.b&~T.Qa|a&T.Qa;this.u=this.u&60|(a&T.Va)>>T.ja.Va;if(!(this.b&T.Wa)){a=!0;var b="",c=this.g[(this.b&T.nb)>>T.ja.nb],d=c.ba;this.b&=~T.Ca;switch(this.b&T.ua){case vj.pf:this.w&wj.Md&&(this.b&=T.Ca|T.ua|T.Va);this.w=c.status|this.j&uj.Cc|(d&&512==d.ca?wj.Ie:0);break;case vj.Dc:if((this.i&uj.He)==uj.lf){var e=this.i&uj.$b;b=(this.i&uj.nf)<<2;this.j=this.i&uj.mf?this.j+e:this.j-e;this.i=this.j=this.j&uj.$b|b}break;case vj.Te:this.w=this.j;break;case vj.Qe:b="READ",e=this.Nb;
case vj.rf:b||(b="WRITE");e||(e=this.Oc);var f=this.i>>uj.ja.$b;var g=this.i&uj.Cc?1:0;var h=this.i&uj.Vd;!d||f>=d.ca||h>=d.ma?this.b=this.b|sj.Xa|T.cb:(a=65536-this.w&65535,d=(this.u&tj.Ya)<<16|this.B,F(this)&&G(this,this.type+": "+b+"("+f+":"+g+":"+h+") "+v(d)+"--"+v(d+(a<<1)),!0,!0),a=e.call(this,c,f,g,h,a,d,2,!1,this.Ze.bind(this)))}a&&(this.b=this.b|T.Ca|T.Wa,this.b&T.Cb&&Cd(this.f,this.Na))}};k.zg=function(){return this.B};k.Rh=function(a){this.B=a&xj.Qa};k.Cg=function(){return this.i};
k.Uh=function(a){this.i=a};k.Dg=function(){return this.w};k.Vh=function(a){this.w=a};k.Ag=function(){return this.u};k.Sh=function(a){this.u=a&tj.Ya;this.b=this.b&~T.Va|(this.u&3)<<T.ja.Va};
var T=bc.bf,xj=bc.$e,uj=bc.cf,wj=bc.Bc,tj=bc.af,sj=bc.Ld,vj=bc.ua,yj={},rj=(yj[63744]=[null,null,ae.prototype.Bg,ae.prototype.Th,"RLCS"],yj[63746]=[null,null,ae.prototype.zg,ae.prototype.Rh,"RLBA"],yj[63748]=[null,null,ae.prototype.Cg,ae.prototype.Uh,"RLDA"],yj[63750]=[null,null,ae.prototype.Dg,ae.prototype.Vh,"RLMP"],yj[63752]=[null,null,ae.prototype.Ag,ae.prototype.Sh,"RLBE"],yj);
function be(a){vi.call(this,"RX11",a,1048576,cc,cc.df,zj);this.H=this.F=this.i=this.K=this.b=this.B=0;this.j=V.Eb;this.u=0;this.w=Array(128).fill(0)}t(be,vi);k=be.prototype;k.wb=function(a){a?(a=ba(a),this.b=a.next().value,this.B=a.next().value,this.H=a.next().value,this.F=a.next().value,this.i=a.next().value,this.K=a.next().value,this.j=a.next().value,this.u=a.next().value,this.w=a.next().value):(this.B=this.b=0,this.F=this.H=1,this.K=this.i=0,this.j=V.ob,this.u=0,Id(this.f,this.Na),Aj(this));return!0};
k.Kc=function(){return[this.b,this.B,this.H,this.F,this.i,this.K,this.j,this.u,this.w]};k.qe=function(a){0==a&&this.wb()};function Bj(a,b){b&&(a.K=b,a.B=a.i,a.b|=W.cb);a.j=V.Eb;a.b|=W.DONE;a.b&W.Cb&&Cd(a.f,a.Na)}
k.Nb=function(a,b,c,d,e,f,g,h,m){h=0;var l=a.ba,n=null;F(this)&&G(this,this.type+".readData("+b+":"+c+":"+d+") "+v(f)+"--"+v(f+(e<<1)),!0,!0);l||(h=a.Mb?Cj.$c:Cj.Zc,e=0);for(;e;){if(!n){if(b>=l.ca){h=Cj.Ne;break}n=l.seek(b,c,d+1);if(!n){h=Cj.jd;break}var p=0;++d>=l.ma&&(d=0,++c>=l.la&&(c=0,++b))}var r;if(0>(a=l.read(n,p++))||0>(r=l.read(n,p++))){h=Cj.hd;break}Oc(this.C,cf(this.f,f),a|r<<8);p>=l.sa&&(n=null);f+=g;e--}return m?m(h,b,c,d,e,f):h};
function Aj(a){var b=0,c=a.b&W.nd?1:0,d=a.g[c];d=d&&d.ba;var e=a.H&Dj.Ya,f=a.F&Ej.Ya;a.i&=~(Fj.Hd|Fj.Rd|Fj.Wb|Fj.Ca);if(d)if(a.i|=Fj.Ca,F(a)&&G(a,a.type+".readSector("+e+":0:"+f+")",!0,!0),c=d.seek(e,0,f,!0)){e=0;for(f=a.w.length;e<f;){var g=d.read(c,e);if(0>g){b=Cj.hd;break}a.w[e++]=g}c.zf&&(a.i|=Fj.Wb)}else b=Cj.jd;else b=c?Cj.$c:Cj.Zc;Bj(a,b)}
k.Fg=function(a,b){a=this.b;if(!b)switch(a&=W.Zb,this.j){case V.Vc:case V.EMPTY:this.u<this.w.length&&(this.b|=W.Za);break;case V.ob:case V.ac:case V.Ec:2>this.u&&(this.b|=W.Za)}return a};
k.Xh=function(a){this.b=this.b&~W.Qa|a&W.Qa;if(this.b&W.INIT)this.wb();else if(this.b&W.Xb&&this.j==V.Eb)switch(this.j=this.b&W.ua,this.b&=~(W.Xb|W.Za|W.DONE|W.cb),Id(this.f,this.Na),F(this)&&G(this,this.type+".processCommand("+Gj[this.j>>1]+")",!0,!0),this.j){case V.Vc:case V.EMPTY:case V.ob:case V.ac:case V.Ec:this.u=0;break;case V.Se:a=this.g[this.b&W.nd?1:0];this.i&=~Fj.Ca;a&&a.ba&&(this.i|=Fj.Ca);this.B=this.i;Bj(this);break;case V.Re:this.B=this.K,Bj(this)}else this.b&W.Cb?this.b&W.DONE&&Cd(this.f,
this.Na):Id(this.f,this.Na)};k.Gg=function(a,b){if(!b)switch(this.j){case V.EMPTY:this.b&W.Za&&(this.b&=~W.Za,this.B=this.w[this.u]&255,F(this)&&G(this,this.type+".readByte("+this.u+"): "+w(this.B,2,!0),!0,!0),++this.u>=this.w.length&&Bj(this))}return this.B};
k.Yh=function(a){switch(this.j){case V.Vc:this.b&W.Za&&(this.b&=~W.Za,this.w[this.u]=a&255,F(this)&&G(this,this.type+".writeByte("+this.u+","+w(a,2,!0)+")",!0,!0),++this.u>=this.w.length&&Bj(this));break;case V.ob:case V.ac:case V.Ec:if(this.b&W.Za)switch(this.b&=~W.Za,this.u++){case 0:this.F=a;break;case 1:if(this.H=a,this.j==V.ob)Aj(this);else{var b=this.j==V.Ec,c=0,d=this.b&W.nd?1:0,e=this.g[d];e=e&&e.ba;var f=this.H&Dj.Ya,g=this.F&Ej.Ya;this.i&=~(Fj.Hd|Fj.Rd|Fj.Wb|Fj.Ca);if(e)if(this.i|=Fj.Ca,
F(this)&&G(this,this.type+".writeSector("+f+":0:"+g+")",!0,!0),d=e.seek(f,0,g,!0))for(b&&(d.zf=!0),b=0,f=this.w.length;b<f;){if(!e.write(d,b,this.w[b]&255)){c=Cj.hd;break}b++}else c=Cj.jd;else c=d?Cj.$c:Cj.Zc;Bj(this,c)}}}this.B=a};var W=cc.ef,Dj=cc.hf,Ej=cc.gf,Fj=cc.ff,V=cc.ua,Cj=cc.Ge,Gj="FILL EMPTY WRITE READ UNUSED RDSTAT WRDEL RDERR".split(" "),Hj={},zj=(Hj[65144]=[null,null,be.prototype.Fg,be.prototype.Xh,"RXCS"],Hj[65146]=[null,null,be.prototype.Gg,be.prototype.Yh,"RXDB"],Hj);
function Ij(a){A.call(this,"Debugger",a,-1);this.V=+a.base||16;this.O=["{","}"];this.ha=["[","]"];this.Pa=this.A=0;this.R=!1;this.w=-1;this.u=[];this.i={}}t(Ij,A);Ij.prototype.le=function(){return-1};Ij.prototype.ud=function(){};
function Jj(a,b,c,d){if(c)if(b){0>a.w&&a.u.length&&(a.w=0);if(0>a.w||b!=a.u[a.w])a.u.splice(0,0,b),a.w=0;a.w--}else a.R?b="end":b=a.u[a.w+1];a=[];if(b){b=b.replace(/""/g,"'");c=0;var e=null;d=d||";";for(var f=0;f<=b.length;f++){var g=b.charAt(f);if('"'==g||"'"==g)e?g==e&&(e=null):e=g;else if(g==d&&!e||!g)a.push(Ja(b.substring(c,f))),c=f+1}}return a}
function Kj(a,b,c){var d=a;b=b||32;if(c)if(32==b)d=a>>>0;else if(32>b)d=a&(1<<b)-1;else{if(b=Math.pow(2,b),0>a||a>=b)d=a%b,0>d&&(d+=b)}else 32>=b?d=a<<32-b>>32-b:(b=Math.pow(2,b-1),a>=b?(d=a%b,(a/b|0)&1&&(d-=b)):a<-b&&(d=a%b,((-a-1)/b|0)&1?d&&(d+=b):d||(d-=b)));a!=d&&(a=d);return a}
function Lj(a,b,c){for(c=void 0===c?-1:c;c--&&b.length;){var d=b.pop();if(2>a.length)return!1;var e=a.pop();var f=a.pop();switch(d){case "*":f*=e;break;case "/":if(!e)return!1;f=Math.trunc(f/e);break;case "^/":if(!e)return!1;f%=e;break;case "+":f+=e;break;case "-":f-=e;break;case "<<":f<<=e;break;case ">>":f>>=e;break;case ">>>":f>>>=e;break;case "<":f=f<e?1:0;break;case "<=":f=f<=e?1:0;break;case ">":f=f>e?1:0;break;case ">=":f=f>=e?1:0;break;case "==":f=f==e?1:0;break;case "!=":f=f!=e?1:0;break;
case "&":f&=e;break;case "!":case "|":f|=e;break;case "^!":f|=e;break;case "&&":f=f&&e?1:0;break;case "||":f=f||e?1:0;break;case ",,":f=Kj(f,18,!0)*Math.pow(2,18)+Kj(e,18,!0);break;case "_":case "^_":"^_"==d&&(e=35-(e&255));e&&(f=Kj(f,0,!0),f=0<e?f*Math.pow(2,e):Math.trunc(f/Math.pow(2,-e)));break;default:return!1}a.push(Kj(f))}return!0}
function Mj(a,b,c,d,e,f){var g,h=!1,m=0,l=[],n=[],p=a.V;for(a.V=e;c<d;){var r=b[c++].trim();var q=c<d?b[c++]:"";if(r)var u=Nj(a,r,void 0,f,m);else if("{"==q){r=1;for(u=c;c<d;)if(c++,q=c<b.length?b[c++]:"","{"==q)r++;else if("}"==q&&!--r)break;u=Mj(a,b,u,c-1,a.V,f);null!=u&&m&&(u=Oj(u,m));r=c<d?b[c++].trim():"";q=c<d?b[c++]:""}else{if(" "==q)continue;if("^B"==q){a.V=2;continue}if("^O"==q){a.V=8;continue}if("^D"==q){a.V=10;continue}if(!(m&-1073741824)){if("+"==q)continue;if("-"==q){m=m<<2|1;continue}if("~"==
q||"^-"==q){m=m<<2|2;continue}if("^L"==q){m=m<<2|3;continue}}h=!0;break}if(void 0===u)if(f)f.push(r),u=0;else{h=!0;f=[];break}l.push(Kj(u));if(" "==q)if(c<b.length-1&&!b[c])c++,q=b[c++];else{h=!0;break}if(!q)break;m="<"==a.O[0]?Pj:Qj;if(!m[q]){h=!0;break}n.length&&m[q]<=m[n[n.length-1]]&&Lj(l,n,1);n.push(q);a.V="^_"==q?10:e;m=0}if(h||!Lj(l,n)||1!=l.length)h=!0;h?f||a.v("parse error ("+(r||q)+")"):g=l.pop();a.V=p;return g}
function Rj(a,b,c,d,e){for(var f;0<=(f=b.indexOf(c));){for(var g=0,h=f+1,m=e;h<b.length;){var l=b[h++];if(l==c){m=-1;break}if(!m)break;m--;l=l.charCodeAt(0);7==d?l&=127:l=l-32&63;g=Kj(g*Math.pow(2,d)+l,d*e,!0)}if(0<=m){a.v("parse error ("+c+b+c+")");return}b=b.substr(0,f)+I(a,g,-1)+b.substr(h)}return b}
function Sj(a,b,c){var d=void 0,e=!1===c;c=Array.isArray(c)?c:void 0;if(b){"{"!=a.O[0]&&(b=b.split(a.O[0]).join("{").split(a.O[1]).join("}"));b=Rj(a,b,'"',7,5);if(!b)return d;b=Rj(a,b,"'",6,6);if(!b)return d;16!=a.V&&(b=b.replace(/(^|[^A-Z0-9$%.])([0-9]+)B/,"$1$2^_").replace(/\s+/g," "));b=b.split(/({|}|\|\||&&|\||\^!|\^B|\^O|\^D|\^L|\^-|~|\^_|_|&|!=|!|==|>=|>>>|>>|>|<=|<<|<|-|\+|\^\/|\/|\*|,,| )/);d=Mj(a,b,0,b.length,a.V,c);void 0!==d&&e&&Tj(a,null,d)}return d}
function Oj(a,b){for(;b;){var c;switch(b&3){case 1:a=-Kj(a);break;case 2:a|=-1;break;case 3:for(c=35;0<=c&&!(a&Math.pow(2,c));)c--;a=35-c}b>>>=2}return a}
function Nj(a,b,c,d,e){e=void 0===e?0:e;var f=Array.isArray(d)?d:void 0;if(void 0!=b){var g=a.le(b);if(0<=g)g=a.ud(g);else if(g=b,a.i[g]?g=a.i[g].value:(g=g.substr(0,6),g=a.i[g]&&a.i[g].value),void 0!=g){var h=a.i[b]&&a.i[b].dh;h&&(f?f.push(h):(f=Sj(a,h,d),void 0!==f?g+=f:(d||a.v("undefined "+(c||"value")+": "+b+" ("+h+")"),g=void 0)))}else g=qa(b,1<b.length||10<a.V?a.V:10);void 0!=g?g=Kj(Oj(g,e)):d||a.v("invalid "+(c||"value")+": "+b)}else d||a.v("missing "+(c||"value"));return g}
function Tj(a,b,c){var d=!1;if(void 0!==c){d=!0;var e=8==a.V?I(a,c,32,8,1)+"  "+c+".":I(a,c,32,16,1)+"  "+I(a,c,32,8,1)+"  "+I(a,c,32,2,8)+"  "+c+".";32<=c&&127>c&&(e+=" '"+String.fromCharCode(c)+"'")}a.v((null!=b?b+": ":"")+e);return d}function Uj(a,b){var c=0;if(a.i){if(b)return Tj(a,b,a.i[b]&&a.i[b].value);b=Object.keys(a.i);b.sort();for(var d=0;d<b.length;d++)Tj(a,b[d],a.i[b[d]].value),c++}return 0<c}
function I(a,b,c,d,e){c=void 0===c?0:c;e=void 0===e?0:e;switch((void 0===d?0:d)||a.V){case 2:a=ta(b,0<c?c:0,e);break;case 8:a=v(b,0<c?(c+2)/3|0:0,!!e);break;case 10:a=ua(b,0<c?Math.ceil(.3*c):0);break;default:a=w(b,0<c?c+3>>2:0,!!e)}return c=0>c?a.replace(/^0+([0-9A-F]+)$/i,"$1"):a}
var Qj={"||":5,"&&":6,"!":7,"|":7,"^!":8,"&":9,"!=":10,"==":10,">=":11,">":11,"<=":11,"<":11,">>>":12,">>":12,"<<":12,"-":13,"+":13,"^/":14,"/":14,"*":14,_:19,"^_":19,"{":20,"}":20},Pj={",,":1,"||":5,"&&":6,"!=":10,"==":10,">=":11,">":11,"<=":11,"<":11,">>>":12,">>":12,"<<":12,"-":13,"+":13,"^/":14,"/":14,"*":14,"!":15,"|":15,"^!":15,"&":15,_:19,"^_":19,"{":20,"}":20};
function Vj(a){Ij.call(this,a);this.Ea=!1;this.O=["(",")"];this.ha=[];this.K=X();this.Da=X();this.P=X();this.B=[];this.b=this.M=this.H=[];Wj(this);this.T=this.ea=0;this.j=[];this.qa=void 0;Xj(this);this.D=this;this.ia={};this.ga=0;this.W=null;this.N=[];Yj(this,a.messages);this.va=a.commands;this.Ha=Zj;this.X=[];this.L=0;this.Ia=this.ra=null;this.A=this.Ga=this.Fa=this.Y=this.oa=0;this.g=this.F=null;var b=this;window?void 0===window[B]&&(window[B]=function(c){return Ae(b,c)}):void 0===global[B]&&(global[B]=
function(c){return Ae(b,c)})}t(Vj,Ij);function ak(a){a=a&&a.J;null==a&&(a=-1);return a}function X(a,b,c){return{J:void 0===a?null:a,Ka:void 0===b?!1:b,Ra:!1,V:c}}k=Vj.prototype;k.Ad=function(a,b){a.J=b;a.Ra=!1;a.V=void 0};function bk(a){return[a.J,a.Ka,a.V,a.Ra,a.Ic]}function ck(a,b){var c=X(b[0],b[1],b[2]);c.Ra=b[3];b[4]&&(c.ce=Jj(a,c.Ic=b[4]));return c}
k.ya=function(a,b,c,d){this.C=b;this.I=a;this.f=c;this.g=a.i;(a=ve(a,"messages"))&&Yj(this,a);1140>this.f.ha&&(this.X=this.X.concat(dk));1145>this.f.ha&&(this.X=this.X.concat(ek));Gd(this,32,function(e){a:{var f=d.C.b,g=e[0],h=e=0,m=f.length;if(g){e=ak(fk(d,g));if(-1===e){d.v("invalid address: "+g);break a}h=e>>>d.C.g;m=1}d.v("blockid   physical   blockaddr  used    size    type");d.v("--------  ---------  ---------  ------  ------  ----");g=-1;for(var l=0;m--;){var n=f[h];n.type==g?l++||d.v("..."):
(g=n.type,l=rd[g],n&&d.v(w(n.id,8)+"  %"+w(h<<d.C.g,8)+"  %"+w(n.J,8)+"  "+va(n.Qb)+"  "+va(n.size)+"  "+l),g!=de&&(g=-1),l=0);e+=d.C.j;h++}}});E(this)};
k.ta=function(a,b,c){var d=this;switch(b){case "debugInput":return this.F=this.G[b]=c,c.onkeydown=function(e){if(13==e.keyCode){var f=d.F.value;d.F.value="";Ae(d,f,!0)}else if(27==e.keyCode)d.F.value=f="";else if(38==e.keyCode?(f=null,d.w<d.u.length-1&&(f=d.u[++d.w])):40==e.keyCode&&(0<d.w?f=d.u[--d.w]:(f="",d.w=-1)),null!=f){var g=f.length;d.F.value=f;d.F.setSelectionRange(g,g)}null!=f&&e.preventDefault&&e.preventDefault()},!0;case "debugEnter":return this.G[b]=c,fb(c,function(){if(d.F){var e=d.F.value;
d.F.value="";Ae(d,e,!0);return!0}return!1}),!0;case "step":return this.G[b]=c,fb(c,function(e){var f=!1;Sb(d,!0)||(Tb(d,!0),f=Ic(d,e?1:0,null),Tb(d,!1));return f}),!0}return!1};function ze(a){if(a.F){var b=0,c=0;window&&(b=window.scrollX,c=window.scrollY);a.F.focus();window&&window.scrollTo(b,c)}}k.Jd=function(a,b){var c=255,d=ak(a);-1!==d&&(a.Ka||65535<d?(c=this.C,d=cf(this.f,d),c.B=!1,c.ka++,d=td(c,d).j(d&c.i,d),c.ka--):(c=this.f,c.oa++,d=c.C.Fd(Pc(c,d,3)),c.oa--),c=d,b&&gk(a,b));return c};
k.Oa=function(a,b){var c=65535,d=ak(a);-1!==d&&(c=a.Ka||65535<d?Qc(this.C,cf(this.f,d)):ad(this.f,d),b&&gk(a,b));return c};k.Kd=function(a,b,c){var d=ak(a);if(-1!==d){if(a.Ka||65535<d)ud(this.C,cf(this.f,d),b);else{var e=this.f;e.oa++;e.C.Gd(Pc(e,d,5),b);e.oa--}c&&gk(a,c);Mc(this.I,-1)}};k.Fe=function(a,b,c){var d=ak(a);if(-1!==d){if(a.Ka||65535<d)Oc(this.C,cf(this.f,d),b);else{var e=this.f;e.oa++;e.C.Ub(Pc(e,d,4),b);e.oa--}c&&gk(a,c);Mc(this.I,-1)}};
function fk(a,b,c){c=(c?a.K:a.Da).J;var d;if(void 0!==b){a:{var e=a.O[0];c=a.O[1];var f="("==e||"{"==e||"["==e?"\\":"";var g="["==e?"\\":"";for(g=new RegExp(f+e+"([^"+g+e+g+c+"]+)"+f+c);f=b.match(g);){var h=Sj(a,f[1]);if(void 0===h){b=void 0;break a}b=b.replace(e+f[1]+c,null!=h?I(a,h):"undefined")}if(a.ha.length)for(e=a.ha[0],c=a.ha[1],f="("==e||"{"==e||"["==e?"\\":"",g="["==e?"\\":"",g=new RegExp(f+e+"([^"+g+e+g+c+"]+)"+f+c);f=b.match(g);)b=b.replace("["+f[1]+"]","unimplemented");for(;e=b.match(/\$([a-z]+)/i);){c=
null;switch(e[1].toLowerCase()){case "ops":c=a.Pa}if(null==c)break;b=b.replace(e[0],c.toString())}}if("%"==b.charAt(0)){var m=!0;b=b.substr(1)}e=b;var l;a:{c=a.C;f=e.toUpperCase();for(n in c.Ma)if(g=+n,c.Ma[g][4]==f){var n=c.A+g;break a}n=null}if(null==n&&e.match(/^[a-z_][a-z0-9_]*$/i))for(e=e.toUpperCase(),c=0;c<a.B.length;c++)if(f=a.B[c].fa[e],null!=f){n=f.o;break}null!=n&&(l=X(n));if(e=l)return e;0<=b.indexOf("0x")?d=16:0<=b.indexOf("0o")?d=8:0<=b.indexOf(".")&&(d=10);c=Sj(a,b)}null!=c&&(e=X(c,
m,d));return e}function hk(a,b,c){c&&(c=c.match(/(['"])(.*?)\1/))&&(b.ce=Jj(a,b.Ic=c[2]))}function gk(a,b){null!=a.J&&(a.J+=b||1)}function ik(a,b){return(b.Ka?"%":"")+I(a,b.J)}
function Yj(a,b){a.D=a;a.ga=268435456;a.W=null;a.N=[];b=Jj(a,b.replace("keys","key").replace("kbd","keyboard"),!1,"|");if(b.length)for(var c in jc){a:{var d=void 0;if(Array.prototype.indexOf)d=b.indexOf(c,d);else{d=d||0;0>d&&(d+=b.length);0>d&&(d=0);for(var e=b.length;d<e;d++)if(d in b&&b[d]===c)break a;d=-1}}0<=d&&(a.ga|=jc[c],a.v(c+" messages enabled"))}}function Gd(a,b,c){for(var d in jc)if(b==jc[d]){a.ia[d]=c;break}}
k.le=function(a){a=a.toUpperCase();var b=jk[a];null==b&&(b=-1,"R"==a.charAt(0)&&(b=+a.charAt(1),0>b||7<b))&&(b=-1);return b};function kk(a,b){if(b<lk||a.g)var c=mk[b];return c||""}
k.ud=function(a){if(0<=a)if(8>a)var b=this.f.g[a];else if(16>a)b=this.f.ra[a-8];else if(20>a)b=this.f.X[a-16];else{var c=this.f,d=this.g;switch(a){case nk:b=Pd(this.f);break;case ok:b=c.kb;break;case pk:b=c.O;break;case qk:b=c.Da&65280;break;case rk:b=Jd(c);break;case sk:b=Ld(c);break;case tk:b=Md(c);break;case uk:b=c.W;break;case lk:d&&(b=d.da);break;case vk:d&&(b=d.yb);break;case wk:d&&(b=d.Ta)}}return b};
k.message=function(a,b){b&&(a+=" @"+ik(this,X(this.f.N&65535)));if(!this.W||a!=this.W)if(this.W=a,this.ga&1073741824)this.N.push(a);else{var c;if(this.ga&536870912&&this.f&&(c=this.f.flags.U)||Sb(this,!0))xk(this),c&&(a+=" (cpu halted)");this.v(a);this.f&&(a=this.f,Ge(a),a.ub=0,a.I&&Mc(a.I,void 0))}};
function Xj(a){var b;if(!If(a))a.j&&a.j.length&&a.v("instruction history buffer freed"),a.T=0,a.j=[];else if(!a.j||!a.j.length){a.j=Array(yk);for(b=0;b<a.j.length;b++)a.j[b]=X();a.T=0;a.v("instruction history buffer allocated")}}function zk(a,b,c){if(!Ak(a,c))return!1;Gc(a.f,b);return!0}
function Ic(a,b,c,d){if(!Ak(a))return!1;var e="";null===c&&(e=(c=!a.ra||"tr"==a.ra)?"tr":"t");a.A=0;b||If(a)&&Jf(a,a.f.g[7],0);try{b=He(a.f,b);var f=a.f.uc(b);0<f&&(Jc(a.f,f),a.A+=f,Kc(a.f,f,!0),Lc(a.f,f),a.Y++)}catch(g){"number"!=typeof g&&(b=g,a.A=0,Pb(a.f,b.stack||b.message))}!1!==d&&(a.g&&a.g.stop(),Mc(a.I,-1));ye(a,c||!1,e);return 0<a.A}function xk(a,b){a.f&&Hc(a.f,b)}
function ye(a,b,c){if(a.Ea){void 0===b&&(b=!0);c&&a.v(Bk+c);c=a.f;if(c=c.i&128?c.wc|c.vc<<8:0){var d=c>>8;a.v("trapped to "+I(a,c&255,8)+" ("+(0>d?$b[-d]:I(a,d))+")")}a.K=X(a.f.g[7]);b&&1!=a.L?Ck(a):Dk(a)}}function Ak(a,b){var c;(c=!a.f||!Rb(a.f))||(c=a.f,c.flags.aa?c=!0:(c.v(c.toString()+" not powered"),c=!1),c=!c);return c||a.f.flags.U?(b||a.v("cpu busy or unavailable, command ignored"),!1):!Qb(a.f)}k.Aa=function(a,b){return!b&&(this.reset(!0),a)?this.restore(a):!0};
k.za=function(a,b){b&&this.v(a?"suspending":"shutting down");return a?this.save():!0};k.reset=function(a){Xj(this);this.Y=0;this.W=null;this.A=0;this.K=X(this.f.g[7]);this.flags.U=!1;Ek(this);a||ye(this)};k.save=function(){var a=new wc(this);a.set(0,bk(this.K));a.set(1,bk(this.P));a.set(2,[this.u,this.R,this.ga]);a.set(3,this.B);return a.data()};
k.restore=function(a){var b=0;void 0!==a[2]&&(this.K=ck(this,a[b++]),this.P=ck(this,a[b++]),this.u=a[b][0],"string"==typeof this.u&&(this.u=[this.u]),this.R=a[b][1],this.ga|=a[b][2]);a[3]&&(this.B=a[3]);return!0};k.start=function(a,b){this.L||this.v("running");this.flags.U=!0;this.Fa=a;this.Ga=b};
k.stop=function(a,b){if(this.flags.U){this.flags.U=!1;this.A=b-this.Ga;if(!this.L){b="stopped";if(this.A){a-=this.Fa;var c=0<a?Math.round(1E3*this.A/a):0;b+=" (";If(this)&&(b+=this.Y+" instructions, ",this.Y=0);b+=this.A+" cycles, "+a+" ms, "+c+" hz)"}else F(this,536870912)&&(b+=" (use the 't' command to execute blocked faults)");this.v(b)}ye(this,!0);ze(this);Ek(this,this.f.g[7]);this.W=null}};function If(a){return 1<a.b.length||!!a.ea}
function Jf(a,b,c){var d=-1;c||(d=ad(a.f,b),0==d&&(a.f.N&65535)==b&&(b=Ue(a.f,2)));if(0<c&&(a.ea&&!--a.ea||Fk(a,b,1,a.b)))return!0;0<=c&&a.j.length&&(a.Y++,0>d&&(d=ad(a.f,b)),65535!=(d&65535)&&(a.Ad(a.j[a.T],b),++a.T==a.j.length&&(a.T=0)));return!1}function Og(a){var b=a.f;if(b.flags.U)throw Dc(b,a.f.N&65535),xk(a),-1;return!1}function pe(a,b,c){Fk(a,b,c||1,a.M)&&xk(a,!1)}function qe(a,b,c){Fk(a,b,c||1,a.H)&&xk(a,!1)}
function Wj(a){var b;a.b=["bp"];if(void 0!==a.M)for(b=1;b<a.M.length;b++){var c=a.M[b];var d=ak(c);c.Ka?(c=a.C,oe(c.b[d>>>c.g],!1)):ff(a.f,!1)}a.M=["br"];if(void 0!==a.H)for(b=1;b<a.H.length;b++)c=a.H[b],d=ak(c),c.Ka?(c=a.C,oe(c.b[d>>>c.g],!0)):ff(a.f,!0);a.H=["bw"];a.oa=0;a.ea=0}
k.vb=function(a,b,c){var d=!0;c||Gk(this,a,b,!1,!0);if(a!=this.b){var e=ak(b);if(-1===e)this.v("invalid address: "+ik(this,b)),d=!1;else{var f=a==this.H;65535<e&&(b.Ka=!0);if(b.Ka){var g=this.C;g.b[e>>>g.g].vb(e&g.i,f)}else e=this.f,(f?e.mc++:e.kc++)||Ne(e)}}d&&(a.push(b),c?b.Ra=!0:(Hk(this,a,a.length-1,"set"),Xj(this)))};
function Gk(a,b,c,d,e){var f=!1;c=ak(c);for(var g=1;g<b.length;g++){var h=b[g];if(c==ak(h)&&(!d||h.Ra)){f=!0;h.Ra||e||Hk(a,b,g,"cleared");b.splice(g,1);b!=a.b&&(b=b==a.H,h.Ka?(d=a.C,oe(d.b[c>>>d.g],b)):ff(a.f,b));h.Ra||Xj(a);break}}return f}function Ik(a,b){for(var c=1;c<b.length;c++)Hk(a,b,c);return b.length-1}function Hk(a,b,c,d){c=b[c];a.v(b[0]+" "+ik(a,c)+(d?" "+d:c.Ic?' "'+c.Ic+'"':""))}
function Ek(a,b){if(void 0!==b)Fk(a,b,1,a.b,!0),a.L=0;else for(b=1;b<a.b.length;b++){var c=a.b[b];if(c.Ra){if(!Gk(a,a.b,c,!0))break;b=0}}}
function Fk(a,b,c,d,e){var f=!1;if(!a.oa++)for(var g=1;!f&&g<d.length;g++){var h=d[g];if(!e||h.Ra)for(var m=ak(h)&(d==a.b?65535:-1),l=0;l<c;l++)if(b+l==m){var n;f=!0;h.Ra&&(Gk(a,d,h,!0),e=!0);if(n=h.ce){f=!1;for(var p=0;p<n.length;p++)if(!Jk(a,n[p],!0)){if(n[p].indexOf("if")){f=!0;break}for(var r=p+1;r<n.length&&n[r].indexOf("else");r++)p++;if(r==n.length){f=!0;break}}a.f.flags.U||(f=!0)}if(f){e||Hk(a,d,g,"hit");break}}}a.oa--;return f}
function Kk(a,b,c,d){var e=X(b.J),f=a.Oa(b,2),g,h;for(h in a.Ha)if(g=a.Ha[h][f&h])break;g||(g=Lk);var m=g[0];0<=a.X.indexOf(m)&&(g=Lk,m=g[0]);var l=h="",n=Mk[m],p=g.length-1;m||p||(h=I(a,f));for(m=1;m<=p;m++){var r=g[m];if(void 0!==r){var q=a;var u=r;r=b;var y="";var x=u&Nk;if(x==Y)r=r.J+((f&255)<<24>>23)&65535,y=I(q,r);else if(x==Ok)r=r.J-((f&63)<<1)&65535,y=I(q,r);else if(x==Pk)y=I(q,f&7,3);else if(x==Qk)y=I(q,f&63,6);else if(x==Rk)y=I(q,f&255,8);else if(x=f&u,u&Sk&&(x>>=6,u>>=6),u&Z){u=null;var C=
x&Tk;switch(x&Uk){case 0:y=kk(q,C);break;case 8:y="@"+kk(q,C);u=Vk(q,q.f.g[C]);break;case 16:7>C?y="("+kk(q,C)+")+":(x=q.Oa(r,2),y="#"+I(q,x,-1));break;case 24:7>C?y="@("+kk(q,C)+")+":(x=q.Oa(r,2),y="@#"+I(q,x,-1),u=Vk(q,x));break;case 32:y="-("+kk(q,C)+")";break;case 40:y="@-("+kk(q,C)+")";break;case 48:x=q.Oa(r,2);y=I(q,x,-1)+"("+kk(q,C)+")";7==C&&(y=I(q,x=x+r.J&65535),u=Vk(q,x));break;case 56:x=q.Oa(r,2),y="@"+I(q,x)+"("+kk(q,C)+")",7==C&&(y="@"+I(q,x=x+r.J&65535),u=Vk(q,ad(q.f,x)))}u&&(y=[y,u])}q=
y;if(!q||!q.length){h="INVALID";break}"string"!=typeof q&&(l=q[1],q=q[0]);0<h.length&&(h+=",");h+=q||"???"}}f="";g=ik(a,e)+":";if(-1!==e.J&&-1!==b.J){do if(f+=" "+I(a,a.Oa(e,2)),null==e.J)break;while(e.J!=b.J)}g+=Ba(f,24);g+=Ba(n,5);h&&(g+=" "+h);if(c||l)g=Ba(g,60)+";"+(c||""),g=a.f.flags.Hb?g+("cycles="+Be(a.f).toString()+" cs="+w(a.f.hc)):g+(null!=d?"="+d.toString():""),l&&(";"!=g.slice(-1)&&(g+=" "),g+=l);return g}
function Vk(a,b){b=df(a.f,b)[0];b>=a.f.pb&&b<a.C.A&&(b=b-a.f.pb+a.C.A);var c=a.C;a=null;b>=c.A&&(b=c.Ma[b&yd])&&(a=b[4]);return a}function Wk(a,b){switch(b){case "N":a=Te(a.f);break;case "Z":a=Se(a.f);break;case "V":a=Re(a.f);break;case "C":a=Qe(a.f);break;default:a=0}return b.charAt(0)+(a?"1":"0")+" "}function Xk(a,b){var c=kk(a,b);c&&(c+="="+I(a,a.ud(b))+" ");return c}
function Yk(a,b){var c,d="";for(c=0;6>c;c++)d+=Xk(a,c);d=d+"\n"+(Xk(a,6)+Xk(a,7));d+=Xk(a,nk)+Xk(a,ok)+Xk(a,qk);d+=Wk(a,"T")+Wk(a,"N")+Wk(a,"Z")+Wk(a,"V")+Wk(a,"C");b&&(b=d,c=Xk(a,rk)+Xk(a,sk),c+=Xk(a,tk)+Xk(a,uk)+Xk(a,pk),c=c+"\n"+(Xk(a,wk)+Xk(a,lk)+Xk(a,vk)),d=b+("\n"+c));return d}k.ge=function(a,b){return a[0]>b[0]?1:a[0]<b[0]?-1:0};
function Oh(a,b,c,d,e){var f=[],g;for(g in e){var h=e[g];"number"==typeof h&&(e[g]=h={o:h});var m=h.o,l=h.a;if(void 0!==m){var n=f;m=[m>>>0,g];var p=Ma(n,m,a.ge);0>p&&n.splice(-(p+1),0,m)}l&&(h.a=l.replace(/''/g,'"'))}a.B.push({Fk:b,J:c,Gf:d,fa:e,de:f})}function Zk(a,b,c){var d=[],e=ak(b)>>>0;for(b=0;b<a.B.length;b++){var f=a.B[b],g=f.J>>>0,h=f.Gf;if(e>=g&&e<g+h){e=Ma(f.de,[e-g],a.ge);0<=e?$k(a,b,e,d):c&&(e=~e,$k(a,b,e-1,d),$k(a,b,e,d));break}}return d}
function $k(a,b,c,d){var e={},f=a.B[b].de,g=0,h=null;0<=c&&c<f.length&&(g=f[c][0],h=f[c][1]);h&&(e=a.B[b].fa[h],h="."==h.charAt(0)?null:e.l||h);d.push(h);d.push(g);d.push(e.a);d.push(e.c)}function al(a,b){var c=b.match(/^\s*([A-Z_]?[A-Z0-9_]*)\s*(=?)\s*(.*)$/i);if(c){if(!c[1])return Uj(a)||a.v("no variables"),!0;if(!c[2])return Uj(a,c[1]);if(!c[3])return delete a.i[c[1]],!0;b=Sj(a,c[3]);return void 0!==b?(a.i[c[1]]={value:b,dh:void 0},!0):!1}a.v("invalid assignment:"+b);return!1}
function bl(a,b,c){var d=null;if(b=fk(a,b,!0)){var e=Zk(a,b,!0);if(e.length){var f;if(e[0]){var g="";(f=b.J-e[1])&&(g=" + "+va(f));f=e[0]+" ("+I(a,e[1])+")"+g;c&&a.v(f);d=f}4<e.length&&e[4]&&(g="",(f=e[5]-b.J)&&(g=" - "+va(f)),f=e[4]+" ("+I(a,e[5])+")"+g,c&&a.v(f),d||(d=f))}else c&&a.v("no symbols")}return d}
function Ck(a,b){var c;if(b&&"?"==b[1])a.v("register commands:"),a.v("\tr\tdump registers"),a.v("\trm\tdump misc registers"),a.v("\trx [#]\tset flag or register x to [#]");else{var d=!1,e=a.f;null==c&&(c=!0);if(null!=b&&1<b.length){var f=b[1];if("m"==f)d=!0;else{var g=f.indexOf("=");if(0<g)b=f.substr(g+1),f=f.substr(0,g);else if(2<b.length)b=b[2];else{a.v("missing value for "+b[1]);return}g=Sj(a,b);if(void 0===g)return;b=f.toUpperCase();switch(b){case "SP":case "R6":e.g[6]=g&65535;break;case "PC":case "R7":Dc(e,
g);a.K=X(e.g[7]);break;case "N":e.H=g?32768:0;break;case "Z":e.K=g?0:1;break;case "V":e.F=g?32768:0;break;case "C":e.B=g?65536:0;break;case "PS":Zd(e,g);break;case "PI":Od(e,g);break;case "ER":e.O=g;d=!0;break;case "SL":e.Da=g|255;break;case "M0":Kd(e,g);d=!0;break;case "M3":Nd(e,g);d=!0;break;case "AR":a.g&&(d=a.g,xc(d,d.da=g));d=!0;break;case "DR":a.g&&mc(a.g,g);d=!0;break;case "SR":a.g&&yc(a.g,g);d=!0;break;default:if("R"==b.charAt(0)&&(b=+b.charAt(1),0<=b&&6>b)){e.g[b]=g&65535;break}a.v("unknown register: "+
f);return}Mc(a.I);a.v("updated registers:")}}a.v(Yk(a,d));c&&(a.K=X(e.g[7]),Dk(a,ik(a,a.K)))}}function cl(a,b){b=Ja(b);var c=b.match(/^(['"])(.*?)\1$/);c?1<c[2].length?a.v(c[2]):Tj(a,null,c[2].charCodeAt(0)):Sj(a,b,!1)}
function dl(a,b,c){if("?"==c)a.v("trace commands:"),a.v("\tt  [#]\ttrace # instructions"),a.v("\ttr [#]\ttrace # instructions with register updates"),a.v("\ttc [#]\ttrace # cycles"),a.v("note: bn [#] breaks after # instructions without updates");else{var d="t"!=b;c=Nj(a,c,void 0,!0)||1;var e=0;"tc"==b&&(e=c,c=1);a.ra=b;eb(c,function(){return Tb(a,!0)&&Ic(a,e,d,!1)},function(){a.g&&a.g.stop();Mc(a.I,-1);Tb(a,!1)})}}
function Dk(a,b,c,d){if(b=fk(a,b,!0)){void 0===d&&(d=1);var e=256;if(void 0!==c)if("l"==c.charAt(0))c=Nj(a,c.substr(1)),null!=c&&(d=c);else{d=fk(a,c,!0);if(!d||d.J<b.J)return;e=d.J-b.J;if(256<e){a.v("range too large");return}d=-1}c=0;for(var f;0<e&&d--;){f=Sb(a,!1)||a.L?a.A:null;var g=null!=f?"cycles":null,h=Zk(a,b),m=b.J;if(h[0]&&d&&(!c&&d||0>h[0].indexOf("+"))){var l=h[0]+":";h[2]&&(l+=" "+h[2]);a.v(l)}h[3]&&(g=h[3],f=null);f=Kk(a,b,g,f);a.v(f);a.K=b;e-=b.J-m;c++}}}
function Jk(a,b,c){var d=!0;try{b.length&&"end"!=b?c||a.v(Bk+b):(a.R&&(a.v("ended assemble at "+ik(a,a.P)),a.K=a.P,a.R=!1),b="");var e=b.charAt(0);if('"'==e||"'"==e)return!0;a.W=null;if(Rb(a)&&0<b.length){a.R&&(b="a "+ik(a,a.P)+" "+b);var f=!1,g=b.replace(/ +/g," ").split(" ");g[0]=g[0].toLowerCase();if(g&&g.length)for(var h=g[0],m=h.charAt(0),l=1;l<h.length;l++){var n=h.charAt(l);if("?"==m||"r"==m||"a">n||"z"<n){g[0]=h.substr(l);g.unshift(h.substr(0,l));break}}switch(g[0].charAt(0)){case "a":var p=
fk(a,g[1],!0);if(p)if(a.P=p,void 0===g[2])a.v("begin assemble at "+ik(a,p)),a.R=!0,Mc(a.I);else{a.v("not supported yet");var r=[];if(r.length){for(var q=0;q<r.length;q++)a.Kd(p,r[q],1);a.v(Kk(a,a.P))}}break;case "b":a:{var u=g[0],y=g[1],x=b;if("?"==y)a.v("breakpoint commands:"),a.v("\tbp #\tset exec breakpoint"),a.v("\tbr #\tset read breakpoint"),a.v("\tbw #\tset write breakpoint"),a.v("\tbc #\tclear breakpoint (* to clear all)"),a.v("\tbl\tlist all breakpoints"),a.v("\tbn [#]\tbreak after # instruction(s)");
else{var C=u.charAt(1);if("l"==C){var Xa=Ik(a,a.b);Xa+=Ik(a,a.M);(Xa+=Ik(a,a.H))||a.v("no breakpoints")}else if("n"==C){var Ya=+y||0;y&&(a.ea=Ya);a.v("break after "+Ya+" instruction(s)")}else if(void 0===y)a.v("missing breakpoint address");else{var R=X();if("*"!=y&&(R=fk(a,y,!0),!R))break a;"c"==C?null==R.J?(Wj(a),a.v("all breakpoints cleared")):Gk(a,a.b,R)||Gk(a,a.M,R)||Gk(a,a.H,R)||a.v("breakpoint missing: "+ik(a,R)):null!=R.J&&(hk(a,R,x),"p"==C?a.vb(a.b,R):"r"==C?a.vb(a.M,R):"w"==C?a.vb(a.H,R):
a.v("unknown breakpoint command: "+C))}}}break;case "c":var wi=a.I;wi.w&&(wi.w.value="");break;case "d":a:{var dc,rb=g[0],$a=g[1],sb=g[2],Bl=g[3];if("?"==$a){var ec="";for(dc in jc)a.ia[dc]&&(ec&&(ec+=","),ec+=dc);ec+=",state,symbols";a.v("dump memory commands:");a.v("\tda [a]        dump info for address a");a.v("\tdb [a] [n]    dump n bytes at address a");a.v("\tdw [a] [n]    dump n words at address a");a.v("\tdd [a] [n]    dump n dwords at address a");a.v("\tds [a] [n]    dump n words at address a as JSON");
a.v("\tdh [p] [n]    dump n instructions from history position p");ec.length&&a.v("dump extension commands:\n\t"+ec)}else if("state"==$a){var jf=el(a.I,!0);if("console"==sb)console.log(jf);else{var xi=a.I;xi.w&&(xi.w.value="");jf&&a.v(jf)}}else if("symbols"==$a)for(var kf=0;kf<a.B.length;kf++){var lf=a.B[kf],fc;for(fc in lf.fa)if("."!=fc.charAt(0)){var yi=lf.fa[fc].o;if(void 0!==yi){var zi=lf.fa[fc].l;zi&&(fc=zi);a.v(I(a,yi)+" "+fc)}}}else{if("d"==rb){for(dc in jc)if(g[1]==dc){var Ai=a.ia[dc];Ai?
(g.shift(),g.shift(),Ai(g)):a.v("no dump registered for "+$a);break a}$a||(rb=a.Ia||"dw")}else a.Ia=rb;if("dh"==rb){var Bi=$a,Ci=sb,Di="",Ei=0,La=a.T,ab=a.j;if(ab.length){var Ga=+Bi||a.qa,Rc=+Ci||10;isNaN(Ga)?Ga=Rc:Di="more ";Ga>ab.length&&(a.v("note: only "+ab.length+" available"),Ga=ab.length);La-=Ga;0>La&&(null==ab[ab.length-1].J?(Ga=La+Ga,La=0):La+=ab.length);var mf=[];"call"==Ci&&(Rc=1E5,mf=["CALL"]);for(void 0!==Bi&&a.v(Ga+" instructions earlier:");0<Rc&&La!=a.T;){var Fi=ab[La++];if(null==Fi.J)break;
var Sc=X(Fi.J),Cl=Ga--,Gi=Kk(a,Sc,"history",Cl);(!mf.length||0<=Gi.indexOf(mf[0]))&&a.v(Gi);Sc.rd&&(La+=Sc.rd,Rc-=Sc.rd,Ga-=Sc.rd);La>=ab.length&&(La=0);a.qa=Ga;Ei++;Rc--}}Ei||(a.v("no "+Di+"history available"),a.qa=void 0)}else{var sa=fk(a,$a);if(sa)if("da"==rb){var nf=sa.Ka||65535<sa.J,O=df(a.f,sa.J||0,nf);a.v(Ba("",nf?12:19)+ta(sa.J,nf?22:17,3)+"  "+v(sa.J,8));6>O.length?(2<O.length&&(a.v("    OFFSET:             "+ta(O[3],13,3)+"  "+v(O[3],8)),a.v("UNIMAP["+ua(O[1],2)+"]: "+ta(O[2],22,3)+"  "+
v(O[2],8))),a.v("  PHYSICAL: "+ta(O[0],22,3)+"  "+v(O[0],8))):(a.v("    OFFSET:             "+ta(O[1],13,3)+"  "+v(O[1],8)),a.v("+   "+fl[O[2]]+"PAR"+O[3]+": "+ta(O[4],22,3)+"  "+v(O[4],8)),a.v("&  MMUMASK: "+ta(O[5],22,3)+"  "+v(O[5],8)),a.v("= PHYSICAL: "+ta(O[0],22,3)+"  "+v(O[0],8)))}else{var Cb=0,of="ds"==rb;if(sb){if("l"==sb.charAt(0))sb=sb.substr(1)||Bl,Cb=Nj(a,sb);else{var Hi=fk(a,sb);Hi&&(Cb=Hi.J-sa.J)}0>Cb&&(Cb=0);65536<Cb&&(Cb=65536)}var El=a.V;sa.V&&(a.V=sa.V);for(var Db="dd"==rb?4:"db"==
rb?1:2,Qd=Db*Cb||128,pf=of?16:a.V,Fl=(Qd+pf-1)/pf|0||1,Eb="";Fl--&&0<Qd;){var Fb="",Ii="";$a=ik(a,sa);for(var Rd=pf,Sd=0,Td=0;0<Rd&&0<Qd;){var gc=1,qf=1==Db?a.Jd(sa,gc):a.Oa(sa,gc=2);Sd|=qf<<(Td<<3);Td+=gc;Td==Db&&(of?(Fb&&(Fb+=","),Fb+="0x"+w(Sd,Db<<1)):(Fb+=I(a,Sd,Db<<3),Fb+=1==Db?9==Rd?"-":" ":"  "),Sd=Td=0);Rd-=gc;for(Qd-=gc;1==Db&&gc--;){var rf=qf&255;Ii+=32<=rf&&127>rf?String.fromCharCode(rf):".";qf>>=8}}Eb&&(Eb+="\n");Eb=of?Eb+(Fb+","):Eb+($a+":  "+Fb+(0==Rd?" "+Ii:""))}Eb&&a.v(Eb);a.Da=sa;
a.V=El}}}}break;case "e":if("else"==g[0])break;var sf=g[0],tf=g[1];if("eb"==sf){var Tc=1;var Ji=255;var Ki=a.Jd;var Li=a.Kd}else"e"==sf||"ew"==sf?(Tc=2,Ji=65535,Ki=a.Oa,Li=a.Fe):tf=null;if(null==tf)a.v("edit memory commands:"),a.v("\teb [a] [...]  edit bytes at address a"),a.v("\tew [a] [...]  edit words at address a");else{var Ud=fk(a,tf);if(Ud)for(var Vd=2;Vd<g.length;Vd++){var Uc=Sj(a,g[Vd]);if(void 0===Uc){a.v("unrecognized value: "+g[Vd]);break}Uc&~Ji&&a.v("warning: "+w(Uc)+" exceeds "+Tc+"-byte value");
a.v("changing "+ik(a,Ud)+(F(a,32)?"":" from "+I(a,Ki.call(a,Ud),Tc<<3))+" to "+I(a,Uc,Tc<<3));Li.call(a,Ud,Uc,Tc)}}break;case "g":a:{var Mi=g[1],Gl=b;if(void 0!==Mi){var uf=fk(a,Mi,!0);if(!uf)break a;hk(a,uf,Gl);a.vb(a.b,uf,!0)}zk(a,!0,c)}break;case "h":a.flags.U?(c||a.v("halting"),xk(a)):Sb(a,!0)||c||a.v("already halted");break;case "i":if("if"==g[0]){var Vc=b.substr(2);Vc=Ja(Vc);if(Sj(a,Vc)){c||a.v("true: "+Vc);var Ni=!0}else c||a.v("false: "+Vc),Ni=!1;Ni||(d=!1);break}f=!0;break;case "k":var Hl=
g[0];if("?"==g[1])a.v("stack trace commands:"),a.v("\tk\tshow frame addresses"),a.v("\tks\tshow symbol information");else{var vf=0,wf=X(),Wc=X(a.f.g[6]);for(a.v("stack trace for "+ik(a,Wc));10>vf;){for(var Gb=null,Il=256;65536>Wc.J>>>0;){wf.J=a.Oa(Wc,2);if(null==Wc.J||!Il--)break;if(!(wf.J&1)){for(var Jl=a,Wd=wf,Oi=null,Xc=Wd.J,Pi=Xc,xf=1;6>=xf&&Xc;xf++){if(2<xf){Wd.J=Xc;var Xd=Kk(Jl,Wd);if(0<=Xd.indexOf("JSR")){var Qi=Xd.indexOf(" ");if(Xc+(Xd.indexOf(" ",Qi+1)-Qi-1)/2==Pi){Oi=Xd;break}}}Xc-=2}Wd.J=
Pi;if(Gb=Oi)break}}if(!Gb||null==Gb)break;var Ri=null;if("ks"==Hl){var Si=Gb.match(/[0-9A-F]+$/);Si&&(Ri=bl(a,Si[0]))}Gb=Ba(Gb,50)+"  ;"+(Ri||"stack="+ik(a,Wc));a.v(Gb);vf++}vf||a.v("no return addresses found")}break;case "l":if("ln"==g[0]){bl(a,g[1],!0);break}f=!0;break;case "m":a:{var bb,cb=null,U=g[1];"?"==U&&(U=void 0);if(void 0!==U){var tb=0;if("all"==U)tb=-1610616833,U=null;else if("on"==U)cb=!0,U=null;else if("off"==U)cb=!1,U=null;else{"keys"==U&&(U="key");"kbd"==U&&(U="keyboard");for(bb in jc)if(U==
bb){tb=jc[bb];cb=!!(a.ga&tb);break}if(!tb){a.v("unknown message category: "+U);break a}}if(tb)if("on"==g[2])a.ga|=tb,cb=!0;else if("off"==g[2]&&(a.ga&=~tb,cb=!1,1073741824==tb)){for(var Ti=1E3<=a.N.length?a.N.length-1E3:0;Ti<a.N.length;)a.v(a.N[Ti++]);a.N=[]}}var Kl=0,Yc="";for(bb in jc)if(!U||U==bb){var Ll=!!(a.ga&jc[bb]);if(null===cb||cb==Ll)Yc&&(Yc+=","),++Kl%10||(Yc+="\n\t"),"key"==bb&&(bb="keys"),Yc+=bb}void 0===U&&a.v("message commands:\n\tm [category] [on|off]\tturn categories on/off");a.v((null!==
cb?cb?"messages on:  ":"messages off: ":"message categories:\n\t")+(Yc||"none"));Xj(a)}break;case "p":if("print"==g[0]){cl(a,b.substr(5));break}var Ml=g[0];if("?"==g[1])a.v("step commands:"),a.v("\tp\tstep over instruction"),a.v("\tpr\tstep over instruction with register update");else{var Ui="pr"==Ml?1:0,Vi=1+Ui;if(a.L)a.v("step in progress");else{var Yd=X(a.f.g[7]),hc=a.Oa(Yd);3==hc||4==hc||34816==(hc&65280)||32256==(hc&65024)||35072==(hc&65280)?(a.L=Vi,gk(Yd,2)):2048==(hc&65024)&&(Kk(a,Yd),a.L=
Vi);a.L?(a.vb(a.b,Yd,!0),zk(a)||(a.I&&Fe(a.I),a.L=0)):dl(a,Ui?"tr":"t")}}break;case "r":if("reset"==b){a.I&&a.I.reset();break}Ck(a,g);break;case "s":a:switch(g[1]){case "base":if(g[2]){var Zc=+g[2];if(8==Zc||10==Zc||16==Zc)a.V=Zc;else{a.v("invalid base: "+Zc);break}}a.v("default base: "+a.V);break;case "cs":var $c;void 0!==g[3]&&($c=+g[3]);switch(g[2]){case "int":a.f.Gb=$c;break;case "start":a.f.ic=$c;break;case "stop":a.f.Kb=$c;break;default:a.v("unknown cs option");break a}void 0!==$c&&xe(a.f);
a.v("checksums "+(a.f.flags.Hb?"enabled":"disabled"));break;case "sp":void 0!==g[2]&&(Ce(a.f,+g[2])||a.v("warning: using 1x multiplier, previous target not reached"));a.v("target speed: "+(a.f.rb.toFixed(2)+"Mhz")+" ("+a.f.ib+"x)");break;default:if(g[1]){a.v("unknown option: "+g[1]);break}case "?":a.v("debugger options:"),a.v("\tbase #\t\tset default base to #"),a.v("\tcs int #\tset checksum cycle interval to #"),a.v("\tcs start #\tset checksum cycle start count to #"),a.v("\tcs stop #\tset checksum cycle stop count to #"),
a.v("\tsp #\t\tset speed multiplier to #")}break;case "t":dl(a,g[0],g[1]);break;case "u":Dk(a,g[1],g[2],8);break;case "v":if("var"==g[0]){al(a,b.substr(3))||(d=!1);break}if("ver"==g[0]){a.v((Vb||"PDP11")+" version 1.75.6 ("+a.f.ha+",RELEASE"+(Xb?",TYPEDARRAYS":Wb?",BYTEARRAYS":",LONGARRAYS")+")");a.v(window?window.navigator.userAgent:"");break}f=!0;break;case "?":if(g[1]){cl(a,b.substr(1));break}var yf="commands:",zf;for(zf in gl)yf+="\n"+Ba(zf,9)+gl[zf];If(a)||(yf+="\nnote: history disabled if no exec breakpoints");
a.v(yf);break;default:f=!0}f&&(a.v("unknown command: "+b),d=!1)}}catch(Xi){a.v("debugger error: "+(Xi.stack||Xi.message)),d=!1}return d}function Ae(a,b,c){b=Jj(a,b,c);for(var d in b)if(!Jk(a,b[+d]))return!1;return!0}
var gl={"?":"help/print","a [#]":"assemble","b [#]":"breakpoint",c:"clear output","d [#]":"dump memory","e [#]":"edit memory","g [#]":"go [to #]",h:"halt","if":"eval expression","int [#]":"request interrupt",k:"stack trace",ln:"list nearest symbol(s)",m:"messages",p:"step over",print:"print expression",r:"dump/set registers",reset:"reset machine",s:"set options","t [#]":"trace","u [#]":"unassemble","var":"assign variable",ver:"print version"},Mk=".WORD ADC ADCB ADD ASL ASLB ASR ASRB BCC BCS BEQ BGE BGT BHI BIC BICB BIS BISB BIT BITB BLE BLOS BLT BMI BNE BPL BPT BR BVC BVS CCC CLC CLCN CLCV CLCVN CLCVZ CLCZ CLCZN CLN CLR CLRB CLV CLVN CLVZ CLVZN CLZ CLZN CMP CMPB COM COMB DEC DECB INC INCB HALT JMP JSR MARK MFPD MFPI MFPS MOV MOVB MTPD MTPI MTPS NEG NEGB NOP RESET ROL ROLB ROR RORB RTI RTS SBC SBCB SCC SEC SECN SECV SECVN SECVZ SECZ SECZN SEN SEV SEVN SEVZ SEVZN SEZ SEZN SUB SWAB SXT TST TSTB WAIT MUL DIV ASH ASHC XOR SOB EMT TRAP SPL IOT RTT MFPT".split(" "),
nk=20,ok=21,pk=22,qk=23,rk=24,sk=25,tk=26,uk=27,lk=28,vk=29,wk=30,jk={SP:6,PC:7,PS:nk,PI:ok,ER:pk,SL:qk,M0:rk,M1:sk,M2:tk,M3:uk,AR:lk,DR:vk,SR:wk},mk="R0 R1 R2 R3 R4 R5 SP PC A0 A1 A2 A3 A4 A5 A6 A7 S0 S1 S2 S3 PS PI ER SL M0 M1 M2 M3 AR DR SR".split(" "),fl="KI KD SI SD ?? ?? UI UD".split(" "),Tk=7,Uk=56,Z=Uk|Tk,Sk=4032,Y=4096,Ok=8192,Pk=12288,Qk=24576,Rk=32768,Nk=61440,Zj={61440:{4096:[62,Sk,Z],8192:[47,Sk,Z],12288:[18,Sk,Z],16384:[14,Sk,Z],20480:[16,Sk,Z],24576:[3,Sk,Z],36864:[63,Sk,Z],40960:[48,
Sk,Z],45056:[19,Sk,Z],49152:[15,Sk,Z],53248:[17,Sk,Z],57344:[94,Sk,Z]},65024:{2048:[57,448,Z],28672:[100,Z,448],29184:[101,Z,448],29696:[102,Z,448],30208:[103,Z,448],30720:[104,448,Z],32256:[105,448,Ok]},65280:{256:[27,Y],512:[24,Y],768:[10,Y],1024:[11,Y],1280:[22,Y],1536:[12,Y],1792:[20,Y],32768:[25,Y],33024:[23,Y],33280:[13,Y],33536:[21,Y],33792:[28,Y],34048:[29,Y],34304:[8,Y],34560:[9,Y],34816:[106,Rk],35072:[107,Rk]},65472:{64:[56,Z],192:[95,Z],2560:[39,Z],2624:[49,Z],2688:[53,Z],2752:[51,Z],
2816:[67,Z],2880:[1,Z],2944:[77,Z],3008:[97,Z],3072:[73,Z],3136:[71,Z],3200:[6,Z],3264:[4,Z],3328:[58,Qk],3392:[60,Z],3456:[65,Z],3520:[96,Z],35328:[40,Z],35392:[50,Z],35456:[54,Z],35520:[52,Z],35584:[68,Z],35648:[2,Z],35712:[78,Z],35776:[98,Z],35840:[74,Z],35904:[72,Z],35968:[7,Z],36032:[5,Z],36096:[66,Z],36160:[59,Z],36224:[64,Z],36288:[61,Z]},65528:{128:[76,Tk],152:[108,Pk]},65535:{0:[55],1:[99],2:[75],3:[26],4:[109],5:[70],6:[110],7:[111],160:[69],161:[31],162:[41],163:[33],164:[45],165:[36],
166:[43],167:[35],168:[38],169:[32],170:[42],171:[34],172:[46],173:[37],174:[44],175:[30],176:[69],177:[80],178:[88],179:[82],180:[92],181:[85],182:[90],183:[84],184:[87],185:[81],186:[89],187:[83],188:[93],189:[86],190:[91],191:[79]}},Lk=[0],dk=[58,60,65,96,110,100,101,102,103,104,105],ek=[108,59,64],yk=1E3,Bk=">> ";hb(function(){for(var a=D(document,B,"debugger"),b=0;b<a.length;b++){var c=a[b],d=Ab(c);d=new Vj(d);zb(d,c)}});
function hl(a,b,c){A.call(this,"Computer",a,67108864);this.flags.aa=!1;this.O=null;il(this,b);this.L=ve(this,"autoPower",a,6);this.j=0;this.T=+a.busWidth||+a.buswidth;this.H=this.A=this.K=null;this.F=this.R=!1;this.B=this.u=null;this.P=this.M=this.N=!1;this.url=ve(this,"url")||"";(Math.random()+.1).toString(36);this.g=jl(this);if(this.f=Ib("CPU",this.id)){this.D=Ib("Debugger",this.id);this.C=new ed({id:this.eb+".bus",busWidth:this.T},this.f,this.D);var d=Bb(this.id);if(this.w=(this.i=Ib("Panel",this.id))&&
this.i.G.print)for(b=0;b<d.length;b++){var e=d[b];e.S=this.i.S;e.print=this.i.print;e.v=this.i.v}this.v(Vb+" v1.75.6\nCopyright \u00a9 2012-2019 Jeff Parsons <Jeff@pcjs.org>\nLicense: GPL version 3 or later <http://gnu.org/licenses/gpl.html>");this.v("Portions adapted from the PDP-11/70 Emulator by Paul Nankervis <http://skn.noip.me/pdp11/pdp11.html>");for(b=0;b<d.length;b++)e=d[b],e.ya&&e.ya(this,this.C,this.f,this.D);b=null;e=ve(this,"resume",a);void 0!==e&&(1<e.length?b=this.A=e:this.b=parseInt(e,
10));e=!1;d=ve(this,"state");d||(e=!0,d=a.state);d&&(this.K=b=d,e||(this.F=!0,this.b=kl),this.b&&(this.B=new wc(this,"1.75.6"),this.B.load()?b=null:delete this.B));!b&&this.b&&(b=ll(this))&&(this.F=!0);if(b){var f=this;Na(b,null,!0,function(g,h,m){m?(f.A=null,f.F=!1,f.S("Unable to load machine state from server (error "+m+(h?": "+Ja(h):"")+")")):(f.H=h,f.R=!0);E(f)})}else E(this);this.G.power||(this.L=!0);!c&&this.L&&this.wait(this.lc)}else z("Unable to find CPU component")}t(hl,A);
function il(a,b){if(!b){var c;if("object"==typeof resources&&(c=resources.parms))try{b=eval("("+c+")")}catch(d){z(d.message+" ("+c+")")}}a.O=b}function ve(a,b,c,d){var e=b.toLowerCase();e=Za(b)||Za(e);void 0===e&&a.O&&(e=a.O[b]);void 0===e&&c&&(e=c[b]);void 0===e&&"object"==typeof resources&&resources[b]&&(e=b);void 0===e&&(e=void 0);if("string"==typeof e&&d)switch(d){case 4:e=+e;isNaN(e)&&(e=0);break;case 6:e="true"==e}return e}k=hl.prototype;
k.wait=function(a,b){for(var c=this,d=Bb(this.id),e=0;e<=d.length;e++){var f=e<d.length?d[e]:this;if(!Rb(f)){Rb(f,function(){c.wait(a,b)});return}}a.call(this,b)};function ml(a,b){var c=new wc(a,"1.75.6",nl);if(c.load()&&ol(c)){var d=c.get(pl),e=b?b.get(pl):"unknown";d!=e&&(a.S("Machine state may be out-of-date\n("+d+" vs. "+e+")\nCheck your browser's local storage limits"),b||c.clear())}}
k.lc=function(a){void 0===a&&(a=this.b||(this.H?ql:kl));if(!this.j){this.j++;var b=!1,c=!1;this.N=!1;var d=this.B||new wc(this,"1.75.6");if(a==rl)b=!0;else if(a>kl){if(d.load(this.H)){this.u=new wc(this,"1.75.6",sl);this.u.load()&&(tl(),a=ul,vl(this.u));this.u.set(pl,Da("%T",new Date));this.u.store();var e=this.b&&!this.F;if(a==ql||xb("Click OK to restore the previous "+Vb+" machine state, or CANCEL to reset the machine.")){if(c=ol(d)){var f=d.get("code"),g=d.get("data");f&&("ok"==f?d.load(g):("error"==
f&&"no machine state"!=g?(this.S("Error: "+g),"unable to verify user"==g&&(Ua(wl,""),this.g=null)):this.v(f+": "+g),vl(d),d.load()?(c=ol(d),e=!0):c=!1))}e&&ml(this,c?d:null)}else a==ul&&d.clear()}else ml(this);delete this.H;delete this.B}e=Bb(this.id);for(f=0;f<e.length;f++)g=e[f],g!==this&&g!=this.f&&(c=xl(this,g,d,b,c));b=[d,a,c];a!=rl?this.wait(this.ie,b):this.ie(b)}};
function xl(a,b,c,d,e){if(!b.flags.aa){b.flags.aa=!0;var f=null;try{if(e&&((f=c.get(b.id))||(f=c.get(b.id.replace(/-[0-9]+\./i,".")))),"string"===typeof f&&(f=null),!b.Aa(f,d)&&f&&(z("Unable to restore state for "+b.type),a.K&&!a.R?(c.clear(),a.b=kl,window&&window.location.reload()):a.N=!0,b.Aa(null),e=!1),!d&&b.Pd){var g=b.Pd.split("|");for(a=0;a<g.length;a++)b.status(g[a])}}catch(h){z("Error restoring state for "+b.type+" ("+h.message+")")}}return e}
k.ie=function(a){var b=a[0],c=0>a[1];a=a[2];this.P=!0;this.flags.aa=!0;var d=this.G.power;d&&(d.textContent="Shutdown");this.f&&(xl(this,this.f,b,c,a),Mc(this,-2),this.f.pa());this.N&&(tl(),b.clear());!c&&this.u&&(this.u.clear(),delete this.u);this.j=0};function tl(){jb("There may be a problem with your "+Vb+" machine.")}
function el(a,b,c){var d="none";if(a.j)return null;a.j--;var e=new wc(a,"1.75.6"),f=new wc(a,"1.75.6",nl),g=Da("%T",new Date);f.set(pl,g);e.set(pl,g);e.set(yl,"1.75.6");e.set(zl,window?window.location.href:null);e.set(Al,window?window.navigator.userAgent:"");if(a.f&&a.f.za){c&&(b&&(a.f.flags.pa=a.f.flags.U),Hc(a.f));var h=a.f.za(b,c);"object"===typeof h&&e.set(a.f.id,h);c&&(a.f.flags.aa=!1,!1===h&&(d=null))}g=Bb(a.id);for(var m=0;m<g.length;m++){var l=g[m];l.flags.aa&&(l.za&&(h=l.za(b,c),"object"===
typeof h&&e.set(l.id,h)),c&&(l.flags.aa=!1,!1===h&&(d=null)))}d&&(c?(g=h=!1,b?(a.g&&Dl(a,a.g,e.toString()),f.store()&&e.store()||(d=null,h=g=!0)):a.b&&(h=!0,g=a.b==Nl),h&&e.clear(g)):d=e.toString());c&&(a.flags.aa=!1,b=a.G.power)&&(b.textContent="Power");a.j=0;return d}
k.reset=function(){this.flags.reset=!0;this.C&&this.C.reset&&(G(this,"Resetting "+this.C.type),this.C.reset());this.f&&this.f.reset&&(G(this,"Resetting "+this.f.type),this.f.reset());for(var a=Bb(this.id),b=0;b<a.length;b++){var c=a[b];c!==this&&c!==this.C&&c!==this.f&&c.reset&&(G(this,"Resetting "+c.type),c.reset())}this.flags.reset=!1;Mc(this,-1)};k.start=function(a,b){for(var c=Bb(this.id),d=0;d<c.length;d++){var e=c[d];"CPU"!=e.type&&e!==this&&e.start&&e.start(a,b)}Mc(this,-1)};
k.stop=function(a,b){for(var c=Bb(this.id),d=0;d<c.length;d++){var e=c[d];"CPU"!=e.type&&e!==this&&e.stop&&e.stop(a,b)}Mc(this,-1)};
function Mc(a,b){if(a.f){var c=a.f,d=b||0,e=c.G.speed;e&&(0>=d||30<=(c.Uc+=d))&&(e.textContent=c.flags.U?c.qb.toFixed(2)+"Mhz":"Stopped",c.Uc=0)}if(a.i&&(a=a.i,b=b||0,a.w)){c=a.f.flags.U;d=!!(a.f.i&8);if(0>=b||60<=(a.u+=b)){for(e=0;e<a.f.g.length;e++)Bc(a,"R"+e,a.f.g[e]);e=Pd(a.f);Bc(a,"PS",e);Bc(a,"NF",e&8?1:0,1);Bc(a,"ZF",e&4?1:0,1);Bc(a,"VF",e&2?1:0,1);Bc(a,"CF",e&1?1:0,1);a.u=0}-1>b?a.da=a.f.g[7]:0<b&&c&&!d&&(a.da=a.f.Pa);xc(a,a.da);nc(a,a.yb);b=a.f;b=b.sb?b.W&16?1:2:4;cd(a,"B22",b&1);cd(a,"B18",
b&2);cd(a,"B16",b&4)}}
k.ta=function(a,b,c){var d=this;switch(b){case "power":return this.G[b]=c,c.onclick=function(){d.j||(d.flags.aa?el(d,!1,!0):d.wait(d.lc))},!0;case "reset":return this.G[b]=c,c.onclick=function(){if(d.flags.aa&&!d.j)if(d.b&&!d.A){var e=xb("Click OK to save changes to this "+Vb+" machine.\n\nWARNING: If you CANCEL, all disk changes will be discarded.");el(d,e,!0);!e&&d.K?window&&window.location.reload():(e||(d.M=!0),d.lc(kl),d.M=!1)}else d.reset(),d.f&&!d.D&&d.f.pa()},!0;case "save":if(ya(window?window.location.hostname:
"localhost","pcjs.org"))c.parentNode.removeChild(c);else return this.G[b]=c,c.onclick=function(){var e=jl(d,!0);if(e){var f=!!(d.b&&!d.A||d.K),g=el(d,f);f?Dl(d,e,g):d.S("Resume disabled, machine state not saved")}},!0}return!1};
function jl(a,b){var c=a.g;c||((c=Ta(wl),void 0!==c)?!c&&b&&(b=null,window&&(b=window.prompt("Saving machine states on the pcjs.org server is currently unsupported.\n\nIf you're running your own server, enter your user ID below.","")),c=b)&&((c=Ol(a,c))||a.S("The user ID is invalid.")):b&&a.S("Browser local storage is not available"));return c}
function Ol(a,b){a.g=null;b=Na(Pa()+"/api/v1/user?req=verify&user="+b);var c=b[1];if(!b[0]&&c)try{b=eval("("+c+")"),b.code&&"ok"==b.code&&(Ua(wl,b.data),a.g=b.data)}catch(d){z(d.message+" ("+c+")")}return a.g}function ll(a){var b=null;a.g&&(b=Pa()+"/api/v1/user?req=load&user="+a.g+"&state="+Pl(a,"1.75.6"));return b}
function Dl(a,b,c){if(c){var d={req:"store"};d.user=b;d.state=Pl(a,"1.75.6");d.data=c;b=Na(Pa()+"/api/v1/user",d);d=b[0];if(b[1]){if(d){var e=d.indexOf("\n");0<e&&(d=d.substr(0,e));d.indexOf("Error: ")||(d=d.substr(7))}d='{"code":'+b[1]+',"data":"'+d+'"}'}b=JSON.parse(d);b&&"ok"==b.code?a.S("Machine state saved to server"):c&&(c=b&&b.data||"unable to save machine state",c="error"==b.code?"Error: "+c:"Error "+b.code+": "+c,a.S(c),Ua(wl,""),a.g=null)}}
function di(a){var b;a=Bb(a.id);for(var c=0;c<a.length;c++){var d=a[c];if(b)b==d&&(b=null);else if("RAM"==d.type)return d}return null}function Fe(a,b){if(a.w){var c=0,d=0;!b&&window&&(c=window.scrollX,d=window.scrollY);a.w.focus();!b&&window&&window.scrollTo(c,d)}}var sl="failsafe",nl="validate",pl="timestamp",yl="version",zl="url",Al="browser",wl="user",rl=-1,kl=0,ql=1,ul=2,Nl=3;
hb(function(){for(var a=D(document,B+"-machine"),b=0;b<a.length;b++){var c=a[b],d=Ab(c);c=D(c,B,"computer");for(var e=0;e<c.length;e++){var f=c[e],g=Ab(f);g=new hl(g,d,!0);zb(g,f);g.L&&g.wait(g.lc)}}});ib.show.push(function(){for(var a=D(document,B,"computer"),b=0;b<a.length;b++){var c=Ab(a[b]);if(c=Ib("Computer",c.id))c.flags.Cd=!1,c.P&&!c.flags.aa&&c.lc(rl)}});
ib.exit.push(function(){for(var a=D(document,B,"computer"),b=0;b<a.length;b++){var c=Ab(a[b]);if(c=Ib("Computer",c.id))c.flags.Cd=!0,c.flags.aa&&el(c,!(!c.b||c.A),!0)}});function wc(a,b,c){this.id=a.id;this.b="";this.f={};this.g=this.C=!1;this.key=Pl(a,b,c);vl(this,a.qf)}k=wc.prototype;k.set=function(a,b){try{this.f[a]=b}catch(c){}};k.get=function(a){return this.f[a]||null};k.data=function(){return this.f};
k.load=function(a){return a?(this.b=a,this.g=!0,this.C=!1,!0):this.g?!0:Ra()&&(a=Ta(this.key))?(this.b=a,this.g=!0):!1};function ol(a){var b=!0;if(!a.C)try{a.f=JSON.parse(a.b),a.C=!0}catch(c){z(c.message||c),b=!1}return b}k.store=function(){var a=!0;if(Ra()){var b=JSON.stringify(this.f);Ua(this.key,b)||(z("Unable to store "+b.length+" bytes in browser local storage"),a=!1)}return a};k.toString=function(){return this.f?JSON.stringify(this.f):this.b};
function vl(a,b){a.b="";a.f={};a.g=a.C=!1;b&&a.set("parms",b)}k.clear=function(a){vl(this);var b=[];try{for(var c=0,d=window.localStorage.length;c<d;c++)b.push(window.localStorage.key(c))}catch(e){}for(c=0;c<b.length;c++)if((d=b[c])&&(a||d.substr(0,this.key.length)==this.key)){try{window.localStorage.removeItem(d)}catch(e){}b.splice(c,1);c=0}};function Pl(a,b,c){a=a.id;if(b){var d=b.indexOf(".");0<d&&(a+=".v"+b.substr(0,d))}c&&(a+="."+c);return a}var Ql=0;
function Rl(a,b,c,d,e,f,g,h){g("Loading "+a+"...");Na(a,null,!0,function(m,l,n){n?(l||(l="unable to load "+a+" ("+n+")"),h(l,null)):Sl(l,a,b,c,d,e,f,g,h)})}
function Sl(a,b,c,d,e,f,g,h,m){function l(n,p){if(p)m(p,null);else{if(c){ub(c,b,n);(p=b)&&0>p.indexOf("/")&&"/"==window.location.pathname.slice(-1)&&(p=window.location.pathname+p);e?"}"==e.slice(-1)?(e=e.slice(0,-1),1<e.length&&(e+=",")):e='{state:"'+e+'",':e="{";e+='url:"'+p+'"}';"object"==typeof resources&&(p=null);e=e.replace(/\$/g,"$$$$");if(f){var r=n.match(/(<machine[^>]*\sclass=)(['"])(.*?)(\2.*?>)/);r&&(n=n.replace(r[0],r[1]+r[2]+f+r[4]),f="")}n=n.replace(/(<machine[^>]*\sid=)(['"]).*?\2/,
"$1$2"+c+"$2"+(f?' class="'+f+'"':"")+(e?" parms='"+e+"'":"")+(p?' url="'+p+'"':""))}g||(n=n.replace(/(<xsl:variable name="APPNAME">).*?(<\/xsl:variable>)/,"$1PDPjs$2"),n=n.replace(/(<xsl:variable name="APPCLASS">).*?(<\/xsl:variable>)/,"$1"+d+"$2"));p=null;if("<"==n.charAt(0))try{g||(n=n.replace(/<!DOCTYPE(.|[\r\n])*]>\s*/g,"")),window.ActiveXObject||"ActiveXObject"in window?(p=new window.ActiveXObject("Microsoft.XMLDOM"),p.async=!1,p.loadXML(n)):p=(new window.DOMParser).parseFromString(n,"text/xml")}catch(q){p=
null,n=q.message}else n="unrecognized XML: "+(255<n.length?n.substr(0,255)+"...":n);m(n,p)}}a?g?Tl(a,h,l):l(a,""):m("no data"+(b?" for file: "+b:""),null)}
function Tl(a,b,c){var d;if(d=/<([a-z]+)\s+ref="(.*?)"(.*?)\/>/g.exec(a)){var e=d[2];b("Loading "+e+"...");Na(e,null,!0,function(f,g,h){if(h||!g)c(a,"unable to resolve XML reference: "+d[0]+" ("+h+")");else{if(f=d[3])if(h=g.match(new RegExp("<"+d[1]+"[^>]*>"))){for(var m=h[0],l,n=/( [a-z]+=)(['"])(.*?)\2/gi;l=n.exec(f);)m=0>m.toLowerCase().indexOf(l[1].toLowerCase())?m.replace(">",l[0]+">"):m.replace(new RegExp(l[1]+"(['\"])(.*?)\\1"),l[0]);h[0]!=m&&(g=g.replace(h[0],m))}else{c(a,"missing <"+d[1]+
"> in "+e);return}g=g.replace(/<\?xml[^>]*>[\r\n]*/,"");a=a.replace(d[0],g);Tl(a,b,c)}})}else c(a,"")}
function Ul(a,b,c,d,e,f){function g(u){if(void 0===l){var y=m&&D(m,"machine-warning");l=y&&y[0]||m}l&&(l.innerHTML=za(u))}function h(u){g("Error: "+u);n&&(--Ql||mb(!0));n=!1}var m,l,n=!0;c||(c="machine.xml",d||(d="components.xsl"));Ql++;vb[b]={};try{if(m=document.getElementById(b)){var p;if("object"==typeof resources&&(p=resources.css)){var r=document.head||document.getElementsByTagName("head")[0],q=document.createElement("style");q.type="text/css";q.styleSheet?q.styleSheet.cssText=p:q.appendChild(document.createTextNode(p));
r.appendChild(q)}d||(p=a,"pdp"==a.substr(0,3)&&(p="pdpjs"),d="/versions/"+p+"/1.75.6/components.xsl");p=function(u,y){y?Rl(d||"","",a,"","",!1,g,function(x,C){if(C)if(ub(b,d||"",x),g("Processing "+c+"..."),window.ActiveXObject||"ActiveXObject"in window)(C=y.transformNode(C))?(m.outerHTML=C,--Ql||mb(!0)):h("transformNodeToObject failed");else if(document.implementation&&document.implementation.createDocument){x=new XSLTProcessor;x.importStylesheet(C);var Xa=x.transformToFragment(y,document);if(Xa){var Ya=
m.parentNode;if(Ya){x=C=0;var R=m.getBoundingClientRect();0>R.bottom&&(C=window.scrollX,x=window.scrollY);Ya.replaceChild(Xa,m);(m=document.getElementById(b))&&0>R.bottom&&(Xa=m.getBoundingClientRect(),x=window.performance&&window.performance.navigation.type==window.performance.navigation.TYPE_RELOAD?0:x+Math.ceil(Xa.height-R.height),window.scrollTo(C,x));--Ql||mb(!0)}else h("invalid machine element: "+b)}else h("transformToFragment failed")}else h("unable to transform XML: unsupported browser");
else h(x)}):h(u)};"<"!=c.charAt(0)?Rl(c,b,a,e||"",f||"",!0,g,p):Sl(c,"",b,a,e||"",f||"",!1,g,p)}else h("missing machine element: "+b)}catch(u){h(u.message)}return n}window.embedPDP10=function(a,b,c,d,e){mb(!1);return Ul("pdp10",a,b,c,d,e)};window.embedPDP11=function(a,b,c,d,e){mb(!1);return Ul("pdp11",a,b,c,d,e)};
window.commandMachine=function(a,b,c,d,e,f){if("script"==e){d=!1;c+=".machine";if(!f)delete Kb[c],d=!0;else if("string"==typeof f&&!Kb[c]){d=!0;e=Kb;for(var g=c,h=f.length,m=[],l=[],n="",p=null,r=0;r<h;r++){var q=f[r];if('"'==q||"'"==q)p&&q!=p?n+=q:(p?p=null:p=q,n&&(l.push(n),n=""));else{if(!p){if("\r"==q||"\n"==q)q=";";if(" "==q||"\t"==q||";"==q){n&&(l.push(n),n="");";"==q&&l.length&&(m.push(l),l=[]);continue}}n+=q}}n&&l.push(n);l.length&&m.push(l);e[g]=m;Jb(c)||(d=!1)}return d?(b&&(a.disabled=!0),
!0):!1}if(d&&(g=Ib(d,c+".machine"))&&(h=g.exports)&&(h=h[e]))return h.call(g,f)?(b&&(a.disabled=!0),!0):!1;console.log("unimplemented: commandMachine('"+c+"','"+d+"','"+e+"','"+f+"')");return!1};window.enableEvents=mb;window.sendEvent=ob;})()

//# sourceMappingURL=pdp11.js.map
