(function(){/*
 http://pcjs.org/modules/shared/lib/dumpapi.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/reportapi.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/userapi.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/keys.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/strlib.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/weblib.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pc8080/lib/cpudef.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pc8080/lib/messages.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/state.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/embed.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/defines.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/usrlib.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/component.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pc8080/lib/defines.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pc8080/lib/panel.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pc8080/lib/bus.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pc8080/lib/memory.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pc8080/lib/cpu.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pc8080/lib/cpustate.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pc8080/lib/cpuops.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pc8080/lib/chipset.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pc8080/lib/rom.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pc8080/lib/ram.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pc8080/lib/keyboard.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pc8080/lib/video.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pc8080/lib/serial.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/shared/lib/debugger.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pc8080/lib/debugger.js (C) Jeff Parsons 2012-2017
 http://pcjs.org/modules/pc8080/lib/computer.js (C) Jeff Parsons 2012-2017
*/
var k,aa="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},ba;if("function"==typeof Object.setPrototypeOf)ba=Object.setPrototypeOf;else{var ca;a:{var da={Za:!0},ea={};try{ea.__proto__=da;ca=ea.Za;break a}catch(a){}ca=!1}ba=ca?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var fa=ba;
function l(a,b){a.prototype=aa(b.prototype);a.prototype.constructor=a;if(fa)fa(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.lf=b.prototype}
for(var ha="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},ia="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,ja=["Math","trunc"],ka=0;ka<ja.length-1;ka++){var la=ja[ka];la in ia||(ia[la]={});ia=ia[la]}
var ma=ja[ja.length-1],na=ia[ma],oa=na?na:function(a){a=Number(a);if(isNaN(a)||Infinity===a||-Infinity===a||0===a)return a;var b=Math.floor(Math.abs(a));return 0>a?-b:b};oa!=na&&null!=oa&&ha(ia,ma,{configurable:!0,writable:!0,value:oa});
var n={Yd:0,ae:1,be:2,ce:3,de:4,ee:5,fe:6,ge:7,he:8,ie:9,je:10,ke:11,le:12,me:13,ne:14,oe:15,pe:16,qe:17,re:18,se:19,te:20,ue:21,ve:22,we:23,xe:24,ye:25,ze:26,Fe:27," ":32,"!":33,'"':34,"#":35,$:36,"%":37,"&":38,"'":39,"(":40,")":41,"*":42,"+":43,",":44,"-":45,".":46,"/":47,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,":":58,";":59,"<":60,"=":61,">":62,"?":63,"@":64,Ga:65,sb:66,tb:67,ib:68,E:69,vb:70,wb:71,xb:72,yb:73,zb:74,Ab:75,jb:76,Eb:77,Fb:78,Ib:79,Jb:80,Q:81,Kb:82,Mb:83,Nb:84,Ob:85,Qb:86,
Sb:87,Ub:88,Vb:89,Ya:90,"[":91,"\\":92,"]":93,"^":94,_:95,"`":96,Za:97,Rc:98,Tc:99,d:100,e:101,Xc:102,Yc:103,Zc:104,$c:105,jd:106,k:107,kd:108,ld:109,n:110,md:111,p:112,q:113,r:114,Kd:115,t:116,Ld:117,Md:118,Nd:119,x:120,y:121,z:122,"{":123,"|":124,"}":125,"~":126,Ae:127},pa={59:186,61:187,173:189,224:91};
function qa(a){var b=16;if(a){b||(b=10);var c,d=0<a.indexOf(",");d&&(a=a.replace(/,/g,""));var e=c=a.charAt(0);"#"==c?(b=8,c=""):"$"==c&&(b=16,c="");e!=c?a=a.substr(1):(e=c=a.substr(0,2),"0b"==c&&d||"^B"==c?(b=2,c=""):"0o"==c||"^O"==c?(b=8,c=""):"^D"==c?(b=10,c=""):"0x"==c&&(b=16,c=""),e!=c&&(a=a.substr(2)));e=c=a.slice(-1);"Y"==c||"y"==c?(b=2,c=""):"."==c?(b=10,c=""):"H"==c||"h"==c?(b=16,c=""):"K"==c?c="000":"M"==c?c="000000":"G"==c&&(c="000000000");e!=c&&(a=a.slice(0,-1)+c);var f;e=0;10>=b&&(c=
a.match(/(-?[0-9]+)B([0-9]*)/))&&(a=c[1],e=35-((c[2]||35)&255));c=a;if(((d=b)&&10!=d?16==d?null!==c.match(/^-?[0-9a-f]+$/i):8==d?null!==c.match(/^-?[0-7]+$/):2==d&&null!==c.match(/^-?[01]+$/):null!==c.match(/^-?[0-9]+$/))&&!isNaN(f=parseInt(a,b))){e&&(0>f&&(f+=Math.pow(2,36)),f=0<e?f*Math.pow(2,e):Math.trunc(f/Math.pow(2,-e)));var g=f}}return g}
function p(a,b,c){b?9<b&&(b=9):(b=Math.abs(a),b=65535>=b?4:4294967295>=b?8:9);c=c?"0x":"";var d=void 0===d?0:d;var e="";isNaN(a)?a=null:null!=a&&(0>a&&-1<a&&(a=-1),0>a&&(a+=Math.pow(16,b)),a>=Math.pow(16,b)&&(b=Math.ceil(Math.log(a)/Math.log(16))));for(var f=d||-1;0<b--;){f||(e=","+e,f=d);if(null==a)e="?"+e;else{var g=a%16;g+=0<=g&&9>=g?48:55;e=String.fromCharCode(g)+e;a=Math.trunc(a/16)}f--}return(void 0===c?"":c)+e}
function ra(a){var b=a,c=a.lastIndexOf("/");0<=c&&(b=a.substr(c+1));c=b.indexOf("&");0<c&&(b=b.substr(0,c));return b}function sa(a){var b="",c=a.lastIndexOf(".");0<=c&&(b=a.substr(c+1).toLowerCase());return b}function ta(){var a=ua();return-1!==a.indexOf("pcjs.org",a.length-8)}function va(a){return a.replace(/[&<>"']/g,function(a){return wa[a]})}function xa(a){return String.prototype.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}
var wa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"},ya={0:"NUL",1:"SOH",2:"STX",3:"ETX",4:"EOT",5:"ENQ",6:"ACK",7:"BEL",8:"BS",9:"TAB",10:"LF",11:"VT",12:"FF",13:"CR",14:"SO",15:"SI",16:"DLE",17:"XON",18:"DC2",19:"XOFF",20:"DC4",21:"NAK",22:"SYN",23:"ETB",24:"CAN",25:"EM",26:"SUB",27:"ESC",28:"FS",29:"GS",30:"RS",31:"US",127:"DEL"};
function za(){var a,b="";a||(a=new Date);for(var c=a.getHours(),d=a.getDate(),e=a.getMonth()+1,f=0;11>f;f++){var g;switch(g="Y-m-d H:i:s".charAt(f)){case "a":b+=12>c?"am":"pm";break;case "d":b+=("0"+d).slice(-2);break;case "D":b+=Aa[a.getDay()].substr(0,3);break;case "F":b+=Ba[e-1];break;case "g":b+=c?12<c?c-12:c:12;break;case "h":b+=c;break;case "H":b+=("0"+c).slice(-2);break;case "i":b+=("0"+a.getMinutes()).slice(-2);break;case "j":b+=d;break;case "l":b+=Aa[a.getDay()];break;case "m":b+=("0"+e).slice(-2);
break;case "M":b+=Ba[e-1].substr(0,3);break;case "n":b+=e;break;case "s":b+=("0"+a.getSeconds()).slice(-2);break;case "y":b+=(""+a.getFullYear()).slice(-2);break;case "Y":b+=a.getFullYear();break;default:b+=g}}return b}var Aa="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Ba="January February March April May June July August September October November December".split(" ");
function Ca(a,b,c,d){c=void 0===c?!1:c;var e=0,f=null,g=null;if("object"==typeof resources&&(f=resources[a]))return d&&d(a,f,e),[f,e];if(c&&"function"==typeof resources)return resources(a,function(b,c){d&&d(a,b,c)}),g;var h=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");c&&(h.onreadystatechange=function(){4===h.readyState&&(f=h.responseText,200==h.status||!h.status&&f.length&&"file:"==(window?window.location.protocol:"file:")||(e=h.status||-1),d&&d(a,
f,e))});if(b&&"object"==typeof b){var m="",q;for(q in b)b.hasOwnProperty(q)&&(m&&(m+="&"),m+=q+"="+encodeURIComponent(b[q]));m=m.replace(/%20/g,"+");h.open("POST",a,c);h.setRequestHeader("Content-type","application/x-www-form-urlencoded");h.send(m)}else h.open("GET",a,c),"bytes"==b&&h.overrideMimeType("text/plain; charset=x-user-defined"),h.send();c||(f=h.responseText,200!=h.status&&(e=h.status||-1),d&&d(a,f,e),g=[f,e]);return g}
function Ea(a,b){var c,d={T:null,ra:null,za:null,sa:null};if("["==b.charAt(0)||"{"==b.charAt(0))try{var e,f;if("<"==b.charAt(0))throw Error(b);var g=0>b.indexOf("0x")&&0>b.indexOf("0o")&&'["'!=b.substr(0,2)?JSON.parse(b.replace(/([a-z]+):/gm,'"$1":').replace(/\/\/[^\n]*/gm,"")):eval("("+b+")");d.za=g.load;d.sa=g.exec;if(e=g.bytes)d.T=e;else if(e=g.words)for(d.T=Array(2*e.length),f=c=0;c<e.length;c++)d.T[f++]=e[c]&255,d.T[f++]=e[c]>>8&255;else if(e=g.longs)for(d.T=Array(4*e.length),f=c=0;c<e.length;c++)d.T[f++]=
e[c]&255,d.T[f++]=e[c]>>8&255,d.T[f++]=e[c]>>16&255,d.T[f++]=e[c]>>24&255;else(e=g.data)?d.jf=e:d.T=g;d.T&&(d.T.length?1==d.T.length&&(t(d.T[0]),d=null):(t("Empty resource: "+a),d=null));d.ra=g.symbols}catch(h){t("Resource data error ("+a+"): "+h.message),d=null}else{e=[];b=b.replace(/\n/gm," ").replace(/ +$/,"").split(" ");for(c=0;c<b.length;c++){f=parseInt(b[c],16);if(isNaN(f)){t("Resource data error ("+a+"): invalid hex byte ("+b[c]+")");break}e.push(f&255)}c==b.length&&(d.T=e)}return d}
function ua(){return"http://"+(window?window.location.host:"www.pcjs.org")}function Fa(){if(null==Ga){var a=!1;if(window)try{window.localStorage.setItem("PCjs.localStorage","PCjs.localStorage"),a="PCjs.localStorage"==window.localStorage.getItem("PCjs.localStorage"),window.localStorage.removeItem("PCjs.localStorage")}catch(b){a=!1}Ga=a}return Ga}function Ha(a){if(window)try{var b=window.localStorage.getItem(a)}catch(c){}return b}
function Ia(a,b){try{return window.localStorage.setItem(a,b),!0}catch(c){}return!1}function Ja(a){if(window){var b=window?window.navigator.userAgent:"";return"iOS"==a&&!!b.match(/(iPod|iPhone|iPad)/)&&!!b.match(/AppleWebKit/)||"MSIE"==a&&!!b.match(/(MSIE|Trident)/)||0<=b.indexOf(a)}return!1}function Ka(a,b,c){if(a)for(var d=0;d<La.length;d++){var e=La[d];if(c){if(e+=c,b+e in a)return e}else if(e=e?e+b[0].toUpperCase():b[0],e+=b.substr(1),e in a)return e}return null}
function Ma(a){if(!Na){var b,c={};if(window){b||(b=window.location.search.substr(1));for(var d,e=/\+/g,f=/([^&=]+)=?([^&]*)/g;d=f.exec(b);)c[decodeURIComponent(d[1].replace(e," "))]=decodeURIComponent(d[2].replace(e," "))}Na=c}return Na[a]||Na[a.toLowerCase()]}function Oa(a,b){if(window){var c=window[a];window[a]="function"!==typeof c?b:function(){c&&c();b()}}}function Pa(a){Qa.init.push(a)}
function Ra(a){if(Sa)try{for(var b=0;b<a.length;b++)a[b]()}catch(c){Ta("An unexpected exception occurred:\n\n"+c.message+"\n\nPlease send this information to support@pcjs.org. Thanks.",void 0,void 0)}}function Ua(a){!Sa&&a?(Sa=!0,Va&&Wa("init"),Xa&&Wa("show")):Sa=a}function Wa(a){Qa[a]&&Ra(Qa[a])}var Na=null,Qa={init:[],show:[],exit:[]},La=["","moz","ms","webkit"],Va=!1,Xa=!1,Sa=!0,Ga=null;Oa("onload",function(){Va=!0;Ra(Qa.init)});Oa("onpageshow",function(){Xa=!0;Ra(Qa.show)});
Oa(Ja("iOS")?"onpagehide":Ja("Opera")?"onunload":"onbeforeunload",function(){Ra(Qa.exit)});function v(a,b){this.type=a;b||(b={id:"",name:""});this.id=b.id||"";this.name=b.name;this.Rb=b.comment;this.Uc=b;this.exports={};this.w=this.bindings={};a=this.id.indexOf(".");0>a?this.Tb=this.id:(this.Ia=this.id.substr(0,a),this.Tb=this.id.substr(a+1));this.h={ready:!1,$a:!1,lb:!1,kf:!1,V:!1,qb:!1,error:!1};this.cb=null;this.h.error=!1;this.K=this.m=this.u=this.D=null;w.push(this)}
function $a(a,b,c){ab[a]&&b&&(ab[a][b]=c)}function bb(){return Date.now()||+new Date}function Ta(a,b,c){b||t((c?c+": ":"")+a)}function t(a){window&&window.alert(a)}function cb(a){var b=!1;window&&(b=window.confirm(a));return b}function db(a,b){a.value+=b;b=a.value;8192<b.length&&(a.value=b.substr(b.length-4096));a.scrollTop=a.scrollHeight}
function eb(a,b){b=z(b.parentNode,"pc8080-control");for(var c=0;c<b.length;c++)for(var d=b[c].childNodes,e=0;e<d.length;e++){var f=d[e];if(1===f.nodeType){var g=f.getAttribute("class");if(g)for(var h=g.split(" "),m=0;m<h.length;m++)switch(g=h[m],g){case "pc8080-binding":(g=A(f))&&g.binding&&a.S(g.type,g.binding,f,g.value),m=h.length}}}}function fb(a){var b,c=[];a&&(a=0<(b=a.indexOf("."))?a.substr(0,b+1):"");for(b=0;b<w.length;b++){var d=w[b];a&&d.id.indexOf(a)||c.push(d)}return c}
function gb(a){if(void 0!==a){var b;for(b=0;b<w.length;b++)if(w[b].id===a)return w[b]}return null}function hb(a,b){var c;if(void 0!==a){var d;b&&(b=0<(d=b.indexOf("."))?b.substr(0,d+1):"");for(d=0;d<w.length;d++)if(c)c==w[d]&&(c=null);else if(!(a!=w[d].type||b&&w[d].id.indexOf(b)))return w[d]}return null}function A(a){var b=null;if(a=a.getAttribute("data-value"))try{b=eval("("+a+")")}catch(c){t(c.message+" ("+a+")")}return b}
function z(a,b,c){c&&(b+="-"+c+"-object");if(a.getElementsByClassName)return a.getElementsByClassName(b);var d;c=[];a=a.getElementsByTagName("*");var e=new RegExp("(^| )"+b+"( |$)");b=0;for(d=a.length;b<d;b++)e.test(a[b].className)&&c.push(a[b]);return c}
function ib(a){for(var b=!0,c=jb[a];c&&c.length;){var d=c.splice(0,1)[0],e=d[0],f=null;0<=kb.indexOf(e)&&(f=function(){return function(){ib(a)}}());var g=lb[e];if(g)if(!f)b=g(d[1],d[2],d[3]);else{if(!g(f,d[1],d[2],d[3]))break}else{b=!1;var h=hb(d[1],a);if(h)if(g=mb[e])b=g(h,d[2],d[3]);else{var m=h.exports;if(m&&(g=m[e]))if(b=!0,!f)b=g.call(h,d[2],d[3]);else if(!g.call(h,f,d[2],d[3]))break}}if(!b){t("Script error: '"+e+(g?" failed":" unrecognized"));break}}c&&!c.length&&delete jb[a];return b}k=v.prototype;
k.toString=function(){return this.name?this.name:this.id||this.type};
k.S=function(a,b,c){switch(b){case "clear":return this.w[b]||(this.w[b]=c,c.onclick=function(a){return function(){a.w.print&&(a.w.print.value="")}}(this)),!0;case "print":return this.w[b]||(this.w[b]=c,this.G=function(a){this.aa(a,this.type);return!0},c.value="",this.print=function(a){return function(b){db(a,b)}}(c),this.aa=function(a,b){return function(a,c){a||(a="");if(c!=nb||"..."!=a.slice(-3))c&&(a=c+": "+a),db(b,a+"\n");else{c=b.value;var d=c.lastIndexOf(a);0>d?c+=a+"\n":c=c.substr(0,d)+(a+".")+
c.substr(d+a.length);8192<c.length&&(c=c.substr(c.length-4096));b.value=c;b.scrollTop=b.scrollHeight}}}(this,c)),!0;default:return!1}};k.log=function(){};k.print=function(){};k.aa=function(){};k.status=function(a){this.aa(this.type+": "+a)};k.G=function(a,b,c){if(!b){var d=hb("Computer",this.id);if(d&&d.h.qb)return console.log("ignoring notice during unload: "+a),!1}Ta(a,b,c||this.type);return!0};function ob(a,b){b&&(a.h.ready?b():a.cb=b);return a.h.ready}
function B(a){if(!a.h.error&&(a.h.ready=!0,a.h.ready)){var b=a.cb;a.cb=null;b&&b()}}function pb(a,b){if(a.h.lb)return a.h.$a=!1,a.h.lb=!1;if(a.h.error)return a.aa(a.toString()+" error"),!1;a.h.$a=b;return a.h.$a}k.ca=function(){return this.h.V=!0};k.ba=function(a,b){b&&(this.h.V=!1);return!0};var nb="progress";window&&(window.PCjs||(window.PCjs={}),window.PCjs.Machines||(window.PCjs.Machines={}),window.PCjs.Components||(window.PCjs.Components=[]),window.PCjs.Commands||(window.PCjs.Commands={}));
var ab=window?window.PCjs.Machines:{},w=window?window.PCjs.Components:[],jb=window?window.PCjs.Commands:{},kb=["hold","sleep","wait"],lb={alert:function(a){t(a);return!0},sleep:function(a,b){setTimeout(a,+b);return!1}},mb={select:function(a,b,c){var d=!1;if(a=a.bindings[b])for(b=0;b<a.options.length;b++)if(a.options[b].textContent==c){a.selectedIndex!=b&&(a.selectedIndex=b);d=!0;break}return d}};
Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){b=b||0;for(var c=this.length;b<c;b++)if(this[b]===a)return b;return-1});Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return e.apply(this instanceof c&&a?this:a,d.concat(Array.prototype.slice.call(arguments)))}function c(){}if("function"!=typeof this)throw new TypeError("Function.prototype.bind: non-callable object");var d=Array.prototype.slice.call(arguments,1),e=this;c.prototype=this.prototype;b.prototype=new c;return b});
var qb="undefined"!==typeof ArrayBuffer,rb=[1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,
0,0,1,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1];function ub(a){v.call(this,"Panel",a)}l(ub,v);ub.prototype.S=function(a,b,c,d){return this.D&&this.D.S(a,b,c,d)||this.m&&this.m.S(a,b,c,d)||this.i&&this.i.S(a,b,c,d)?!0:v.prototype.S.call(this,a,b,c,d)};ub.prototype.pa=function(a,b,c,d){this.D=a;this.u=b;this.m=c;this.K=d;this.i=vb(a,"Keyboard")};ub.prototype.ca=function(a,b){b||wb();return!0};ub.prototype.ba=function(){return!0};
function wb(){for(var a=!1,b=z(document,"pc8080","panel"),c=0;c<b.length;c++){var d=b[c],e=A(d),f=gb(e.id);f||(a=!0,f=new ub(e));eb(f,d);a&&B(f)}}Pa(wb);
function xb(a,b,c){v.call(this,"Bus",a);this.m=b;this.K=c;this.s=a.busWidth||16;this.v=Math.pow(2,this.s);this.g=this.v-1|0;this.b=(this.s>>1)+2;10>this.b&&(this.b=10);15<this.b&&(this.b=15);this.c=1<<this.b;this.A=this.c>>2;this.f=this.c-1;this.i=this.v/this.c|0;this.o=this.i-1;this.j=[];this.l=[];this.B=[];this.C=[];a=new C;yb(a,this.K);this.a=Array(this.i);for(b=0;b<this.i;b++)this.a[b]=a;B(this)}l(xb,v);xb.prototype.reset=function(){};xb.prototype.ca=function(a,b){b||this.reset();return!0};
function zb(a,b,c,d){for(var e=b,f=c,g=e>>>a.b;0<f&&g<a.a.length;){var h=a.a[g],m=g*a.c,q=a.c-(e-m);q>f&&(q=f);if(h&&h.size){if(h.type==d){if(e+f<=h.Pa)return h.hb+=h.Pa-e,h.Pa=e,!0;if(e>=h.Pa+h.hb){q=h.size-(e-m);q>f&&(q=f);h.hb=e-h.Pa+q;e=m+a.c;f-=q;g++;continue}}return Ab(Bb,e,f)}e=new C(e,q,a.c,d);yb(e,a.K,h);a.a[g++]=e;e=m+a.c;f-=q}return 0>=f?(a.status(Math.floor(c/1024)+"Kb "+Cb[d]+" at "+p(b,4,!0)),!0):Ab(Db,b,c)}function Eb(a,b){return a.a[(b&a.g)>>>a.b].gb(b&a.f,b)}
function Fb(a,b){var c=b&a.f,d=(b&a.g)>>>a.b;return c!=a.f?a.a[d].Ed(c,b):a.a[d++].Ta(c,b)|a.a[d&a.o].Ta(0,b+1)<<8}function Gb(a,b,c){a.a[(b&a.g)>>>a.b].gc(b&a.f,c&255,b)}function Hb(a,b,c){var d=b&a.f,e=(b&a.g)>>>a.b;d!=a.f?a.a[e].Sd(d,c&65535,b):(a.a[e++].Ua(d,c&255,b),a.a[e&a.o].Ua(0,c>>8&255,b+1))}
function Ib(a){for(var b=0,c=[],d=0;d<a.i;d++){var e=a.a[d];if(e.ka||e.Yb){c[b++]=d;var f=b++;if(e=e.save()){for(var g=0,h=0,m=[];g<e.length;){for(var q=e[g],r=g+1;r<e.length&&e[r]===q;)r++;m[h++]=r-g;m[h++]=q;g=r}m.length<e.length&&(e=m)}c[f]=e}}return c}function Jb(a,b,c,d){void 0===d&&(d=0);if(c)for(var e in c){var f=a,g=+e+d,h=c[e].bind(b);if(h)for(var m=+e+d;m<=g;m++)void 0!==f.j[m]?t("Input port "+p(m,4,!0)+" already registered"):f.j[m]=[h,!1]}}
function Kb(a,b,c,d){void 0===d&&(d=0);if(c)for(var e in c){var f=a,g=+e+d,h=c[e].bind(b);if(h)for(var m=+e+d;m<=g;m++)void 0!==f.l[m]?t("Output port "+p(m,4,!0)+" already registered"):f.l[m]=[h,!1]}}function Ab(a,b,c){t("Memory block error ("+a+": "+p(b)+","+p(c)+")");return!1}var Bb=1,Db=2,Lb;if(qb){var Mb=new ArrayBuffer(2);(new DataView(Mb)).setUint16(0,256,!0);Lb=256===(new Uint16Array(Mb))[0]}else Lb=!1;var Nb=Lb;
function C(a,b,c,d){this.id=Ob+=2;this.a=null;this.Pa=a;this.hb=b;this.size=c||0;this.type=d||Pb;this.w=d==Qb;yb(this);this.ka=this.Yb=!1;if(c)if(qb)this.m=new ArrayBuffer(c),this.u=new DataView(this.m,0,c),this.b=new Uint8Array(this.m,0,c),this.g=new Uint16Array(this.m,0,c>>1),this.a=new Int32Array(this.m,0,c>>2),Rb(this,Nb?Sb:Tb);else{this.a=Array(c>>2);for(a=0;a<this.a.length;a++)this.a[a]=0;Rb(this,Ub)}else Rb(this)}k=C.prototype;
k.save=function(){var a;if(qb){var b=Array(this.size>>2);for(a=0;a<b.length;a++)b[a]=this.u.getInt32(a<<2,!0)}else b=this.a;return b};k.restore=function(a){if(a&&this.size==a.length<<2){var b;if(qb)for(b=0;b<a.length;b++)this.u.setInt32(b<<2,a[b],!0);else this.a=a;return this.ka=!0}return!1};function Rb(a,b){b||(b=Vb);Wb(a,b,void 0);Xb(a,b,void 0)}function Wb(a,b,c){c&&a.c||(a.Ta=b[0]||a.bc,a.Ed=b[2]||a.cc);if(c||void 0===c)a.gb=b[0]||a.bc,a.dc=b[2]||a.cc}
function Xb(a,b,c){c&&a.f||(a.Ua=!a.w&&b[1]||a.hc,a.Sd=!a.w&&b[3]||a.ic);if(c||void 0===c)a.gc=b[1]||a.hc,a.i=b[3]||a.ic}function yb(a,b,c){a.K=b;a.c=a.f=0;c&&((a.c=c.c)&&Wb(a,Yb,!1),(a.f=c.f)&&Xb(a,Yb,!1))}k.bc=function(){return 255};k.hc=function(){};k.cc=function(a,b){return this.Ta(a++,b++)|this.Ta(a,b)<<8};k.ic=function(a,b,c){this.Ua(a++,b&255,c++);this.Ua(a,b>>8,c)};k.Dd=function(a){return this.a[a>>2]>>>((a&3)<<3)&255};
k.Id=function(a){var b=a>>2;a=(a&3)<<3;var c=this.a[b]>>a;return 24>a?c&65535:c&255|(this.a[b+1]&255)<<8};k.Rd=function(a,b){var c=a>>2;a=(a&3)<<3;this.a[c]=this.a[c]&~(255<<a)|b<<a;this.ka=!0};k.Wd=function(a,b){var c=a>>2;a=(a&3)<<3;24>a?this.a[c]=this.a[c]&~(65535<<a)|b<<a:(this.a[c]=this.a[c]&16777215|b<<24,c++,this.a[c]=this.a[c]&-256|b>>8);this.ka=!0};k.Bd=function(a,b){return this.gb(a,b)};k.Gd=function(a,b){return this.dc(a,b)};k.Pd=function(a,b,c){this.w||this.gc(a,b,c)};
k.Ud=function(a,b,c){this.w||this.i(a,b,c)};k.Ad=function(a){return this.b[a]};k.Cd=function(a){return this.b[a]};k.Fd=function(a){return this.u.getUint16(a,!0)};k.Hd=function(a){return a&1?this.b[a]|this.b[a+1]<<8:this.g[a>>1]};k.Od=function(a,b){this.b[a]=b;this.ka=!0};k.Qd=function(a,b){this.b[a]=b;this.ka=!0};k.Td=function(a,b){this.u.setUint16(a,b,!0);this.ka=!0};k.Vd=function(a,b){a&1?(this.b[a]=b,this.b[a+1]=b>>8):this.g[a>>1]=b;this.ka=!0};
var Pb=0,Qb=2,Cb=["NONE","RAM","ROM","VID","H/W"],Ob=0,Vb=[],Ub=[C.prototype.Dd,C.prototype.Rd,C.prototype.Id,C.prototype.Wd],Yb=[C.prototype.Bd,C.prototype.Pd,C.prototype.Gd,C.prototype.Ud];if(qb)var Tb=[C.prototype.Ad,C.prototype.Od,C.prototype.Fd,C.prototype.Td],Sb=[C.prototype.Cd,C.prototype.Qd,C.prototype.Hd,C.prototype.Vd];
function Zb(a,b){v.call(this,"CPU",a);var c=a.multiplier||1;this.na=a.cycles||b;this.O=c;this.Da=Math.round(this.na/1E4)/100;this.X=this.Da*this.O;this.h.ga=!1;this.h.ec=!1;this.h.Qa=a.autoStart;this.h.Wb=!1;this.h.ab=!1;this.va=this.ea=0;this.wa=a.csStart;this.ia=a.csInterval;this.la=a.csStop;this.I=[];this.kb=this.ob.bind(this);B(this)}l(Zb,v);k=Zb.prototype;
k.pa=function(a,b,c,d){this.D=a;this.u=b;this.K=d;for(b=0;b<$b.length;b++)(c=this.w[$b[b]])&&this.D.S(null,$b[b],c);this.N=vb(a,"ChipSet");a=ac(a,"autoStart");null!=a&&(this.h.Qa="true"==a?!0:"false"==a?!1:!!a);B(this)};k.reset=function(){};k.save=function(){return null};k.restore=function(){return!1};k.ca=function(a,b){if(!b){if(a&&this.restore){bc(this);if(!this.restore(a))return!1;cc(this)}else this.reset();this.aa("No debugger detected")}dc(this);return!0};
k.ba=function(a){return a?this.save():!0};k.Qa=function(){return this.h.Qa||void 0===this.w.run?(this.ob(),!0):!1};k.Zb=function(){return 0};function cc(a){void 0===a.wa&&(a.wa=0);void 0===a.ia&&(a.ia=-1);void 0===a.la&&(a.la=-1);a.h.ab=0<=a.wa&&0<a.ia;a.h.ab&&(a.va=0,a.ea=a.wa-a.H)}
k.S=function(a,b,c){var d=this;a=!1;switch(b){case "power":case "reset":this.w[b]=c;a=!0;break;case "run":this.w[b]=c;c.onclick=function(){var a;if(a=d.D)if(a=d.D,a.h.V)a=!0;else{var b=null,c,h=fb(a.id);for(c=0;c<h.length&&(b=h[c],b===a||b.h.ready);c++);if(c==h.length)for(c=0;c<h.length&&(b=h[c],b===a||b.h.V);c++);c==h.length&&(b=a);t("The "+b.type+" component ("+b.id+") is not "+(b.h.ready?"powered yet":"ready yet"+(b.cb?" (waiting for notification)":""))+".");a=!1}a&&(d.h.ga?ec(d):d.ob())};a=!0;
break;case "speed":this.w[b]=c;a=!0;break;case "setSpeed":this.w[b]=c,c.onclick=function(){fc(d,d.O<<1,!0)},c.textContent=this.X.toFixed(2)+"Mhz",a=!0}return a};function gc(a,b){var c=1;b&&1<a.O&&a.R&&(c=a.R/a.Da);a.Na=Math.round(1E3/hc);a.xa=Math.floor(a.na/hc*c);b||(a.ma=a.xa);a.Ea=0}function ic(a){return a.H+a.P+a.da-a.a}function bc(a){a.R=0;a.Oa=0;a.H=a.P=a.da=a.a=0;cc(a);fc(a,1)}
function fc(a,b,c){if(void 0!==b){.8>a.R/a.X&&(b=1);a.O=b;b=a.Da*a.O;if(a.X!=b){a.X=b;b=a.X.toFixed(2)+"Mhz";var d=a.w.setSpeed;d&&(d.textContent=b);a.aa("target speed: "+b)}c&&a.D&&kc(a.D)}a.H+=a.P;a.P=0;a.J=bb();a.W=0;gc(a)}function lc(a,b,c){var d=void 0===d?-1:d;var e=a.I.length;a.I.push([b,-1,d,c]);0<=d&&mc(a,e,d);return e}function mc(a,b,c){0<=b&&b<a.I.length&&(b=a.I[b],0>b[1]&&(c=a.na*a.O/1E3*c|0,a.h.ga&&(c+=nc(a)),b[1]=c))}function nc(a,b){var c=a.da-=a.a;a.a=0;b&&(a.da=0);return c}
k.ob=function(a){if(pb(this,!0)){if(!this.h.ga){fc(this);this.D&&this.D.start(this.J,ic(this));this.h.ga=!0;this.h.ec=!0;this.N&&this.N.start();var b=this.w.run;b&&(b.textContent="Halt");this.D&&(oc(this.D,!0),a&&kc(this.D,!0))}this.Ea>=this.na&&gc(this,!0);this.oa=0;this.ua=bb();this.W&&(a=this.ua-this.W,a>this.Na&&(this.J+=a,this.J>this.ua&&(this.J=this.ua)));try{do{for(var c,d=this.h.ab?1:this.xa,e=this.I.length-1;0<=e;e--){var f=this.I[e];0>f[1]||d>f[1]&&(d=f[1])}c=d;this.fc(c);c=nc(this,!0);
this.oa+=c;this.P+=c;a=c;this.h.ab&&(b=!1,this.va=this.va+this.Zb()|0,this.ea-=a,0>=this.ea&&(this.ea+=this.ia,b=!0),0<=this.la&&this.la<=ic(this)&&(this.ia=this.la=-1,cc(this),ec(this),b=!0),b&&this.aa(ic(this)+" cycles: checksum="+p(this.va)));a=c;for(var g=this.I.length-1;0<=g;g--){var h=this.I[g];0>h[1]||(h[1]-=a,0>=h[1]&&(h[1]=-1,h[3](),0<=h[2]&&mc(this,g,h[2])))}this.ma-=c;if(0>=this.ma){this.ma+=this.xa;++this.Oa>=pc&&(this.D&&oc(this.D),this.Oa=0);break}}while(this.h.ga)}catch(m){ec(this);
dc(this);this.D&&this.D.stop(bb(),ic(this));pb(this,!1);c=m.stack||m.message;this.h.error=!0;this.G(c);return}c=setTimeout;d=this.kb;this.W=bb();e=this.Na;this.oa&&(e=Math.round(e*this.oa/this.xa));e-=this.W-this.ua;if(f=this.W-this.J)this.R=Math.round(this.P/(10*f))/100,864E5<=f&&(this.H=0,fc(this));if(0>e||this.R<this.X)-1E3>e&&(this.J-=e),e=0;this.Ea+=this.oa;this.W+=e;c(d,e)}else dc(this),this.D&&this.D.stop(bb(),ic(this))};k.fc=function(){return 0};
function ec(a){a.h.$a&&(a.h.lb=!0);nc(a);a.H+=a.P;a.P=0;if(a.h.ga){a.h.ga=!1;a.N&&a.N.stop();var b=a.w.run;b&&(b.textContent="Run")}a.h.complete=void 0}function dc(a){if(a.D){for(var b=a.D,c=0;c<b.g.length;c++)qc(b.g[c],void 0);oc(a.D,void 0)}}var hc=30,pc=15,$b=["power","reset"];function rc(a){Zb.call(this,a,1E6);this.Ka=sc;bc(this);this.h.complete=this.h.Vc=!1;this.Ma=0;this.qa=[];this.La=0;tc(this)}l(rc,Zb);function uc(a,b){a.qa.push(b)}k=rc.prototype;
k.reset=function(){this.h.ga&&ec(this);tc(this);bc(this);this.h.error=!1;Zb.prototype.reset.call(this)};function tc(a){a.b=0;a.g=0;a.c=0;a.i=0;a.f=0;a.j=0;a.l=0;a.A=0;D(a,a.La);vc(a,0);a.C=0}function wc(a,b){a.La=b;D(a,b)}k.Zb=function(){var a=this.b+this.g+this.c+this.i+this.f+this.j+this.l|0;return a=a+this.A+this.s+xc(this)|0};
k.save=function(){var a=new E(this);a.set(0,[this.b,this.g,this.c,this.i,this.f,this.j,this.l,this.A,this.s,xc(this)]);a.set(1,[this.C,this.H,this.O]);a.set(2,Ib(this.u));return a.data()};
k.restore=function(a){var b=a[0];this.b=b[0];this.g=b[1];this.c=b[2];this.i=b[3];this.f=b[4];this.j=b[5];this.l=b[6];this.A=b[7]&65535;D(this,b[8]);vc(this,b[9]);b=a[1];this.C=b[0];this.H=b[1];fc(this,b[3]);a:{b=this.u;a=a[2];var c;for(c=0;c<a.length-1;c+=2){var d=a[c],e=a[c+1];if(e&&e.length<b.A){for(var f=0,g=Array(b.A),h=0;h<e.length-1;)for(var m=e[h++],q=e[h++];m--;)g[f++]=q;e=g}f=b.a[d];if(!f||!f.restore(e)){t("Unable to restore memory block "+d);b=!1;break a}}b=!0}return b};
k.S=function(a,b,c){switch(b){case "A":case "B":case "C":case "BC":case "D":case "E":case "DE":case "H":case "L":case "HL":case "SP":case "PC":case "PS":case "IF":case "SF":case "ZF":case "AF":case "PF":case "CF":this.w[b]=c;this.Ma++;a=!0;break;default:a=Zb.prototype.S.call(this,a,b,c)}return a};function yc(a){return a.g<<8|a.c}function zc(a,b){a.g=b>>8&255;a.c=b&255}function Ac(a){return a.i<<8|a.f}function Bc(a,b){a.i=b>>8&255;a.f=b&255}function H(a){return a.j<<8|a.l}
function I(a,b){a.j=b>>8&255;a.l=b&255}function D(a,b){a.s=b&65535}function J(a){return a.o&256?1:0}function Cc(a,b){a.o=a.o&255|b}function Dc(a){return rb[a.v&255]?4:0}function xc(a){return a.F&-214|(a.v&128?128:0)|(a.o&255?0:64)|((a.v^a.B)&16?16:0)|Dc(a)|J(a)}function vc(a,b){a.o=a.v=a.B=0;b&1&&(a.o|=256);b&4||(a.v|=1);b&16&&(a.B|=16);b&64||(a.o|=255);b&128&&(a.v^=192);a.F=a.F&-726|b&512|2}function Ec(a,b){a.B=a.b^b;return a.v=(a.o=a.b+b)&255}
function Fc(a,b){a.B=a.b^b;return a.v=(a.o=a.b+b+(a.o&256?1:0))&255}function Gc(a,b){a.o=a.v=a.B=a.b&b;(a.b|b)&8&&(a.B^=16);return a.o}function Hc(a,b){a.B=b^255;b=a.v=b+255&255;a.o=a.o&-256|b;return b}function Ic(a,b){a.B=b;b=a.v=b+1&255;a.o=a.o&-256|b;return b}function Jc(a,b){return a.v=a.o=a.B=a.b|b}function K(a,b){b^=255;a.B=a.b^b;return a.v=(a.o=a.b+b+1^256)&255}function Kc(a,b){b^=255;a.B=a.b^b;return a.v=(a.o=a.b+b+(a.o&256?0:1)^256)&255}function Lc(a,b){return a.v=a.o=a.B=a.b^b}
function L(a,b){a=a.u;return a.a[(b&a.g)>>>a.b].Ta(b&a.f,b)}function M(a,b,c){a=a.u;a.a[(b&a.g)>>>a.b].Ua(b&a.f,c&255,b)}function N(a){var b=L(a,a.s);D(a,a.s+1);return b}function O(a){var b=Fb(a.u,a.s);D(a,a.s+2);return b}function P(a){var b=Fb(a.u,a.A);a.A=a.A+2&65535;return b}function Q(a,b){a.A=a.A-2&65535;Hb(a.u,a.A,b)}function Mc(a){if(a.a&&a.C&255&&a.F&512){for(var b=0;8>b&&!(a.C&1<<b);b++);a.C&=~(0>b?255:1<<b);a.F&=-513;a.C&=-257;a.Ka[199|b<<3].call(a)}return a.C&256?(nc(a),!1):!0}
function Nc(a,b){a.C|=1<<b;a.F&512&&nc(a)}function R(a,b,c,d){d=d||2;a.w[b]&&(void 0===c&&(a.h.error=!0,a.G("Value for "+b+" is invalid"),ec(a)),c=!a.h.ga||a.h.Wb?p(c,d):"--------".substr(0,d),a.w[b].textContent!=c&&(a.w[b].textContent=c))}k.fc=function(a){this.h.complete=!0;this.h.Vc=!1;this.h.ec=!1;this.da=this.a=a;if(Mc(this)){do this.Ka[N(this)].call(this);while(0<this.a)}return this.h.complete?this.da-this.a:void 0===this.h.complete?0:-1};
Pa(function(){for(var a=z(document,"pc8080","cpu"),b=0;b<a.length;b++){var c=a[b],d=A(c);d=new rc(d);eb(d,c)}});function Oc(){this.a-=4}function Pc(){D(this,O(this));this.a-=10}function Qc(){D(this,P(this));this.a-=10}function Rc(){var a=O(this);Q(this,this.s);D(this,a);this.a-=17}
var sc=[Oc,function(){zc(this,O(this));this.a-=10},function(){M(this,yc(this),this.b);this.a-=7},function(){zc(this,yc(this)+1);this.a-=5},function(){this.g=Ic(this,this.g);this.a-=5},function(){this.g=Hc(this,this.g);this.a-=5},function(){this.g=N(this);this.a-=7},function(){var a=this.b<<1;this.b=a&255|a>>8;Cc(this,a&256);this.a-=4},Oc,function(){var a;I(this,a=H(this)+yc(this));Cc(this,a>>8&256);this.a-=10},function(){this.b=L(this,yc(this));this.a-=7},function(){zc(this,yc(this)-1);this.a-=5},
function(){this.c=Ic(this,this.c);this.a-=5},function(){this.c=Hc(this,this.c);this.a-=5},function(){this.c=N(this);this.a-=7},function(){var a=this.b<<8&256;this.b=(a|this.b)>>1;Cc(this,a);this.a-=4},Oc,function(){Bc(this,O(this));this.a-=10},function(){M(this,Ac(this),this.b);this.a-=7},function(){Bc(this,Ac(this)+1);this.a-=5},function(){this.i=Ic(this,this.i);this.a-=5},function(){this.i=Hc(this,this.i);this.a-=5},function(){this.i=N(this);this.a-=7},function(){var a=this.b<<1;this.b=a&255|J(this);
Cc(this,a&256);this.a-=4},Oc,function(){var a;I(this,a=H(this)+Ac(this));Cc(this,a>>8&256);this.a-=10},function(){this.b=L(this,Ac(this));this.a-=7},function(){Bc(this,Ac(this)-1);this.a-=5},function(){this.f=Ic(this,this.f);this.a-=5},function(){this.f=Hc(this,this.f);this.a-=5},function(){this.f=N(this);this.a-=7},function(){var a=this.b<<8;this.b=(J(this)<<8|this.b)>>1;Cc(this,a&256);this.a-=4},Oc,function(){I(this,O(this));this.a-=10},function(){var a=O(this);Hb(this.u,a,H(this));this.a-=16},
function(){I(this,H(this)+1);this.a-=5},function(){this.j=Ic(this,this.j);this.a-=5},function(){this.j=Hc(this,this.j);this.a-=5},function(){this.j=N(this);this.a-=7},function(){var a=0,b=J(this);if((this.v^this.B)&16||9<(this.b&15))a|=6;if(b||154<=this.b)a|=96,b=1;this.b=Ec(this,a);Cc(this,b?256:0);this.a-=4},Oc,function(){var a;I(this,a=H(this)+H(this));Cc(this,a>>8&256);this.a-=10},function(){var a=O(this);a=Fb(this.u,a);I(this,a);this.a-=16},function(){I(this,H(this)-1);this.a-=5},function(){this.l=
Ic(this,this.l);this.a-=5},function(){this.l=Hc(this,this.l);this.a-=5},function(){this.l=N(this);this.a-=7},function(){this.b=~this.b&255;this.a-=4},Oc,function(){this.A=O(this)&65535;this.a-=10},function(){M(this,O(this),this.b);this.a-=13},function(){this.A=this.A+1&65535;this.a-=5},function(){var a=H(this);M(this,a,Ic(this,L(this,a)));this.a-=10},function(){var a=H(this);M(this,a,Hc(this,L(this,a)));this.a-=10},function(){M(this,H(this),N(this));this.a-=10},function(){this.o|=256;this.a-=4},Oc,
function(){var a;I(this,a=H(this)+this.A);Cc(this,a>>8&256);this.a-=10},function(){this.b=L(this,O(this));this.a-=13},function(){this.A=this.A-1&65535;this.a-=5},function(){this.b=Ic(this,this.b);this.a-=5},function(){this.b=Hc(this,this.b);this.a-=5},function(){this.b=N(this);this.a-=7},function(){Cc(this,J(this)?0:256);this.a-=4},function(){this.a-=5},function(){this.g=this.c;this.a-=5},function(){this.g=this.i;this.a-=5},function(){this.g=this.f;this.a-=5},function(){this.g=this.j;this.a-=5},function(){this.g=
this.l;this.a-=5},function(){this.g=L(this,H(this));this.a-=7},function(){this.g=this.b;this.a-=5},function(){this.c=this.g;this.a-=5},function(){this.a-=5},function(){this.c=this.i;this.a-=5},function(){this.c=this.f;this.a-=5},function(){this.c=this.j;this.a-=5},function(){this.c=this.l;this.a-=5},function(){this.c=L(this,H(this));this.a-=7},function(){this.c=this.b;this.a-=5},function(){this.i=this.g;this.a-=5},function(){this.i=this.c;this.a-=5},function(){this.a-=5},function(){this.i=this.f;
this.a-=5},function(){this.i=this.j;this.a-=5},function(){this.i=this.l;this.a-=5},function(){this.i=L(this,H(this));this.a-=7},function(){this.i=this.b;this.a-=5},function(){this.f=this.g;this.a-=5},function(){this.f=this.c;this.a-=5},function(){this.f=this.i;this.a-=5},function(){this.a-=5},function(){this.f=this.j;this.a-=5},function(){this.f=this.l;this.a-=5},function(){this.f=L(this,H(this));this.a-=7},function(){this.f=this.b;this.a-=5},function(){this.j=this.g;this.a-=5},function(){this.j=
this.c;this.a-=5},function(){this.j=this.i;this.a-=5},function(){this.j=this.f;this.a-=5},function(){this.a-=5},function(){this.j=this.l;this.a-=5},function(){this.j=L(this,H(this));this.a-=7},function(){this.j=this.b;this.a-=5},function(){this.l=this.g;this.a-=5},function(){this.l=this.c;this.a-=5},function(){this.l=this.i;this.a-=5},function(){this.l=this.f;this.a-=5},function(){this.l=this.j;this.a-=5},function(){this.a-=5},function(){this.l=L(this,H(this));this.a-=7},function(){this.l=this.b;
this.a-=5},function(){M(this,H(this),this.g);this.a-=7},function(){M(this,H(this),this.c);this.a-=7},function(){M(this,H(this),this.i);this.a-=7},function(){M(this,H(this),this.f);this.a-=7},function(){M(this,H(this),this.j);this.a-=7},function(){M(this,H(this),this.l);this.a-=7},function(){var a=this.s-1;if(this.qa.length)for(var b=0;b<this.qa.length;b++)if(this.qa[b](a))return;this.a-=7;this.C|=256;nc(this);this.F&512||ec(this)},function(){M(this,H(this),this.b);this.a-=7},function(){this.b=this.g;
this.a-=5},function(){this.b=this.c;this.a-=5},function(){this.b=this.i;this.a-=5},function(){this.b=this.f;this.a-=5},function(){this.b=this.j;this.a-=5},function(){this.b=this.l;this.a-=5},function(){this.b=L(this,H(this));this.a-=7},function(){this.a-=5},function(){this.b=Ec(this,this.g);this.a-=4},function(){this.b=Ec(this,this.c);this.a-=4},function(){this.b=Ec(this,this.i);this.a-=4},function(){this.b=Ec(this,this.f);this.a-=4},function(){this.b=Ec(this,this.j);this.a-=4},function(){this.b=
Ec(this,this.l);this.a-=4},function(){this.b=Ec(this,L(this,H(this)));this.a-=7},function(){this.b=Ec(this,this.b);this.a-=4},function(){this.b=Fc(this,this.g);this.a-=4},function(){this.b=Fc(this,this.c);this.a-=4},function(){this.b=Fc(this,this.i);this.a-=4},function(){this.b=Fc(this,this.f);this.a-=4},function(){this.b=Fc(this,this.j);this.a-=4},function(){this.b=Fc(this,this.l);this.a-=4},function(){this.b=Fc(this,L(this,H(this)));this.a-=7},function(){this.b=Fc(this,this.b);this.a-=4},function(){this.b=
K(this,this.g);this.a-=4},function(){this.b=K(this,this.c);this.a-=4},function(){this.b=K(this,this.i);this.a-=4},function(){this.b=K(this,this.f);this.a-=4},function(){this.b=K(this,this.j);this.a-=4},function(){this.b=K(this,this.l);this.a-=4},function(){this.b=K(this,L(this,H(this)));this.a-=7},function(){this.b=K(this,this.b);this.a-=4},function(){this.b=Kc(this,this.g);this.a-=4},function(){this.b=Kc(this,this.c);this.a-=4},function(){this.b=Kc(this,this.i);this.a-=4},function(){this.b=Kc(this,
this.f);this.a-=4},function(){this.b=Kc(this,this.j);this.a-=4},function(){this.b=Kc(this,this.l);this.a-=4},function(){this.b=Kc(this,L(this,H(this)));this.a-=7},function(){this.b=Kc(this,this.b);this.a-=4},function(){this.b=Gc(this,this.g);this.a-=4},function(){this.b=Gc(this,this.c);this.a-=4},function(){this.b=Gc(this,this.i);this.a-=4},function(){this.b=Gc(this,this.f);this.a-=4},function(){this.b=Gc(this,this.j);this.a-=4},function(){this.b=Gc(this,this.l);this.a-=4},function(){this.b=Gc(this,
L(this,H(this)));this.a-=7},function(){this.b=Gc(this,this.b);this.a-=4},function(){this.b=Lc(this,this.g);this.a-=4},function(){this.b=Lc(this,this.c);this.a-=4},function(){this.b=Lc(this,this.i);this.a-=4},function(){this.b=Lc(this,this.f);this.a-=4},function(){this.b=Lc(this,this.j);this.a-=4},function(){this.b=Lc(this,this.l);this.a-=4},function(){this.b=Lc(this,L(this,H(this)));this.a-=7},function(){this.b=Lc(this,this.b);this.a-=4},function(){this.b=Jc(this,this.g);this.a-=4},function(){this.b=
Jc(this,this.c);this.a-=4},function(){this.b=Jc(this,this.i);this.a-=4},function(){this.b=Jc(this,this.f);this.a-=4},function(){this.b=Jc(this,this.j);this.a-=4},function(){this.b=Jc(this,this.l);this.a-=4},function(){this.b=Jc(this,L(this,H(this)));this.a-=7},function(){this.b=Jc(this,this.b);this.a-=4},function(){K(this,this.g);this.a-=4},function(){K(this,this.c);this.a-=4},function(){K(this,this.i);this.a-=4},function(){K(this,this.f);this.a-=4},function(){K(this,this.j);this.a-=4},function(){K(this,
this.l);this.a-=4},function(){K(this,L(this,H(this)));this.a-=7},function(){K(this,this.b);this.a-=4},function(){this.o&255&&(D(this,P(this)),this.a-=6);this.a-=5},function(){zc(this,P(this));this.a-=10},function(){var a=O(this);this.o&255&&D(this,a);this.a-=10},Pc,function(){var a=O(this);this.o&255&&(Q(this,this.s),D(this,a),this.a-=6);this.a-=11},function(){Q(this,yc(this));this.a-=11},function(){this.b=Ec(this,N(this));this.a-=7},function(){Q(this,this.s);D(this,0);this.a-=11},function(){this.o&
255||(D(this,P(this)),this.a-=6);this.a-=5},Qc,function(){var a=O(this);this.o&255||D(this,a);this.a-=10},Pc,function(){var a=O(this);this.o&255||(Q(this,this.s),D(this,a),this.a-=6);this.a-=11},Rc,function(){this.b=Fc(this,N(this));this.a-=7},function(){Q(this,this.s);D(this,8);this.a-=11},function(){J(this)||(D(this,P(this)),this.a-=6);this.a-=5},function(){Bc(this,P(this));this.a-=10},function(){var a=O(this);J(this)||D(this,a);this.a-=10},function(){for(var a=N(this),b=this.u,c=this.b,d=this.s+
-2&65535,e=1,f=0;0<e;){var g=b.l[a],h=b.C[a]||1,m=1==h?255:2==h?65535:-1;m&=c>>>=f;if(void 0!==g&&g[0])g[0](a,m,d);f+=h<<3;a+=h;e-=h}this.a-=10},function(){var a=O(this);J(this)||(Q(this,this.s),D(this,a),this.a-=6);this.a-=11},function(){Q(this,Ac(this));this.a-=11},function(){this.b=K(this,N(this));this.a-=7},function(){Q(this,this.s);D(this,16);this.a-=11},function(){J(this)&&(D(this,P(this)),this.a-=6);this.a-=5},Qc,function(){var a=O(this);J(this)&&D(this,a);this.a-=10},function(){for(var a=
N(this),b=this.u,c=this.s+-2&65535,d=1,e=0,f=0;0<d;){var g=b.j[a],h=b.B[a]||1,m=1==h?255:2==h?65535:-1,q=m;void 0!==g&&g[0]&&(q=g[0](a,c),void 0===q?q=m:q&=m);e|=q<<f;f+=h<<3;a+=h;d-=h}this.b=e&255;this.a-=10},function(){var a=O(this);J(this)&&(Q(this,this.s),D(this,a),this.a-=6);this.a-=11},Rc,function(){this.b=Kc(this,N(this));this.a-=7},function(){Q(this,this.s);D(this,24);this.a-=11},function(){Dc(this)||(D(this,P(this)),this.a-=6);this.a-=5},function(){I(this,P(this));this.a-=10},function(){var a=
O(this);Dc(this)||D(this,a);this.a-=10},function(){var a=P(this);Q(this,H(this));I(this,a);this.a-=18},function(){var a=O(this);Dc(this)||(Q(this,this.s),D(this,a),this.a-=6);this.a-=11},function(){Q(this,H(this));this.a-=11},function(){this.b=Gc(this,N(this));this.a-=7},function(){Q(this,this.s);D(this,32);this.a-=11},function(){Dc(this)&&(D(this,P(this)),this.a-=6);this.a-=5},function(){D(this,H(this));this.a-=5},function(){var a=O(this);Dc(this)&&D(this,a);this.a-=10},function(){var a=H(this);
I(this,Ac(this));Bc(this,a);this.a-=5},function(){var a=O(this);Dc(this)&&(Q(this,this.s),D(this,a),this.a-=6);this.a-=11},Rc,function(){this.b=Lc(this,N(this));this.a-=7},function(){Q(this,this.s);D(this,40);this.a-=11},function(){this.v&128||(D(this,P(this)),this.a-=6);this.a-=5},function(){var a=P(this);vc(this,a&255|this.F&-256);this.b=a>>8;this.a-=10},function(){var a=O(this);this.v&128||D(this,a);this.a-=10},function(){this.F&=-513;this.a-=4},function(){var a=O(this);this.v&128||(Q(this,this.s),
D(this,a),this.a-=6);this.a-=11},function(){Q(this,xc(this)&255|this.b<<8);this.a-=11},function(){this.b=Jc(this,N(this));this.a-=7},function(){Q(this,this.s);D(this,48);this.a-=11},function(){this.v&128&&(D(this,P(this)),this.a-=6);this.a-=5},function(){this.A=H(this)&65535;this.a-=5},function(){var a=O(this);this.v&128&&D(this,a);this.a-=10},function(){this.F|=512;this.a-=4;Mc(this)},function(){var a=O(this);this.v&128&&(Q(this,this.s),D(this,a),this.a-=6);this.a-=11},Rc,function(){K(this,N(this));
this.a-=7},function(){Q(this,this.s);D(this,56);this.a-=11}];function S(a){v.call(this,"ChipSet",a);var b=a.model;b&&!Sc[b]&&Ta("Unrecognized ChipSet model: "+b);this.b=Sc[b]||{};a.sound&&(this.I=null,window&&(this.I=window.AudioContext||window.webkitAudioContext),this.I&&new this.I);B(this)}l(S,v);k=S.prototype;k.S=function(){return!1};
k.pa=function(a,b,c,d){this.u=b;this.m=c;this.K=d;this.D=a;this.i=vb(a,"Keyboard");this.g=vb(a,"SerialPort");this.video=vb(a,"Video");Jb(b,this,this.b.eb);Kb(b,this,this.b.fb)};k.ca=function(a,b){if(!b)if(!a)this.reset();else if(!this.restore(a))return!1;return!0};k.ba=function(a){return a?this.save():!0};k.reset=function(){this.b.INIT&&!this.restore(this.b.INIT)&&this.G("reset error")};
k.save=function(){var a=new E(this);switch(this.b.Y){case T.Y:a.set(0,[this.W,this.f,this.X,this.B,this.H,this.P,this.R]);break;case V.Y:a.set(0,[this.N,this.s]),a.set(1,[this.l,this.o]),a.set(2,[this.c,this.C,this.O,this.J]),a.set(3,[this.A,this.a,this.v,this.F,this.j])}return a.data()};
k.restore=function(a){var b;if(a&&(b=a[0])&&b.length)switch(this.b.Y){case T.Y:return this.W=b[0],this.f=b[1],this.X=b[2],this.B=b[3],this.H=b[4],this.P=b[5],this.R=b[6],!0;case V.Y:return this.N=b[0],this.s=b[1],b=a[1],this.l=b[0],this.o=b[1],b=a[2],this.c=b[0],this.C=b[1],this.O=b[2],this.J=b[3],b=a[3],this.A=b[0],this.a=b[1],this.v=b[2],this.F=b[3],this.j=b[4],!0}return!1};k.start=function(){};k.stop=function(){};k.dd=function(){return this.W};k.ed=function(){return this.f};k.fd=function(){return this.X};
k.cd=function(){return this.B>>8-this.H&255};k.qd=function(a,b){this.H=b};k.sd=function(a,b){this.P=b};k.rd=function(a,b){this.B=b<<8|this.B>>8};k.td=function(a,b){this.R=b};k.ud=function(){};function Tc(a){var b=0,c=0,d=~a.A;for(a=0;10>a;a++)d&1&&(b=9-a),d>>=1;for(a=0;10>a;a++)d&1&&(c=9-a),d>>=1;return 10*b+c}
k.gd=function(){var a=this.s;a&=~V.ha.Gb;if((ic(this.m)&64)<<1&&(a|=V.ha.Gb,a!=this.s)){var b=this.v&1;switch(this.v>>1&7){case V.ja.Ba.kc:this.A=this.A<<1|b;break;case V.ja.Ba.pc:b=Tc(this);this.j[b]=V.ja.Xa;break;case V.ja.Ba.lc:this.a=this.a<<1|b;break;case V.ja.Ba.Pc:b=Tc(this);var c=this.a&V.ja.Xa;this.j[b]=c;break;case V.ja.Ba.Kc:b=Tc(this);c=this.j[b];null==c&&(c=V.ja.Xa);this.a=c;break;case V.ja.Ba.Lc:this.a<<=1,this.F=this.a&V.ja.Xa+1}}a&=~V.ha.Hb;this.F&&(a|=V.ha.Hb);a&=~V.ha.Bb;if(b=this.i){b=
this.i;if(c=b.i)c=b.m,c=ic(b.m)>=b.o+(c.na*c.O/1E3*1.2731488|0);c&&(b.i=!1);b=!b.i}b&&(a|=V.ha.Bb);a&=~V.ha.Pb;this.g&&this.g.U&Uc&&(a|=V.ha.Pb);return this.s=a};k.vd=function(a,b){this.N=b};k.yd=function(a,b){this.v=b};k.xd=function(a,b){a=b&3;switch(b>>2&3){case 0:this.c=this.c&-4|a;break;case 1:this.c=this.c&-13|a<<2;this.video&&(b=this.video,a=this.c,b.la!==a&&((b.la=a)?qc(b,!0):b.na=!0));break;case 2:switch(a){case 0:this.C=~this.C;break;case 2:case 3:this.O=3-a}break;case 3:this.J=a}};
k.wd=function(a,b){b&V.ta.Jc?(b&=V.ta.Lb,this.o!=b&&(this.o=b,this.video&&(this.video.ac=this.o==V.ta.Lb?50:60))):(b&=V.ta.ub,this.l!=b&&(this.l=b,this.video&&(a=this.video,b=this.l==V.ta.ub?132:80,a.C=b,a.M=a.ua,80<b&&a.M--,Vc(a)&&Wc(a))))};
var T={Y:1978.1,Nc:{Z:0,Ce:1,He:16,Oe:32,Xe:64,We:128,Ha:14},ya:{Z:1,oc:1,Ic:2,Ec:4,Fc:16,Gc:32,Hc:64,Ha:8},Oc:{Z:2,Be:3,ff:4,De:8,Se:16,Te:32,Ue:64,Ee:128,Ha:0},af:{Z:3},Ze:{Z:2,Pe:7},cf:{Z:3,gf:1,bf:2,Ve:4,Me:8,Ge:16,Xd:32},$e:{Z:4},df:{Z:5,Ie:1,Je:2,Ke:4,Le:8,hf:16}},V={Y:100,ha:{Z:66,Pb:1,Cc:2,Dc:4,Re:8,Qe:16,Hb:32,Gb:64,Bb:128},nc:{Z:66,INIT:0},ta:{Z:194,$d:0,ub:16,Jc:32,Lb:48,sc:0,tc:32},Wa:{Z:162,Ye:0,vc:0,rc:0,uc:0,qc:0},ja:{Ne:{Z:98},Ba:{lc:0,kc:1,Lc:2,Pc:4,pc:5,Kc:6,ef:7},Xa:16383}},Sc=
{SI1978:T,VT100:V};T.INIT=[[T.Nc.Ha,T.ya.Ha,T.Oc.Ha,0,0,0,0]];
V.INIT=[[V.nc.INIT,V.ha.Cc|V.ha.Dc],[V.ta.sc,V.ta.tc],[V.Wa.vc,V.Wa.rc,V.Wa.uc,V.Wa.qc],[0,0,0,0,[11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11776,11784,11918,11776,11984,11888,11776,11808,11776,12E3,12E3,11901,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
[11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11904,11776,11784,11918,11808,11984,11856,11776,11808,11776,12E3,12E3,11881,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]];T.eb={0:S.prototype.dd,1:S.prototype.ed,2:S.prototype.fd,3:S.prototype.cd};
T.fb={2:S.prototype.qd,3:S.prototype.sd,4:S.prototype.rd,5:S.prototype.td,6:S.prototype.ud};V.eb={66:S.prototype.gd};V.fb={66:S.prototype.vd,98:S.prototype.yd,162:S.prototype.xd,194:S.prototype.wd};Pa(function(){for(var a=z(document,"pc8080","chipset"),b=0;b<a.length;b++){var c=a[b],d=A(c);d=new S(d);eb(d,c)}});
function Xc(a){v.call(this,"ROM",a);this.a=null;this.g=a.addr;this.b=a.size;this.f=a.alias;this.c=a.file;this.i=ra(this.c);if(this.c){a=this.c;var b=sa(this.i);"json"!=b&&"hex"!=b&&(a=ua()+"/api/v1/dump?file="+this.c+"&format=bytes&decimal=true");var c=this;Ca(a,null,!0,function(a,b,f){Yc(c,a,b,f)})}}l(Xc,v);Xc.prototype.pa=function(a,b,c,d){this.u=b;this.m=c;this.K=d;Zc(this)};Xc.prototype.ca=function(){this.ra&&(this.K&&this.K.b(this.id,this.g,this.b,this.ra),delete this.ra);return!0};
Xc.prototype.ba=function(){return!0};
function Yc(a,b,c,d){if(d)a.G("Unable to load system ROM (error "+d+": "+b+")");else{$a(a.Ia,b,c);if("["==c.charAt(0)||"{"==c.charAt(0))try{var e=eval("("+c+")"),f=e.bytes,g=e.longs||e.data;if(f)a.a=f;else if(g)for(a.a=Array(4*g.length),d=c=0;c<g.length;c++)a.a[d++]=g[c]&255,a.a[d++]=g[c]>>8&255,a.a[d++]=g[c]>>16&255,a.a[d++]=g[c]>>24&255;else a.a=e;a.ra=e.symbols;if(!a.a.length){t("Empty ROM: "+b);return}if(1==a.a.length){t(a.a[0]);return}}catch(h){a.G("ROM data error: "+h.message);return}else for(b=
c.replace(/\n/gm," ").replace(/ +$/,"").split(" "),a.a=Array(b.length),e=0;e<b.length;e++)a.a[e]=qa(b[e]);Zc(a)}}
function Zc(a){if(!ob(a))if(!a.c)B(a);else if(a.a&&a.u){a.b||(a.b=a.a.length);if(a.a.length!=a.b){var b="ROM size ("+p(a.a.length,8,!0)+") does not match specified size ("+p(a.b,8,!0)+")";a.h.error=!0;a.G(b)}else{b=a.g;if(zb(a.u,b,a.b,Qb)){var c;for(c=0;c<a.a.length;c++)Gb(a.u,b+c,a.a[c]);b=!0}else b=!1;if(b){b=[];"number"==typeof a.f?b.push(a.f):null!=a.f&&a.f.length&&(b=a.f);for(c=0;c<b.length;c++){for(var d=a,e=b[c],f=d.u,g=d.b,h=[],m=d.g>>>f.b;0<g&&m<f.a.length;)h.push(f.a[m++]),g-=f.c;f=d.u;
d=d.b;g=0;for(e>>>=f.b;0<d&&e<f.a.length;){m=h[g++];if(!m)break;f.a[e++]=m;d-=f.c}}delete a.a}}B(a)}}Pa(function(){for(var a=z(document,"pc8080","rom"),b=0;b<a.length;b++){var c=a[b],d=A(c);d=new Xc(d);eb(d,c)}});
function $c(a){v.call(this,"RAM",a);this.ra=this.b=null;this.f=a.addr;this.g=a.size;this.za=a.load;this.sa=a.exec;this.c=!1;this.a=a.file;this.i=ra(this.a);if(this.a){a=this.a;var b=sa(this.i);"json"!=b&&"hex"!=b&&(a=ua()+"/api/v1/dump?file="+this.a+"&format=bytes&decimal=true");var c=this;Ca(a,null,!0,function(a,b,f){f?c.G("Unable to load RAM resource (error "+f+": "+a+")"):($a(c.Ia,a,b),(a=Ea(a,b))?(c.b=a.T,c.ra=a.ra,null==c.za&&(c.za=a.za),null==c.sa&&(c.sa=a.sa)):c.a=null,ad(c))})}}l($c,v);
$c.prototype.pa=function(a,b,c,d){this.u=b;this.m=c;this.K=d;ad(this)};$c.prototype.ca=function(){return!0};$c.prototype.ba=function(){return!0};
function ad(a){!a.c&&a.g&&zb(a.u,a.f,a.g,1)&&(a.c=!0);if(!ob(a)){if(!a.c)t("No RAM allocated");else if(a.a){if(!a.b||!a.u)return;var b=a.f;null!==a.za&&(b=a.za);for(var c=0;c<a.b.length;c++)Gb(a.u,b+c,a.b[c]);if(null!==a.sa){if(a.sa==bd){for(c=0;c<cd.length;c++)Gb(a.u,cd[c],118);uc(a.m,function(a){return function(b){if(0<=cd.indexOf(b)){var c=!1,d=a.m,e=a.K;if(b==dd)switch(c=!0,d.c){case ed:a.print(String.fromCharCode(d.f).replace(/\r/g,""));break;case fd:for(var m=Ac(d),q="",r=255;r--;){var y=L(a.m,
m++);if(36==y)break;q+=String.fromCharCode(y)}a.print(q.replace(/\r/g,""));break;default:c=!1}c?Qc.call(d):e&&(a.aa("\nCP/M vector "+p(b,4,!0)),D(d,b),e.a());b=!0}else b=!1;return b}}(a))}wc(a.m,a.sa)}delete a.b}B(a)}}$c.prototype.reset=function(){};var dd=5,ed=2,fd=9,bd=256,cd=[0,dd];Pa(function(){for(var a=z(document,"pc8080","ram"),b=0;b<a.length;b++){var c=a[b],d=A(c);d=new $c(d);eb(d,c)}});
function gd(a){v.call(this,"Keyboard",a);(a=a.model)&&!hd[a]&&Ta("Unrecognized Keyboard8080 model: "+a);this.a=hd[a]||{};this.reset();B(this)}l(gd,v);k=gd.prototype;
k.S=function(a,b,c){var d=this,e=a+"-"+b;if(void 0===this.w[e]){if("led"==a&&this.a.Ja[b])return this.w[e]=c,!0;switch(b){case "kbd":case "screen":return Ja("iOS")?(c.onkeypress=function(a){var b=!1;if(a=d.a.Va[a.keyCode||a.charCode]){a&128&&(a&=127,b=!0);a:{for(c in d.a.Ca)if(d.a.Ca[c]==a){var c=+c;break a}c=0}c&&(b?id(d,16,!0,!0):id(d,16,!1),id(d,c,!0,!0))}return!0},c.onkeydown=function(a){return jd(d,a,!0)},c.onkeyup=function(a){return jd(d,a,!1)}):(c.onkeydown=function(a){return kd(d,a,!0)},c.onkeyup=
function(a){return kd(d,a,!1)},c.onkeypress=function(a){a=a.keyCode||a.charCode;a>=n.Ga&&a<=n.Ya?d.b&(ld|md)||(d.b|=md,id(d,20,!0),nd(d)):a>=n.Za&&a<=n.z&&d.b&md&&(d.b&=~md,id(d,20,!1),nd(d));return!0}),c.onpaste=function(a){a:{if(d.g&&d.g.Aa&&(a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),a=a.clipboardData||window.clipboardData)){od(d.g,a.getData("Text"));a=!1;break a}a=!0}return a},!0;default:if(this.a.Fa&&void 0!==this.a.Fa[b])return this.w[e]=c,c.onclick=function(a,
b){return function(d){d.preventDefault&&d.preventDefault();d=!0;var e=0;17==b?e=pd:20==b&&(e=md);if(e){c.style.fontWeight="normal";if(d=!(a.b&e))c.style.fontWeight="bold";qd(a,b,d)}id(a,b,d,!e);a.D&&kc(a.D)}}(this,this.a.Fa[b]),!0}}return!1};k.pa=function(a,b,c,d){this.D=a;this.m=c;this.K=d;var e=this;this.v=lc(this.m,this.id,function(){rd(e)});this.N=vb(a,"ChipSet");this.g=vb(a,"SerialPort");Jb(b,this,this.a.eb);Kb(b,this,this.a.fb)};
k.ca=function(a,b){if(!b)if(!a)this.reset();else if(!this.restore(a))return!1;return!0};k.ba=function(a){return a?this.save():!0};k.reset=function(){this.c=[];this.b=0;this.a.INIT&&!this.restore(this.a.INIT)&&this.G("reset error")};k.save=function(){var a=new E(this);switch(this.a.Y){case W.Y:a.set(0,[this.l,this.j,this.i,this.o,-1])}return a.data()};
k.restore=function(a){var b;if(a&&(b=a[0])&&b.length)switch(this.a.Y){case sd.Y:return!0;case W.Y:return this.l=b[0],nd(this,this.l&W.fa.Cb),this.j=b[1],this.i=b[2],this.o=b[3],this.f=b[4],!0}return!1};function nd(a,b){null!=b?a.s=b:b=a.s;for(var c in a.a.Ja){var d="led-"+c;if(d=a.w[d]){var e=a.a.Ja[c],f=!!(b&e);e&e-1&&(f=!(b&~e));d.style.backgroundColor=f?"#"+p(16711680,6):"#000000"}}if(d=a.w["led-caps-lock"])d.style.backgroundColor=a.b&md?"#"+p(65280,6):"#000000"}
function qd(a,b,c,d){var e=0;switch(b){case 16:e=d?td:ud;break;case 17:e=d?vd:pd;break;case 18:e=d?wd:xd;break;case 91:e=d?yd:zd;break;case 20:e=md,c=!(a.b&e)}e&&(a.b=c?a.b|e:a.b&~e);return c}
function kd(a,b,c){var d=!0,e=b.keyCode;e=pa[e]||e;c=qd(a,e,c,2==b.location);a:if(e=a.a.rb[e]||e,a.a.Ca[e])var f=e;else{for(f in a.a.Fa)if(a.a.Fa[f]===e)break a;f=null}f&&!b.metaKey&&(d=!1,a.b&(Ad|Bd)&&(13==f?(f=118,d=!0):8==f&&(f=46,d=!0),d&&(a.b=c?a.b|Bd:a.b&~Bd)),d=id(a,f,c),(!(f>=n.Ga&&f<=n.Ya)||a.b|Cd)&&b.preventDefault&&b.preventDefault());return d}
function jd(a,b,c){var d=!0;if(c){var e=b.keyCode,f=a.a.Ca[e],g;if(g=f){a:{for(var h in a.a.Va)if(a.a.Va[h]==f){f=+h;break a}f=0}g=!f}g&&(d=id(a,e,c,!0),b.preventDefault&&b.preventDefault())}return d}
function id(a,b,c,d){var e;a:{for(e=0;e<a.c.length;e++)if(a.c[e].pb==b)break a;e=-1}if(c)0>e?a.c.push({pb:b,mb:Date.now(),bb:d||!1}):(a.c[e].mb=Date.now(),a.c[e].bb=d||!1),d&&rd(a);else if(0<=e){if(!a.c[e].bb&&(d=a.c[e].mb)&&Date.now()-d<Dd)return a.c[e].bb=!0,rd(a),!0;a.c.splice(e,1)}if(a.N){d=0;switch(b){case "1p":d=T.ya.Ec;break;case "2p":d=T.ya.Ic;break;case "coin":d=T.ya.oc;break;case "left":d=T.ya.Gc;break;case "right":d=T.ya.Hc;break;case "fire":d=T.ya.Fc}d&&(a=a.N,b=d,a.f&=~b,c&&(a.f|=b))}return!0}
function rd(a){for(var b=0,c=-1;b<a.c.length;){if(a.c[b].bb){var d=a.c[b].pb,e=Dd-(Date.now()-a.c[b].mb);if(0<e){if(0>c||c>e)c=e}else{id(a,d,!1);b=0;continue}}b++}0<=c&&mc(a.m,a.v,c)}k.hd=function(){var a=this.j;0<=this.f&&(this.f<this.c.length?(a=this.c[this.f],this.f++,a=W.Ca[a.pb],a&128&&(a&=127)):(this.f=-1,a=W.wc),this.j=a,Nc(this.m,1));return a};k.zd=function(a,b){this.l=b;this.i=!0;this.o=ic(this.m);nd(this,b&W.fa.Cb);b&W.fa.Mc&&(this.f=0,Nc(this.m,1))};
var td=1,ud=2,ld=3,vd=4,pd=8,Cd=12,wd=16,xd=32,Ad=48,yd=64,zd=128,md=512,Bd=4096,Dd=50,Ed={};Ed[n.Ga]=37;Ed[n.ib]=39;Ed[n.jb]=32;
var sd={Y:1978.1,Ca:{},Va:{},rb:Ed,Ja:{},Fa:{"1p":49,"2p":50,coin:51,left:37,right:39,fire:32}},X={},Y={},W={Y:100,Ca:(X[8]=3,X[n.Jb]=5,X[n.Ib]=6,X[n.Vb]=7,X[n.Nb]=8,X[n.Sb]=9,X[n.Q]=10,X[39]=16,X[221]=20,X[219]=21,X[n.yb]=22,X[n.Ob]=23,X[n.Kb]=24,X[n.E]=25,X[49]=26,X[37]=32,X[40]=34,X[117]=35,X[19]=35,X[192]=36,X[189]=37,X[57]=38,X[55]=39,X[52]=40,X[51]=41,X[27]=42,X[38]=48,X[114]=49,X[112]=50,X[46]=51,X[187]=52,X[48]=53,X[56]=54,X[54]=55,X[53]=56,X[50]=57,X[9]=58,X[103]=64,X[115]=65,X[113]=66,X[96]=
67,X[118]=68,X[220]=69,X[n.jb]=70,X[n.Ab]=71,X[n.wb]=72,X[n.vb]=73,X[n.Ga]=74,X[104]=80,X[2013]=81,X[98]=82,X[97]=83,X[222]=85,X[186]=86,X[n.zb]=87,X[n.xb]=88,X[n.ib]=89,X[n.Mb]=90,X[110]=96,X[116]=97,X[101]=98,X[100]=99,X[13]=100,X[190]=101,X[188]=102,X[n.Fb]=103,X[n.sb]=104,X[n.Ub]=105,X[119]=106,X[105]=112,X[99]=113,X[102]=114,X[109]=115,X[191]=117,X[n.Eb]=118,X[n[" "]]=119,X[n.Qb]=120,X[n.tb]=121,X[n.Ya]=122,X[120]=123,X[17]=124,X[16]=125,X[20]=126,X),Va:(Y[n.p]=5,Y[n.md]=6,Y[n.y]=7,Y[n.t]=8,
Y[n.Nd]=9,Y[n.q]=10,Y[n["]"]]=20,Y[n["["]]=21,Y[n.$c]=22,Y[n.Ld]=23,Y[n.r]=24,Y[n.e]=25,Y[n["1"]]=26,Y[n["`"]]=36,Y[n["-"]]=37,Y[n["9"]]=38,Y[n["7"]]=39,Y[n["4"]]=40,Y[n["3"]]=41,Y[n["="]]=52,Y[n["0"]]=53,Y[n["8"]]=54,Y[n["6"]]=55,Y[n["5"]]=56,Y[n["2"]]=57,Y[n["\\"]]=69,Y[n.kd]=70,Y[n.k]=71,Y[n.Yc]=72,Y[n.Xc]=73,Y[n.Za]=74,Y[n["'"]]=85,Y[n[";"]]=86,Y[n.jd]=87,Y[n.Zc]=88,Y[n.d]=89,Y[n.Kd]=90,Y[13]=100,Y[n["."]]=101,Y[n[","]]=102,Y[n.n]=103,Y[n.Rc]=104,Y[n.x]=105,Y[n["/"]]=117,Y[n.ld]=118,Y[n.Md]=120,
Y[n.Tc]=121,Y[n.z]=122,Y[n.Jb]=133,Y[n.Ib]=134,Y[n.Vb]=135,Y[n.Nb]=136,Y[n.Sb]=137,Y[n.Q]=138,Y[n["}"]]=148,Y[n["{"]]=149,Y[n.yb]=150,Y[n.Ob]=151,Y[n.Kb]=152,Y[n.E]=153,Y[n["!"]]=154,Y[n["~"]]=164,Y[n._]=165,Y[n["("]]=166,Y[n["&"]]=167,Y[n.$]=168,Y[n["#"]]=169,Y[n["+"]]=180,Y[n[")"]]=181,Y[n["*"]]=182,Y[n["^"]]=183,Y[n["%"]]=184,Y[n["@"]]=185,Y[n["|"]]=197,Y[n.jb]=198,Y[n.Ab]=199,Y[n.wb]=200,Y[n.vb]=201,Y[n.Ga]=202,Y[n['"']]=213,Y[n[":"]]=214,Y[n.zb]=215,Y[n.xb]=216,Y[n.ib]=217,Y[n.Mb]=218,Y[n[">"]]=
229,Y[n["<"]]=230,Y[n.Fb]=231,Y[n.sb]=232,Y[n.Ub]=233,Y[n["?"]]=245,Y[n.Eb]=246,Y[n.Qb]=248,Y[n.tb]=249,Y[n.Ya]=250,Y),rb:{},Ja:{},Fa:{"caps-lock":20,ctrl:17,esc:27,tab:9,"num-comma":116,"break":117,"line-feed":118,"no-scroll":119,setup:120},mc:{Z:130,INIT:127},fa:{Z:130,Ac:1,zc:2,yc:4,xc:8,Bc:16,Db:32,Cb:63,Mc:64,Zd:128,INIT:0},wc:127};W.Ja={l4:W.fa.Ac,l3:W.fa.zc,l2:W.fa.yc,l1:W.fa.xc,locked:W.fa.Bc,local:W.fa.Db,online:~W.fa.Db,"caps-lock":md};var hd={SI1978:sd,VT100:W};
W.INIT=[[W.fa.INIT,W.mc.INIT,!1,0,-1]];W.eb={130:gd.prototype.hd};W.fb={130:gd.prototype.zd};Pa(function(){for(var a=z(document,"pc8080","keyboard"),b=0;b<a.length;b++){var c=a[b],d=A(c);d=new gd(d);eb(d,c)}});
function Fd(a,b,c,d,e){v.call(this,"Video",a);var f=this;this.Da=Ja("Gecko/");this.A=a.screenWidth;this.s=a.screenHeight;this.da=a.bufferAddr;this.Qc=a.bufferRAM;var g=a.bufferFormat;this.P=g&&Gd[g.toUpperCase()]||Hd;this.C=a.bufferCols;this.R=a.bufferRows;this.ua=this.M=a.cellWidth||1;this.L=a.cellHeight||1;this.W=null;this.xa=!1;this.ea=a.bufferBits||1;this.Sc=a.bufferLeft||0;if(this.b=a.bufferRotate)this.b=this.b%360,0<this.b&&(this.b-=360),-90!=this.b&&(this.G("unsupported buffer rotation: "+
this.b),this.b=0);this.ia=a.interruptRate;this.Na=a.refreshRate||60;this.o=b;this.c=c;this.J=(this.Wc=d)||b||null;this.kb=this.A;this.jc=this.s;this.va=this.A/this.C|0;this.wa=this.s/this.R|0;1<this.L&&(this.R++,this.la=0,this.na=!1);b=a.smoothing;(c=Ma("smoothing"))&&(b="true"==c);null!=b&&(c=Ka(this.c,"imageSmoothingEnabled"))&&(this.c[c]=b);if(this.f=a.screenRotate)this.f=this.f%360,0<this.f&&(this.f-=360),-90!=this.f?(this.G("unsupported screen rotation: "+this.f),this.f=0):(this.c.translate(0,
this.s),this.c.rotate(this.f*Math.PI/180),this.c.scale(this.s/this.A,this.A/this.s));if(this.a=e)if(c=Ka(e,"requestFullscreen")||Ka(e,"requestFullScreen")){this.a.Ra=e[c];if(e=Ka(document,"on","fullscreenchange")){var h=Ka(document,"fullscreenElement")||Ka(document,"fullScreenElement");document.addEventListener(e,function(){Id(f,!!h)},!1)}(e=Ka(document,"on","fullscreenerror"))&&document.addEventListener(e,function(){Id(f,null)},!1)}if(this.F=a.fontROM)"json"!=sa(this.F)&&(this.F=ua()+"/api/v1/dump?file="+
this.F+"&format=bytes"),Ca(this.F,null,!0,function(a,b,c){Jd(f,a,b,c)});this.qa={}}l(Fd,v);
function Vc(a){a.j=a.C*a.M;a.B=a.R*a.L;var b=a.j,c=a.B;a.b&&(b=a.B,c=a.j);a.v=0;if(!a.Qc&&(a.v=(a.j*a.ea>>3)*a.B,!zb(a.u,a.da,a.v,3)))return!1;a.v?(a.Ea=a.c.createImageData(b,c),a.La=16/a.ea|0,Kd(a,a.v>>1)):Kd(a,(a.C+1)*a.R);a.l=document.createElement("canvas");a.l.width=b;a.l.height=c;a.ma=a.l.getContext("2d");a.H={};a.O=1<<a.ea;a.I=Array(a.O+Ld);a.I[0]=[0,0,0,255];a.I[1]=[255,255,255,255];a.P==Md&&(a.I[a.O+Nd]=[255,255,0,255],a.I[a.O+Od]=[0,255,0,255]);a.P==Pd&&(a.ac=60,a.oa=!1,a.X=Array(a.C));
return!0}k=Fd.prototype;k.S=function(a,b,c){var d=this;if("led"==a||"rled"==a)return this.qa[b]=c,!0;switch(b){case "fullScreen":return this.w[b]=c,this.a&&this.a.Ra?c.onclick=function(){d.Ra()}:c.parentNode.removeChild(c),!0}return!1};
k.pa=function(a,b,c,d){this.D=a;this.u=b;this.m=c;this.K=d;Vc(this);if(this.i=vb(a,"Keyboard")){for(var e in this.qa)this.i.S("led",e,this.qa[e]);this.o&&this.i.S(this.Wc?"textarea":"canvas","screen",this.J)}var f=this;this.Oa=lc(this.m,this.id,function(){qc(f)});mc(this.m,this.Oa,1E3/Math.max(this.Na,this.ia));this.Ma=0;this.F||B(this)};
function Jd(a,b,c,d){if(d)a.G("Unable to load font ROM (error "+d+": "+b+")");else{$a(a.Ia,b,c);try{var e=eval("("+c+")"),f=e.bytes||e;if(!f||!f.length){t("Empty font ROM: "+b);return}if(1==f.length){t(f[0]);return}if(2048==f.length)a.W=f,Wc(a);else{a.G("Unrecognized font data length ("+f.length+")");return}}catch(g){a.G("Font ROM data error: "+g.message);return}(a.c||a.K)&&B(a)}}
function Wc(a){a.W&&(a.xa=a.P==Pd,a.H[Qd]=[Rd(a,a.M,a.L),Rd(a,a.M,a.L,a.oa)],a.H[Sd]=[Rd(a,2*a.M,a.L),Rd(a,2*a.M,a.L,a.oa)],a.H[Td]=a.H[Ud]=[Rd(a,2*a.M,2*a.L),Rd(a,2*a.M,2*a.L,a.oa)])}
function Rd(a,b,c,d){var e=8>=a.ua?8:16,f=8<e?15:0,g=a.W.length/e,h=!1===d,m={M:b,L:c};m.canvas=document.createElement("canvas");m.canvas.width=16*b;m.canvas.height=g/16*c;m.context=m.canvas.getContext("2d");for(var q=m.context.createImageData(b,c),r=0;r<g;r++){for(var y=0,F=y;y<a.L;y++){var u=r*e+(f+y&e-1);u=d&&8==y?255:a.W[u];for(var x=0;x<c/a.L;x++){for(var G=0,U=0,Z=U;U<a.M;U++){var Da=u&128>>(7<U?7:U);G=a.xa&&!Da&&G?G:Da;for(var Ya=0;Ya<b/a.M;Ya++)h&&(G=!G),Vd(a,q,Z,F,G?1:0),Z++;G=Da}F++}}m.context.putImageData(q,
(r&15)*b,(r>>4)*c)}return m}k.ca=function(a,b){return b||!a||this.restore(a)?!0:!1};k.ba=function(a){return!a||this.save()};k.save=function(){var a=new E(this);a.set(0,[]);return a.data()};k.restore=function(){return!0};
k.Ra=function(){var a=!1;if(this.a){if(this.a.Ra){a="100%";if(screen&&screen.width&&screen.height){var b=screen.width/screen.height,c=this.A/this.s;b>c&&(a=Math.round(c/b*100)+"%")}this.Da?(this.o.style.width=a,this.o.style.width=a,this.o.style.display="block",this.o.style.margin="auto"):(this.a.style.width=a,this.a.style.height="auto");this.a.style.backgroundColor="black";this.a.Ra();a=!0}this.J&&this.J.focus()}return a};
function Id(a,b){!b&&a.a&&(a.Da?a.o.style.width=a.o.style.height="":a.a.style.width=a.a.style.height="")}function Kd(a,b){a.Ka=b;a.N=!1;if(void 0===a.g||a.g.length!=a.Ka)a.g=Array(a.Ka)}function Vd(a,b,c,d,e){d=a.b?(b.height-c-1)*b.width+d:c+d*b.width;e&&a.P==Md&&(208<=c&&236>c?e=a.O+Nd:28<=c&&72>c&&(e=a.O+Od));a=a.I[e];d*=a.length;b.data[d]=a[0];b.data[d+1]=a[1];b.data[d+2]=a[2];b.data[d+3]=a[3]}
function qc(a,b){var c=!0;if(!b){a.ia&&(120==a.ia?a.Ma&1?(Nc(a.m,2),c=!1):Nc(a.m,1):Nc(a.m,4));if(c&&a.N&&a.v){var d=a.u,e=a.da,f=a.v,g=!0,h=e>>>d.b;for(e=d.c-(e&d.f);0<f&&h<d.a.length;)d.a[h].ka&&(d.a[h].ka=g=!1,d.a[h].Yb=!0),f-=e,e=d.c,h++;g&&(c=!1)}mc(a.m,a.Oa,1E3/Math.max(a.Na,a.ia));a.Ma++}if(c)if(1<a.M)switch(a.P){case Pd:c=a.da;d=-1;f=0;g=60==a.ac?2:5;e=h=0;for(var m=-1;f<a.R;){var q=0,r=c,y=d,F=a.C;for(y!=Qd&&(F>>=1);;){var u=Eb(a.u,r++);if((u&Wd)==Wd){var x=Eb(a.u,r++);d=x&Xd;c=(x&Yd)<<8|
Eb(a.u,r);c+=x&Zd?$d:ae;break}if(q<F)a.X[q++]=u;else break}if(g)g--;else{for(;q<a.X.length;)a.X[q++]=0;if(0<=y)for(r=a.N&&a.g[h]==F,a.g[h++]=F,F=0;F<q;F++){u=a.X[F];if(!r||u!==a.g[h]){a.g[m=h]=u;x=a;var G=a.ma;var U=u&127;if(u=x.H[y][u&128?1:0]){var Z=(U&15)*u.M,Da=(U>>4)*u.L,Ya=u.M,jc=u.L;if(G){var Za=F*x.M;var sb=f*x.L;var tb=x.M;U=x.L}else Za=F*x.va,sb=f*x.wa,tb=x.va,U=x.wa;u.M>x.M&&(Za*=2,tb*=2);u.L>x.L&&(y==Ud&&(Da+=x.L),jc=x.L);G?G.drawImage(u.canvas,Z,Da,Ya,jc,Za,sb,tb,U):(Za+=0,sb+=0,x.c.drawImage(u.canvas,
Z,Da,Ya,jc,Za,sb,tb,U))}e++}h++}f++}}a.N=!0;!b&&a.na&&1==e&&(a.g[m]=-1,e=0);a.na=!1;(e||b)&&a.ma&&a.c.drawImage(a.l,0,a.la,a.j,a.B-a.L,0,0,a.kb,a.jc)}else{f=a.da;g=f+a.v;m=e=h=0;b=a.j;q=0;c=a.B;y=d=0;r=a.ea;F=(1<<r)-1;a.Sc&&(r=-r,y=16+r);for(;f<g;){x=a.u;G=f;u=G&x.f;Z=(G&x.g)>>>x.b;x=u!=x.f?x.a[Z].dc(u,G):x.a[Z++].gb(u,G)|x.a[Z&x.o].gb(0,G+1)<<8;if(a.N&&x===a.g[h])e+=a.La;else{a.g[h]=x;(G=y)&&(x=x>>8|(x&255)<<8);e<b&&(b=e);for(u=a.La;u--;)Z=x>>G&F,Vd(a,a.Ea,e++,m,Z),G+=r;e>q&&(q=e);m<c&&(c=m);m>=
d&&(d=m+1)}f+=2;h++;if(e>=a.j&&(e=0,m++,m>a.B))break}a.N=!0;b<a.j&&(f=q-b,d-=c,a.b&&(g=b,h=f,b=c,f=d,c=a.j-(g+h),d=h),a.ma.putImageData(a.Ea,0,0,b,c,f,d),a.c.drawImage(a.l,0,0,a.l.width,a.l.height,0,0,a.A,a.s))}}var Nd=0,Od=1,Ld=2,Hd=0,Md=1,Pd=2,Gd={SI1978:Md,VT100:Pd},Qd=96,Sd=64,Td=32,Ud=0,Wd=127,Yd=15,Zd=16,Xd=96,$d=8192,ae=16384;
Pa(function(){for(var a=z(document,"pc8080","video"),b=0;b<a.length;b++){var c=a[b],d=A(c),e=document.createElement("canvas");if(!e||!e.getContext){c.innerHTML="<br/>Missing &lt;canvas&gt; support. Please try a newer web browser.";break}e.setAttribute("class","pcjs-canvas");e.setAttribute("width",d.screenWidth);e.setAttribute("height",d.screenHeight);e.style.backgroundColor=d.screenColor;e.style.height="auto";0<=(window?window.navigator.userAgent:"").indexOf("MSIE")&&(c.onresize=function(a,b,c,d){return function(){b.style.height=
(a.clientWidth*d/c|0)+"px"}}(c,e,d.screenWidth,d.screenHeight),c.onresize());var f=+(d.aspect||Ma("aspect"));f&&.3<=f&&3.33>=f&&(Oa("onresize",function(a,b,c){return function(){b.style.height=(a.clientWidth/c|0)+"px"}}(c,e,f)),window.onresize());c.appendChild(e);f=document.createElement("textarea");Ja("iOS")&&(f.setAttribute("autocapitalize","off"),f.setAttribute("autocorrect","off"),f.style.fontSize="16px");c.appendChild(f);var g=e.getContext("2d");d=new Fd(d,e,g,f,c);eb(d,c)}});
function be(a){v.call(this,"SerialPort",a);this.H=+a.adapter;switch(this.H){case 0:this.I=0;this.O=2;break;default:t("Unrecognized serial adapter #"+this.H);return}this.b=this.c=null;this.J=a.tabSize;this.F=a.charBOL;this.f=0;this.B=!1;this.l=!0;var b=a.binding;if("console"==b)this.c="";else{var c;a=ce;b&&(void 0===c&&(c="Panel"),(c=hb(c,this.id))&&(b=c.w[b])&&this.S(null,a,b))}this.g="";this.a=this.Aa=this.s=null;this.exports={connect:this.$b,receiveData:this.nb,receiveStatus:this.Jd}}l(be,v);
k=be.prototype;k.S=function(a,b,c,d){var e=this;switch(b){case ce:return this.w[b]=this.b=c,c.onkeydown=function(a){a=a||window.event;var b=a.keyCode;if(8===b||a.ctrlKey&&65<=b&&90>=b)a.preventDefault&&a.preventDefault(),64<b&&(b-=64),de(e,b);return!0},c.onkeypress=function(a){a=a||window.event;de(e,a.which||a.keyCode);a.preventDefault&&a.preventDefault();return!0},c.removeAttribute("readonly"),!0;default:if(d)return this.w[b]=c,c.onclick=function(){e.nb(d);return!0},!0}return!1};
k.pa=function(a,b,c,d){this.D=a;this.u=b;this.m=c;this.K=d;var e=this;this.P=lc(this.m,this.id+".receive",function(){e.nb()});this.R=lc(this.m,this.id+".transmit",function(){od(e)});this.N=vb(a,"ChipSet");Jb(b,this,ee,this.I);Kb(b,this,fe,this.I);B(this)};
k.$b=function(a){if(!this.a){var b=ac(this.D,"connection");if(b){var c=b.split("->");if(2==c.length){var d=xa(c[0]);if(d!=this.Tb)return;c=xa(c[1]);if(this.a=gb(c)){var e=this.a.exports;if(e){var f=e.connect;f&&f.call(this.a,this.l);if(this.Aa=e.receiveData){this.l=a;this.s=e.receiveStatus;this.status("Connected "+this.Ia+"."+d+" to "+c);return}}}}this.status("Unable to establish connection: "+b)}}};
k.ca=function(a,b){if(!b)if(this.$b(this.l),!a||!this.restore)this.reset();else if(!this.restore(a))return!1;return!0};k.ba=function(a){return a?this.save():!0};k.reset=function(){ge(this)};k.save=function(){var a=new E(this),b=0,c=[];c[b++]=this.o;c[b++]=this.A;c[b++]=this.C;c[b++]=this.U;c[b++]=this.i;c[b++]=this.j;c[b]=this.v;a.set(0,c);return a.data()};k.restore=function(a){return ge(this,a[0])};
function ge(a,b){var c=0;void 0===b&&(b=he);a.o=b[c++];a.A=b[c++];a.C=b[c++];a.U=b[c++];a.i=b[c++];a.j=b[c++];a.v=b[c];return!0}function ie(a,b){var c=a.v&b;b&15||(c>>=4);b=je[c];c=((a.i&ke)>>2)+6;a.i&le&&c++;c+=((a.i&me)>>6)+1>>1;return 1E3/(b/c)|0}function de(a,b){return a.B||a.U&ne?!1:(a.A=b,a.U|=ne,Nc(a.m,a.O),!0)}
k.nb=function(a){null!=a&&(this.g="number"!=typeof a?a:this.g+String.fromCharCode(a));this.g&&(de(this,this.g.charCodeAt(0))&&(this.g=this.g.substr(1)),this.g&&this.m&&mc(this.m,this.P,ie(this,oe)));return!0};k.Jd=function(a){this.U&=~pe;a&64&&(this.U|=pe)};function od(a,b){a.U=a.U|Uc|qe;b&&a.Aa&&a.Aa.call(a.a,b)}k.bd=function(){var a=this.A;this.U&=~ne;return a};k.ad=function(){return this.U};
k.pd=function(a,b){this.C=b;this.U&=~(Uc|qe);if(19==b)this.B=!0;else if(17==b)this.B=!1;else if(this.Aa&&this.Aa.call(this.a,b),this.b)if(8==b)this.b.value=this.b.value.slice(0,-1),0<this.f&&this.f--;else{var c;13!=b&&10!=b&&(c=ya[b]);a=c=c?"<"+c+">":String.fromCharCode(b);c=a.length;9==b?(b=this.J||8,c=b-this.f%b,this.J&&(a="                                        ".slice(0,c))):13==b&&(this.f=c=0,a="\n");this.F&&!this.f&&c&&(a=String.fromCharCode(this.F)+a);this.b.value+=a;this.b.scrollTop=this.b.scrollHeight;
this.f+=c}else if(null!=this.c){if(10==b||1024<=this.c.length)this.aa(this.c),this.c="";10!=b&&(this.c+=String.fromCharCode(b))}this.m&&mc(this.m,this.R,ie(this,re))};k.od=function(a,b){this.o?(this.s&&(b^this.j)&(se|te)&&(a=0,this.l?(a|=b&se?32:0,a|=b&te?320:0):(a|=b&se?16:0,a|=b&te?1048576:0),this.s.call(this.a,a)),this.j=b,this.j&ue&&(this.o=!1)):(this.i=b,this.o=!0)};k.nd=function(a,b){this.v=b};
var ke=12,le=16,me=192,te=2,se=32,ue=64,Uc=1,ne=2,qe=4,pe=128,oe=15,re=240,je=[50,75,110,134.5,150,200,300,600,1200,1800,2E3,2400,3600,4800,9600,19200],he=[!1,0,0,133,142,39,238],ce="buffer",ee={0:be.prototype.bd,1:be.prototype.ad},fe={0:be.prototype.pd,1:be.prototype.od,2:be.prototype.nd};Pa(function(){for(var a=z(document,"pc8080","serial"),b=0;b<a.length;b++){var c=a[b],d=A(c);d=new be(d);eb(d,c)}});
function ve(a,b,c){v.call(this,"Computer",a);this.h.V=!1;we(this,b);this.v=ac(this,"autoPower",a);this.c=0;this.H=a.busWidth||a.buswidth;this.a=xe;this.o=null;this.j=this.C=!1;this.I=ac(this,"url")||"";(Math.random()+.1).toString(36);this.b=ye(this);if(this.m=hb("CPU",this.id)){this.K=hb("Debugger",this.id);this.g=[];for(b=null;b=vb(this,"Video",b);)this.g.push(b);this.u=new xb({id:this.Ia+".bus",busWidth:this.H},this.m,this.K);var d=fb(this.id);if(this.N=(this.i=hb("Panel",this.id))&&this.i.w.print)for(b=
0;b<d.length;b++){var e=d[b];e.G=this.i.G;e.print=this.i.print;e.aa=this.i.aa}this.aa("PC8080 v1.40.0\nCopyright \u00a9 2012-2017 Jeff Parsons <Jeff@pcjs.org>\nLicense: GPL version 3 or later <http://gnu.org/licenses/gpl.html>");for(b=0;b<d.length;b++)e=d[b],e.pa&&e.pa(this,this.u,this.m,this.K);b=null;e=ac(this,"resume",a);void 0!==e&&(1<e.length?b=this.l=e:this.a=parseInt(e,10));var f;if(a=ac(this,"state")||(f=!0,a.state))b=this.A=a,f||(this.j=!0,this.a=xe),this.a&&(this.s=new E(this,"1.40.0"),
ze(this.s)?b=null:delete this.s);!b&&this.a&&(b=Ae(this))&&(this.j=!0);if(b){var g=this;Ca(b,null,!0,function(a,b,c){c?(g.l=null,g.j=!1,g.G("Unable to load machine state from server (error "+c+(b?": "+xa(b):"")+")")):(g.o=b,g.C=!0);B(g)})}else B(this);this.w.power||(this.v=!0);!c&&this.v&&Be(this,this.Sa)}else t("Unable to find CPU component")}l(ve,v);function we(a,b){if(!b){var c;if("object"==typeof resources&&(c=resources.parms))try{b=eval("("+c+")")}catch(d){t(d.message+" ("+c+")")}}a.F=b}
function ac(a,b,c){var d=b.toLowerCase();d=Ma(b)||Ma(d);void 0===d&&a.F&&(d=a.F[b]);void 0===d&&c&&(d=c[b]);void 0===d&&"object"==typeof resources&&resources[b]&&(d=b);return d}function Be(a,b,c){for(var d=fb(a.id),e=0;e<=d.length;e++){var f=e<d.length?d[e]:a;if(!ob(f)){ob(f,function(){Be(a,b,c)});return}}b.call(a,c)}
function Ce(a,b){var c=new E(a,"1.40.0",De);if(ze(c)&&Ee(c)){var d=c.get(Fe),e=b?b.get(Fe):"unknown";d!=e&&(a.G("Machine state may be out-of-date\n("+d+" vs. "+e+")\nCheck your browser's local storage limits"),b||c.clear())}}k=ve.prototype;
k.Sa=function(a){void 0===a&&(a=this.a||(this.o?Ge:xe));if(!this.c){this.c++;var b=!1,c=!1;this.B=!1;var d=this.s||new E(this,"1.40.0");if(a==He)b=!0;else if(a>xe){if(ze(d,this.o)){this.f=new E(this,"1.40.0",Ie);ze(this.f)&&(Je(this,d),a=Ke,Le(this.f));this.f.set(Fe,za());Me(this.f);var e=this.a&&!this.j;if(a==Ge||cb("Click OK to restore the previous PC8080 machine state, or CANCEL to reset the machine.")){if(c=Ee(d)){var f=d.get("code"),g=d.get("data");f&&("ok"==f?ze(d,g):("error"==f&&"no machine state"!=
g?(this.G("Error: "+g),"unable to verify user"==g&&(Ia(Ne,""),this.b=null)):this.aa(f+": "+g),Le(d),ze(d)?(c=Ee(d),e=!0):c=!1))}e&&Ce(this,c?d:null)}else a==Ke&&d.clear()}else Ce(this);delete this.o;delete this.s}e=fb(this.id);for(f=0;f<e.length;f++)g=e[f],g!==this&&g!=this.m&&(c=Oe(this,g,d,b,c));b=[d,a,c];a!=He?Be(this,this.Xb,b):this.Xb(b)}};
function Oe(a,b,c,d,e){if(!b.h.V){b.h.V=!0;if(b.ca){var f=null;e&&((f=c.get(b.id))||(f=c.get(b.id.replace(/-[0-9]+\./i,"."))));"string"===typeof f&&(f=null);!b.ca(f,d)&&f&&(t("Unable to restore state for "+b.type),a.A&&!a.C?(c.clear(),a.a=xe,window&&window.location.reload()):a.B=!0,b.ca(null),e=!1)}if(!d&&b.Rb)for(a=b.Rb.split("|"),c=0;c<a.length;c++)b.status(a[c])}return e}
k.Xb=function(a){var b=a[0],c=0>a[1];a=a[2];this.J=!0;this.h.V=!0;var d=this.w.power;d&&(d.textContent="Shutdown");this.m&&(Oe(this,this.m,b,c,a),this.m.Qa());this.B&&(Je(this,b),b.clear());!c&&this.f&&(this.f.clear(),delete this.f);this.c=0};
function Je(a,b){if(cb("There may be a problem with your PC8080 machine.\n\nTo help us diagnose it, click OK to send this PC8080 machine state to http://www.pcjs.org.")){var c=a.b||"";b=b.toString();var d={app:"PC8080",ver:"1.40.0"};d.url=a.I;d.user=c;d.type="bug";d.data=b;Ca("http://www.pcjs.org/api/v1/report",d,!0)}}
function Pe(a,b,c){var d="none";if(a.c)return null;a.c--;var e=new E(a,"1.40.0"),f=new E(a,"1.40.0",De),g=za();f.set(Fe,g);e.set(Fe,g);e.set(Qe,"1.40.0");e.set(Re,window?window.location.href:null);e.set(Se,window?window.navigator.userAgent:"");if(a.m&&a.m.ba){c&&ec(a.m);var h=a.m.ba(b,c);"object"===typeof h&&e.set(a.m.id,h);c&&(a.m.h.V=!1,!1===h&&(d=null))}g=fb(a.id);for(var m=0;m<g.length;m++){var q=g[m];q.h.V&&(q.ba&&(h=q.ba(b,c),"object"===typeof h&&e.set(q.id,h)),c&&(q.h.V=!1,!1===h&&(d=null)))}d&&
(c?(g=h=!1,b?(a.b&&Te(a,a.b,e.toString()),Me(f)&&Me(e)||(d=null,h=g=!0)):a.a&&(h=!0,g=a.a==Ue),h&&e.clear(g)):d=e.toString());c&&(a.h.V=!1,b=a.w.power)&&(b.textContent="Power");a.c=0;return d}k.reset=function(){this.u&&this.u.reset&&this.u.reset();for(var a=fb(this.id),b=0;b<a.length;b++){var c=a[b];c!==this&&c!==this.u&&c.reset&&c.reset()}};k.start=function(a,b){for(var c=fb(this.id),d=0;d<c.length;d++){var e=c[d];"CPU"!=e.type&&e!==this&&e.start&&e.start(a,b)}};
k.stop=function(a,b){for(var c=fb(this.id),d=0;d<c.length;d++){var e=c[d];"CPU"!=e.type&&e!==this&&e.stop&&e.stop(a,b)}};
k.S=function(a,b,c){var d=this;switch(b){case "power":return this.w[b]=c,c.onclick=function(){d.c||(d.h.V?Pe(d,!1,!0):Be(d,d.Sa))},!0;case "reset":return this.w[b]=c,c.onclick=function(){if(d.h.V&&!d.c)if(d.a&&!d.l){var a=cb("Click OK to save changes to this PC8080 machine.\n\nWARNING: If you CANCEL, all disk changes will be discarded.");Pe(d,a,!0);!a&&d.A?window&&window.location.reload():d.Sa(xe)}else d.reset(),d.m&&d.m.Qa()},!0;case "save":if(ta())c.parentNode.removeChild(c);else return this.w[b]=
c,c.onclick=function(){var a=ye(d,!0);if(a){var b=!!(d.a&&!d.l||d.A),c=Pe(d,b);b?Te(d,a,c):d.G("Resume disabled, machine state not saved")}},!0}return!1};function ye(a,b){var c=a.b;c||((c=Ha(Ne),void 0!==c)?!c&&b&&(b=null,window&&(b=window.prompt("Saving machine states on the pcjs.org server is currently unsupported.\n\nIf you're running your own server, enter your user ID below.","")),c=b)&&((c=Ve(a,c))||a.G("The user ID is invalid.")):b&&a.G("Browser local storage is not available"));return c}
function Ve(a,b){a.b=null;b=Ca(ua()+"/api/v1/user?req=verify&user="+b);var c=b[1];if(!b[0]&&c)try{b=eval("("+c+")"),b.code&&"ok"==b.code&&(Ia(Ne,b.data),a.b=b.data)}catch(d){t(d.message+" ("+c+")")}return a.b}function Ae(a){var b=null;a.b&&(b=ua()+"/api/v1/user?req=load&user="+a.b+"&state="+We(a,"1.40.0"));return b}
function Te(a,b,c){if(c){var d={req:"store"};d.user=b;d.state=We(a,"1.40.0");d.data=c;b=Ca(ua()+"/api/v1/user",d);d=b[0];if(b[1]){if(d){var e=d.indexOf("\n");0<e&&(d=d.substr(0,e));d.indexOf("Error: ")||(d=d.substr(7))}d='{"code":'+b[1]+',"data":"'+d+'"}'}b=JSON.parse(d);b&&"ok"==b.code?a.G("Machine state saved to server"):c&&(c=b&&b.data||"unable to save machine state",c="error"==b.code?"Error: "+c:"Error "+b.code+": "+c,a.G(c),Ia(Ne,""),a.b=null)}}
function vb(a,b,c){a=fb(a.id);for(var d=0;d<a.length;d++){var e=a[d];if(c)c==e&&(c=null);else if(e.type==b)return e}return null}function kc(a,b){if(a.g.length){var c=0,d=0;!b&&window&&(c=window.scrollX,d=window.scrollY);a=a.g[0];a.J&&a.J.focus();!b&&window&&window.scrollTo(c,d)}}
function oc(a,b){a.m&&(a=a.m,a.Ma&&(b||!a.h.ga||a.h.Wb)&&(R(a,"A",a.b),R(a,"B",a.g),R(a,"C",a.c),R(a,"BC",yc(a),4),R(a,"D",a.i),R(a,"E",a.f),R(a,"DE",Ac(a),4),R(a,"H",a.j),R(a,"L",a.l),R(a,"HL",H(a),4),R(a,"SP",a.A,4),R(a,"PC",a.s,4),b=xc(a),R(a,"PS",b,4),R(a,"IF",b&512?1:0,1),R(a,"SF",b&128?1:0,1),R(a,"ZF",b&64?1:0,1),R(a,"AF",b&16?1:0,1),R(a,"PF",b&4?1:0,1),R(a,"CF",b&1?1:0,1)),b=a.w.speed)&&(b.textContent=a.h.ga&&a.R?a.R.toFixed(2)+"Mhz":"Stopped")}
var Ie="failsafe",De="validate",Fe="timestamp",Qe="version",Re="url",Se="browser",Ne="user",He=-1,xe=0,Ge=1,Ke=2,Ue=3;Pa(function(){for(var a=z(document,"pc8080-machine"),b=0;b<a.length;b++){var c=a[b],d=A(c);c=z(c,"pc8080","computer");for(var e=0;e<c.length;e++){var f=c[e],g=A(f);g=new ve(g,d,!0);eb(g,f);g.v&&Be(g,g.Sa)}}});Qa.show.push(function(){for(var a=z(document,"pc8080","computer"),b=0;b<a.length;b++){var c=A(a[b]);if(c=hb("Computer",c.id))c.h.qb=!1,c.J&&!c.h.V&&c.Sa(He)}});
Qa.exit.push(function(){for(var a=z(document,"pc8080","computer"),b=0;b<a.length;b++){var c=A(a[b]);if(c=hb("Computer",c.id))c.h.qb=!0,c.h.V&&Pe(c,!(!c.a||c.l),!0)}});function E(a,b,c){this.id=a.id;this.K=a.K;this.b="";this.a={};this.m=this.u=!1;this.key=We(a,b,c);Le(this,a.Uc)}k=E.prototype;k.set=function(a,b){try{this.a[a]=b}catch(c){}};k.get=function(a){return this.a[a]||null};k.data=function(){return this.a};
function ze(a,b){return b?(a.b=b,a.m=!0,a.u=!1,!0):a.m?!0:Fa()&&(b=Ha(a.key))?(a.b=b,a.m=!0):!1}function Ee(a){var b=!0;if(!a.u)try{a.a=JSON.parse(a.b),a.u=!0}catch(c){t(c.message||c),b=!1}return b}function Me(a){var b=!0;if(Fa()){var c=JSON.stringify(a.a);Ia(a.key,c)||(t("Unable to store "+c.length+" bytes in browser local storage"),b=!1)}return b}k.toString=function(){return this.a?JSON.stringify(this.a):this.b};function Le(a,b){a.b="";a.a={};a.m=a.u=!1;b&&a.set("parms",b)}
k.clear=function(a){Le(this);var b=[];try{for(var c=0,d=window.localStorage.length;c<d;c++)b.push(window.localStorage.key(c))}catch(e){}for(c=0;c<b.length;c++)if((d=b[c])&&(a||d.substr(0,this.key.length)==this.key)){try{window.localStorage.removeItem(d)}catch(e){}b.splice(c,1);c=0}};function We(a,b,c){a=a.id;if(b){var d=b.indexOf(".");0<d&&(a+=".v"+b.substr(0,d))}c&&(a+="."+c);return a}var Xe=0;
function Ye(a,b,c,d,e,f){e("Loading "+a+"...");Ca(a,null,!0,function(g,h,m){m?(h||(h="unable to load "+a+" ("+m+")"),f(h,null)):Ze(h,a,b,c,d,e,f)})}
function Ze(a,b,c,d,e,f,g){function h(a,f){if(f)g(f,null);else{c&&($a(c,b,a),(f=b)&&0>f.indexOf("/")&&"/"==window.location.pathname.slice(-1)&&(f=window.location.pathname+f),d?"}"==d.slice(-1)?(d=d.slice(0,-1),1<d.length&&(d+=",")):d='{state:"'+d+'",':d="{",d+='url:"'+f+'"}',"object"==typeof resources&&(f=null),d=d.replace(/\$/g,"$$$$"),a=a.replace(/(<machine[^>]*\sid=)(['"]).*?\2/,"$1$2"+c+"$2"+(d?" parms='"+d+"'":"")+(f?' url="'+f+'"':"")));e||(a=a.replace(/(<xsl:variable name="APPNAME">).*?(<\/xsl:variable>)/,
"$1PC8080$2"),a=a.replace(/(<xsl:variable name="APPCLASS">).*?(<\/xsl:variable>)/,"$1pc8080$2"));f=null;if("<"==a.charAt(0))try{e||(a=a.replace(/<!DOCTYPE(.|[\r\n])*]>\s*/g,"")),window.ActiveXObject||"ActiveXObject"in window?(f=new window.ActiveXObject("Microsoft.XMLDOM"),f.async=!1,f.loadXML(a)):f=(new window.DOMParser).parseFromString(a,"text/xml")}catch(r){f=null,a=r.message}else a="unrecognized XML: "+(255<a.length?a.substr(0,255)+"...":a);g(a,f)}}a?e?$e(a,f,h):h(a,null):g("no data"+(b?" for file: "+
b:""),null)}
function $e(a,b,c){var d;if(d=/<([a-z]+)\s+ref="(.*?)"(.*?)\/>/g.exec(a)){var e=d[2];b("Loading "+e+"...");Ca(e,null,!0,function(f,g,h){if(h||!g)c(a,"unable to resolve XML reference: "+d[0]+" ("+h+")");else{if(f=d[3])if(h=g.match(new RegExp("<"+d[1]+"[^>]*>"))){for(var m=h[0],q,r=/( [a-z]+=)(['"])(.*?)\2/gi;q=r.exec(f);)m=0>m.toLowerCase().indexOf(q[1].toLowerCase())?m.replace(">",q[0]+">"):m.replace(new RegExp(q[1]+"(['\"])(.*?)\\1"),q[0]);h[0]!=m&&(g=g.replace(h[0],m))}else{c(a,"missing <"+d[1]+
"> in "+e);return}g=g.replace(/<\?xml[^>]*>[\r\n]*/,"");a=a.replace(d[0],g);$e(a,b,c)}})}else c(a,null)}
function af(a,b,c,d){function e(a){if(void 0===h){var b=g&&z(g,"machine-warning");h=b&&b[0]||g}h&&(h.innerHTML=va(a))}function f(a){e("Error: "+a);m&&(--Xe||Ua(!0));m=!1}var g,h,m=!0;Xe++;ab[a]={};try{if(g=document.getElementById(a)){var q;if("object"==typeof resources&&(q=resources.css)){var r=document.head||document.getElementsByTagName("head")[0],y=document.createElement("style");y.type="text/css";y.styleSheet?y.styleSheet.cssText=q:y.appendChild(document.createTextNode(q));r.appendChild(y)}c||
(c="/versions/pc8080/1.40.0/components.xsl");q=function(d,h){h?Ye(c,null,null,!1,e,function(d,m){m?($a(a,c,d),e("Processing "+b+"..."),window.ActiveXObject||"ActiveXObject"in window?(m=h.transformNode(m))?(g.outerHTML=m,--Xe||Ua(!0)):f("transformNodeToObject failed"):document.implementation&&document.implementation.createDocument?(d=new XSLTProcessor,d.importStylesheet(m),(m=d.transformToFragment(h,document))?g.parentNode?(g.parentNode.replaceChild(m,g),--Xe||Ua(!0)):f("invalid machine element: "+
a):f("transformToFragment failed")):f("unable to transform XML: unsupported browser")):f(d)}):f(d)};"<"!=b.charAt(0)?Ye(b,a,d,!0,e,q):Ze(b,null,a,d,!1,e,q)}else f("missing machine element: "+a)}catch(F){f(F.message)}return m}window.embedPC8080=function(a,b,c,d){Ua(!1);return af(a,b,c,d)};
window.commandMachine=function(a,b,c,d,e,f){if("script"==e){d=!1;c+=".machine";if(!f)delete jb[c],d=!0;else if("string"==typeof f&&!jb[c]){d=!0;e=jb;for(var g=c,h=f.length,m=[],q=[],r="",y=null,F=0;F<h;F++){var u=f[F];if('"'==u||"'"==u)y&&u!=y?r+=u:(y?y=null:y=u,r&&(q.push(r),r=""));else{if(!y){if("\r"==u||"\n"==u)u=";";if(" "==u||"\t"==u||";"==u){r&&(q.push(r),r="");";"==u&&q.length&&(m.push(q),q=[]);continue}}r+=u}}r&&q.push(r);q.length&&m.push(q);e[g]=m;ib(c)||(d=!1)}return d?(b&&(a.disabled=!0),
!0):!1}if(d&&(g=hb(d,c+".machine"))&&(h=g.exports)&&(h=h[e]))return h.call(g,f)?(b&&(a.disabled=!0),!0):!1;console.log("unimplemented: commandMachine('"+c+"','"+d+"','"+e+"','"+f+"')");return!1};window.enableEvents=Ua;window.sendEvent=Wa;})();//# sourceMappingURL=/versions/pc8080/1.40.0/pc8080.map
