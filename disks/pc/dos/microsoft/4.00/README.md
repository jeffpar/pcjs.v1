---
layout: page
title: MS-DOS 4.00
permalink: /disks/pc/dos/microsoft/4.00/
machines:
  - type: pc
    id: ibm5170-msdos400
    config: /devices/pc/machine/5170/ega/640kb/rev1/machine.xml
    automount:
      A:
        name: MS-DOS 4.00 (Disk 1)
        path: /disks/pc/dos/microsoft/4.00/MSDOS400-DISK1.json
---

MS-DOS 4.00
---

The PCjs machine below is running PC-DOS 4.00.

{% include machine.html id="ibm5170-msdos400" %}

MS-DOS 4.00 was released in October 1988.  The contents of the six 360Kb distribution diskettes are shown below.

### Directory of MS-DOS 4.00 (Disk 1)

	 Volume in drive A has no label
	 Volume Serial Number is 1456-15F4
	 Directory of  A:\
	
	IO       SYS     33321 10-06-88  12:00a
	MSDOS    SYS     37376 10-06-88  12:00a
	COMMAND  COM     37556 10-06-88  12:00a
	AUTOEXEC BAT        39 10-06-88  12:00a
	CONFIG   SYS        96 10-06-88  12:00a
	COUNTRY  SYS     12806 10-06-88  12:00a
	DISKCOPY COM     10396 10-06-88  12:00a
	DISPLAY  SYS     15692 10-06-88  12:00a
	FDISK    EXE     60935 10-06-88  12:00a
	FORMAT   COM     22859 10-06-88  12:00a
	KEYB     COM     14727 10-06-88  12:00a
	KEYBOARD SYS     23328 10-06-88  12:00a
	REPLACE  EXE     19415 10-06-88  12:00a
	SELECT   COM      3642 10-06-88  12:00a
	SELECT   HLP     28695 10-06-88  12:00a
	SELECT   PRT      1329 10-06-88  12:00a
	SYS      COM     11456 10-06-88  12:00a
	       17 File(s)      18432 bytes free

### Directory of MS-DOS 4.00 (Disk 2)

	 Volume in drive A has no label
	 Volume Serial Number is 2B61-1BE2
	 Directory of  A:\
	
	COMMAND  COM     37556 10-06-88  12:00a
	ASSIGN   COM      5753 10-06-88  12:00a
	ATTRIB   EXE     18263 10-06-88  12:00a
	CHKDSK   COM     17787 10-06-88  12:00a
	COMP     COM      9459 10-06-88  12:00a
	DEBUG    COM     21574 10-06-88  12:00a
	DISKCOMP COM      9857 10-06-88  12:00a
	EDLIN    COM     14069 10-06-88  12:00a
	FC       EXE     15807 10-06-88  12:00a
	FILESYS  EXE     11129 10-06-88  12:00a
	FIND     EXE      5941 10-06-88  12:00a
	IFSFUNC  EXE     21739 10-06-88  12:00a
	JOIN     EXE     17813 10-06-88  12:00a
	LABEL    COM      4458 10-06-88  12:00a
	MEM      EXE     20005 10-06-88  12:00a
	MORE     COM      2134 10-06-88  12:00a
	SHARE    EXE     13424 10-06-88  12:00a
	SORT     EXE      5882 10-06-88  12:00a
	SUBST    EXE     18467 10-06-88  12:00a
	TREE     COM      6302 10-06-88  12:00a
	XCOPY    EXE     17055 10-06-88  12:00a
	       21 File(s)      56320 bytes free

### Directory of MS-DOS 4.00 (Disk 3)

	 Volume in drive A has no label
	 Volume Serial Number is 2047-15E0
	 Directory of  A:\
	
	COMMAND  COM     37556 10-06-88  12:00a
	EMM386   SYS     87776 10-06-88  12:00a
	EXE2BIN  EXE      7963 10-06-88  12:00a
	GWBASIC  EXE     80608 10-06-88  12:00a
	LINK     EXE     43988 10-06-88  12:00a
	PRINT    COM     14131 10-06-88  12:00a
	RAMDRIVE SYS      8235 10-06-88  12:00a
	SMARTDRV SYS     10224 10-06-88  12:00a
	XMA2EMS  SYS     29211 10-06-88  12:00a
	        9 File(s)      39936 bytes free

### Directory of MS-DOS 4.00 (Disk 4)

	 Volume in drive A has no label
	 Volume Serial Number is 0569-15F3
	 Directory of  A:\
	
	COMMAND  COM     37556 10-06-88  12:00a
	ANSI     SYS      9105 10-06-88  12:00a
	APPEND   EXE     11154 10-06-88  12:00a
	COUNTRY  SYS     12806 10-06-88  12:00a
	DISPLAY  SYS     15692 10-06-88  12:00a
	DRIVER   SYS      5241 10-06-88  12:00a
	FASTOPEN EXE     16702 10-06-88  12:00a
	GRAFTABL COM     10239 10-06-88  12:00a
	GRAPHICS COM     16693 10-06-88  12:00a
	GRAPHICS PRO      9397 10-06-88  12:00a
	HIMEM    SYS      6261 10-06-88  12:00a
	KEYB     COM     14727 10-06-88  12:00a
	KEYBOARD SYS     23328 10-06-88  12:00a
	MODE     COM     22960 10-06-88  12:00a
	NLSFUNC  EXE      6878 10-06-88  12:00a
	PRINTER  SYS     18914 10-06-88  12:00a
	RAMDRIVE SYS      8235 10-06-88  12:00a
	RECOVER  COM     10588 10-06-88  12:00a
	4201     CPI      6404 10-06-88  12:00a
	4208     CPI       720 10-06-88  12:00a
	5202     CPI       370 10-06-88  12:00a
	README   TXT     14148 10-12-88   9:13p
	       22 File(s)       1024 bytes free

### Directory of MS-DOS 4.00 (Disk 5)

	 Volume in drive A has no label
	 Volume Serial Number is 1F41-15E1
	 Directory of  A:\
	
	BACKUP   COM     36880 10-06-88  12:00a
	EGA      CPI     49068 10-06-88  12:00a
	FORMAT   COM     22859 10-06-88  12:00a
	LCD      CPI     10703 10-06-88  12:00a
	MODE     COM     22960 10-06-88  12:00a
	RESTORE  COM     36946 10-06-88  12:00a
	SELECT   DAT     22999 10-06-88  12:00a
	SELECT   EXE     95107 10-06-88  12:00a
	XMA2EMS  SYS     29211 10-06-88  12:00a
	        9 File(s)      30720 bytes free

### Directory of MS-DOS 4.00 (Disk 6)

	 Volume in drive A has no label
	 Volume Serial Number is 1101-1B52
	 Directory of  A:\
	
	CHKDSK   COM     17787 10-06-88  12:00a
	DISKCOPY COM     10396 10-06-88  12:00a
	PCIBMDRV MOS       263 10-06-88  12:00a
	PRINT    COM     14131 10-06-88  12:00a
	SHELL    CLR      4406 10-06-88  12:00a
	SHELL    HLP     66527 10-06-88  12:00a
	SHELL    MEU      4588 10-06-88  12:00a
	SHELLB   COM      3894 10-06-88  12:00a
	SHELLC   EXE    153855 10-06-88  12:00a
	DOSUTIL  MEU      6660 10-06-88  12:00a
	COMMAND  COM     37556 10-06-88  12:00a
	       11 File(s)      36864 bytes free

---

One important new feature of MS-DOS 4.00 was the ability to update the system files (IO.SYS and MSDOS.SYS)
of any boot disk, by moving the first two directory entries (and the contents of the first three data sectors)
as needed to make room for the new IO.SYS and MSDOS.SYS files.

The SYS command in older versions of MS-DOS would report "No room for system on destination disk" if the first
two directory entries (or the first three data sectors) were unavailable.  However, after using the MS-DOS 4.00
SYS command, it usually becomes possible to install older MS-DOS versions as well.

Learn more about the history of the SYS command from [Microsoft Support](https://support.microsoft.com/en-us/kb/66530).

Additional details about MS-DOS 4.00 from [PC DOS Retro](https://sites.google.com/site/pcdosretro/doshist):

- distributed on 2 720KB floppy disks [also released on 6 360KB diskettes; the number of 720KB diskettes needs to be verified]
- SHARE loaded for FCB operations on hard disks greater than 32MB
- IFS driver support added
- MEM command added to report memory usage
- new internal command: TRUENAME
- new external commands: FILESYS, IFSFUNC, MEM
- new CONFIG.SYS commands: COMMENT, CPSW, IFS, INSTALL, MULTITRACK, REM, SWITCHES
- new device drivers: SMARTDRV.SYS (MS-DOS), XMA2EMS.SYS, XMAEM.SYS
- new support file: GRAPHICS.PRO
- disk buffers could be allocated in expanded memory (BUFFERS /X)
- DPB, SFT and CDS structures extended
- new internal version table added
- DOS swappable data area changed
- program names added to MCBs
- INT 21h functions 3305h, 5D0Bh, 5F05h-5F08h, 6507h, 6520h-6523h, 65A0h-65A3h, 69h-6Ch added
- INT 21h functions 3303h-3304h, 5702h-5704h reserved but unused
- INT 2Fh multiplex function 1Ah (ANSI.SYS) added
